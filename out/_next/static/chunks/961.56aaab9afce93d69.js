"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[961],{10961:function(e,r,t){t.r(r),t.d(r,{EthereumPrivateKeyProvider:function(){return Ne},TransactionFormatter:function(){return Oe},WalletConnectProvider:function(){return R},getProviderHandlers:function(){return de}});var n=t(15861),a=t(15671),i=t(43144),o=t(97326),s=t(73237),c=t(32531),u=t(82963),f=t(61120),p=t(4942),d=t(64687),h=t.n(d),l=t(22782),v=t(95844),g=t(16843),m=t(68531),y=t(79826),x=t(66052),b=t(51091),w=t(53934),P=t(71002),k=t(20917),E=t(69282),_=t.n(E),O=t(40660),S=t(70794),T=t(2832),A=t.n(T),N=t(48764).Buffer;function C(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function B(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?C(Object(t),!0).forEach((function(r){(0,p.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function I(e){return 42===e.length}function Z(e){var r=e.getAccounts,t=e.getPrivateKey,a=e.processDecryptMessage,i=e.processEncryptionPublicKey,o=e.processEthSignMessage,s=e.processPersonalMessage,c=e.processTransaction,u=e.processSignTransaction,f=e.processTypedMessage,p=e.processTypedMessageV3,d=e.processTypedMessageV4;if(!r)throw new Error("opts.getAccounts is required");function l(e,r){return g.apply(this,arguments)}function g(){return(g=(0,n.Z)(h().mark((function e(t,n){var a,i,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("string"===typeof t&&t.length>0)){e.next=8;break}return e.next=3,r(n);case 3:if(a=e.sent,i=a.map((function(e){return e.toLowerCase()})),o=t.toLowerCase(),!i.includes(o)){e.next=8;break}return e.abrupt("return",o);case 8:throw y.ethErrors.rpc.invalidParams({message:"Invalid parameters: must provide an Ethereum address."});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=(0,n.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:n.result=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=(0,n.Z)(h().mark((function e(t,n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:a=e.sent,n.result=a[0]||null;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=(0,n.Z)(h().mark((function e(r,t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}throw y.ethErrors.rpc.methodNotSupported();case 2:return n=r.params[0]||{from:""},e.next=5,l(n.from,r);case 5:return n.from=e.sent,e.next=8,c(n,r);case 8:t.result=e.sent;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=(0,n.Z)(h().mark((function e(r,t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}throw y.ethErrors.rpc.methodNotSupported();case 2:return n=r.params[0]||{from:""},e.next=5,l(n.from,r);case 5:return n.from=e.sent,e.next=8,u(n,r);case 8:t.result=e.sent;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=(0,n.Z)(h().mark((function e(r,t){var n,a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}throw y.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,l(r.params[0],r);case 4:return n=e.sent,a=r.params[1],i=r.params[2]||{},s=B(B({},i),{},{from:n,data:a}),e.next=10,o(s,r);case 10:t.result=e.sent;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=(0,n.Z)(h().mark((function e(r,t){var n,a,i,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}throw y.ethErrors.rpc.methodNotSupported();case 2:return n=r.params[0],e.next=5,l(r.params[1],r);case 5:return a=e.sent,"V1",i=r.params[2]||{},o=B(B({},i),{},{from:a,data:n}),e.next=11,f(o,r,"V1");case 11:t.result=e.sent;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=(0,n.Z)(h().mark((function e(r,t){var n,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}throw y.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,l(r.params[0],r);case 4:return n=e.sent,a=r.params[1],"V3",i={data:a,from:n,version:"V3"},e.next=10,p(i,r,"V3");case 10:t.result=e.sent;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=(0,n.Z)(h().mark((function e(r,t){var n,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}throw y.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,l(r.params[0],r);case 4:return n=e.sent,a=r.params[1],"V4",i={data:a,from:n,version:"V4"},e.next=10,d(i,r,"V4");case 10:t.result=e.sent;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=(0,n.Z)(h().mark((function e(r,t){var n,a,i,o,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}throw y.ethErrors.rpc.methodNotSupported();case 2:return n=r.params[0],a=r.params[1],i=r.params[2]||{},I(n)&&!I(a)?("The eth_personalSign method requires params ordered ","[message, address]. This was previously handled incorrectly, ","and has been corrected automatically. ","Please switch this param order for smooth behavior in the future.",t.warning="The eth_personalSign method requires params ordered [message, address]. This was previously handled incorrectly, and has been corrected automatically. Please switch this param order for smooth behavior in the future.",o=n,c=a):(c=n,o=a),e.next=8,l(o,r);case 8:return o=e.sent,u=B(B({},i),{},{from:o,data:c}),e.next=12,s(u,r);case 12:t.result=e.sent;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=(0,n.Z)(h().mark((function e(r,t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}throw y.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,l(r.params[0],r);case 4:return n=e.sent,e.next=7,i(n,r);case 7:t.result=e.sent;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=(0,n.Z)(h().mark((function e(r,t){var n,i,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}throw y.ethErrors.rpc.methodNotSupported();case 2:return n=r.params[0],e.next=5,l(r.params[1],r);case 5:i=e.sent,o=r.params[2]||{},s=B(B({},o),{},{from:i,data:n}),t.result=a(s,r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=(0,n.Z)(h().mark((function e(r,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw y.ethErrors.rpc.methodNotSupported();case 2:n.result=t(r);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,v.v0)({eth_accounts:(0,v.Pk)((function(e,r){return m.apply(this,arguments)})),eth_private_key:(0,v.Pk)((function(e,r){return A.apply(this,arguments)})),eth_coinbase:(0,v.Pk)((function(e,r){return x.apply(this,arguments)})),eth_sendTransaction:(0,v.Pk)((function(e,r){return b.apply(this,arguments)})),eth_signTransaction:(0,v.Pk)((function(e,r){return w.apply(this,arguments)})),eth_sign:(0,v.Pk)((function(e,r){return P.apply(this,arguments)})),eth_signTypedData:(0,v.Pk)((function(e,r){return k.apply(this,arguments)})),eth_signTypedData_v3:(0,v.Pk)((function(e,r){return E.apply(this,arguments)})),eth_signTypedData_v4:(0,v.Pk)((function(e,r){return _.apply(this,arguments)})),personal_sign:(0,v.Pk)((function(e,r){return O.apply(this,arguments)})),eth_getEncryptionPublicKey:(0,v.Pk)((function(e,r){return S.apply(this,arguments)})),eth_decrypt:(0,v.Pk)((function(e,r){return T.apply(this,arguments)}))})}function M(e){var r=e.getAccounts,t=e.getPrivateKey,n=e.processTransaction,a=e.processSignTransaction,i=e.processEthSignMessage,o=e.processTypedMessage,s=e.processTypedMessageV3,c=e.processTypedMessageV4,u=e.processPersonalMessage,f=e.processEncryptionPublicKey,p=e.processDecryptMessage;return(0,v.UZ)([(0,v.v0)({eth_syncing:!1}),Z({getAccounts:r,getPrivateKey:t,processTransaction:n,processEthSignMessage:i,processSignTransaction:a,processTypedMessage:o,processTypedMessageV3:s,processTypedMessageV4:c,processPersonalMessage:u,processEncryptionPublicKey:f,processDecryptMessage:p})])}function j(e){return function(r,t,n,a){return"eth_chainId"===r.method?(t.result=e,a()):n()}}function H(e){return function(r,t,n,a){return"eth_provider_config"===r.method?(t.result=e,a()):n()}}function F(e){var r=e.chainId,t=e.rpcTarget,n=(0,l.v$)({rpcTarget:t});return{networkMiddleware:(0,v.UZ)([j(r),H(e),n]),fetchMiddleware:n}}function G(e){var r=e.connector;return{getPrivateKey:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw y.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAccounts:function(){var e=(0,n.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=r.accounts)||!n.length){e.next=3;break}return e.abrupt("return",n);case 3:throw new Error("Failed to get accounts");case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),processTransaction:function(){var e=(0,n.Z)(h().mark((function e(t,n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.sendTransaction(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),processSignTransaction:function(){var e=(0,n.Z)(h().mark((function e(t,n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.signTransaction(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),processEthSignMessage:function(){var e=(0,n.Z)(h().mark((function e(t,n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.signMessage([t.from,t.data]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),processPersonalMessage:function(){var e=(0,n.Z)(h().mark((function e(t,n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.signPersonalMessage([t.data,t.from]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),processTypedMessage:function(){var e=(0,n.Z)(h().mark((function e(t,n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.signTypedData([t.from,t.data]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),processTypedMessageV3:function(){var e=(0,n.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.signTypedData([t.from,t.data]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),processTypedMessageV4:function(){var e=(0,n.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.signTypedData([t.from,t.data]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),processEncryptionPublicKey:function(){var e=(0,n.Z)(h().mark((function e(r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw y.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),processDecryptMessage:function(e){throw y.ethErrors.rpc.methodNotSupported()}}}function D(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function K(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?D(Object(t),!0).forEach((function(r){(0,p.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function L(e){var r=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,f.Z)(e);if(r){var a=(0,f.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,u.Z)(this,t)}}var R=function(e){(0,c.Z)(t,e);var r=L(t);function t(e){var n,i=e.config,s=e.state,c=e.connector;return(0,a.Z)(this,t),n=r.call(this,{config:{chainConfig:K(K({},i.chainConfig),{},{chainNamespace:g.EN.EIP155}),skipLookupNetwork:!!i.skipLookupNetwork},state:K(K({},s||{}),{},{chainId:"loading",accounts:[]})}),(0,p.Z)((0,o.Z)(n),"connector",null),n.connector=c||null,n}return(0,i.Z)(t,[{key:"enable",value:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connector){e.next=2;break}throw y.ethErrors.provider.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});case 2:return e.next=4,this.setupProvider(this.connector);case 4:return e.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var e=(0,n.Z)(h().mark((function e(r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.onConnectorStateUpdate(r),e.next=3,this.setupEngine(r);case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=(0,n.Z)(h().mark((function e(r){var t,n,a,i,o,s,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.chainId,n=r.addChain,a=void 0===n||n,i=r.lookup,o=void 0===i||i,this.connector){e.next=3;break}throw y.ethErrors.provider.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});case 3:if(s=this.getChainConfig(t),this.update({chainId:"loading"}),c=s.rpcTarget,u=s.displayName,!a){e.next=15;break}return e.prev=7,e.next=10,this.connector.sendCustomRequest({method:"wallet_addEthereumChain",params:[{chainId:t,chainName:u,rpcUrls:[c]}]});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),g.cM.error(e.t0);case 15:return e.prev=15,e.next=18,this.connector.sendCustomRequest({method:"wallet_switchEthereumChain",params:[{chainId:t}]});case 18:e.next=25;break;case 20:if(e.prev=20,e.t1=e.catch(15),g.cM.error(e.t1),"JSON RPC response format is invalid"===e.t1.message){e.next=25;break}throw e.t1;case 25:if(this.configure({chainConfig:s}),!o){e.next=29;break}return e.next=29,this.lookupNetwork(this.connector);case 29:case"end":return e.stop()}}),e,this,[[7,12],[15,20]])})));return function(r){return e.apply(this,arguments)}}()},{key:"addChain",value:function(){var e=(0,n.Z)(h().mark((function e(r){var n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connector){e.next=2;break}throw g.Ty.notReady("Wallet adapter is not ready yet");case 2:return n=r.rpcTarget,a=r.displayName,e.prev=3,e.next=6,this.connector.sendCustomRequest({method:"wallet_addEthereumChain",params:[{chainId:r.chainId,chainName:a,rpcUrls:[n]}]});case 6:(0,s.Z)((0,f.Z)(t.prototype),"addChain",this).call(this,r),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(3),g.cM.error(e.t0),e.t0;case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(r){return e.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var e=(0,n.Z)(h().mark((function e(r){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.connected){e.next=2;break}throw g.RM.notConnectedError("Wallet connect connector is not connected");case 2:if(this.provider){e.next=4;break}throw y.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 4:if(t=this.config.chainConfig.chainId,n=(0,g.H2)(r.chainId.toString())?r.chainId:"0x".concat(r.chainId.toString(16)),t===n){e.next=8;break}throw g.Ty.rpcConnectionError("Invalid network, net_version is: ".concat(n,", expected: ").concat(t));case 8:return this.provider.emit("connect",{chainId:t}),this.provider.emit("chainChanged",this.state.chainId),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"setupEngine",value:function(){var e=(0,n.Z)(h().mark((function e(r){var t,n,a,i,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=G({connector:r}),this.update({accounts:r.accounts||[]}),n=M(t),a=new v.eI,i=F(this.config.chainConfig),o=i.networkMiddleware,a.push(n),a.push(o),s=(0,l.Xj)(a),this.updateProviderEngineProxy(s),this.config.skipLookupNetwork){e.next=12;break}return e.next=12,this.lookupNetwork(r);case 12:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"onConnectorStateUpdate",value:function(){var e=(0,n.Z)(h().mark((function e(r){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.on("session_update",function(){var e=(0,n.Z)(h().mark((function e(n,a){var i,o,s,c,u,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.provider){e.next=2;break}throw g.RM.notConnectedError("Wallet connect connector is not connected");case 2:if(!n){e.next=5;break}return t.provider.emit("error",n),e.abrupt("return");case 5:if(i=a.params[0],o=i.accounts,s=i.chainId,c=i.rpcUrl,null!==o&&void 0!==o&&o.length&&t.state.accounts[0]!==o[0]&&(t.update({accounts:o}),t.provider.emit("accountsChanged",o)),u="0x".concat(s.toString(16)),!s||t.state.chainId===u){e.next=13;break}return f=(0,g.h2)(g.EN.EIP155,s)||{},t.configure({chainConfig:K(K({},f),{},{chainId:u,rpcTarget:c,chainNamespace:g.EN.EIP155})}),e.next=13,t.setupEngine(r);case 13:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}]),t}(m.Zk);(0,p.Z)(R,"getProviderInstance",function(){var e=(0,n.Z)(h().mark((function e(r){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new R({config:{chainConfig:r.chainConfig,skipLookupNetwork:r.skipLookupNetwork}}),e.next=3,t.setupProvider(r.connector);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}());var U=new S.Z("1e18"),V=new S.Z("1e9"),z=new S.Z("1"),q={hex:function(e){return"string"===typeof e?new S.Z((0,w.stripHexPrefix)(e),16):new S.Z(e,16)},dec:function(e){return new S.Z(e,10)}},W={WEI:function(e){return e.div(U)},GWEI:function(e){return e.div(V)},ETH:function(e){return e.div(z)}},J={WEI:function(e){return e.times(U).dp(0,S.Z.ROUND_HALF_UP)},GWEI:function(e){return e.times(V).dp(9,S.Z.ROUND_HALF_UP)},ETH:function(e){return e.times(z).dp(9,S.Z.ROUND_HALF_UP)}},X={hex:function(e){return e.toString(16)},dec:function(e){return new S.Z(e).toString(10)}},Y=function(e,r){var t=r.fromNumericBase;return function(e){var r=e.value,t=e.fromNumericBase,n=e.fromDenomination,a=e.toNumericBase,i=e.toDenomination,o=e.numberOfDecimals,s=q[t](r);return n&&(s=W[n](s)),i&&(s=J[i](s)),o&&(s=s.dp(o,S.Z.ROUND_HALF_DOWN)),a&&(s=X[a](s)),s}({fromNumericBase:void 0===t?"hex":t,toNumericBase:r.toNumericBase,fromDenomination:r.fromDenomination,toDenomination:r.toDenomination,numberOfDecimals:r.numberOfDecimals,value:e||"0"})};function $(e){return Y(e,{fromNumericBase:"dec",toNumericBase:"hex",fromDenomination:"GWEI",toDenomination:"WEI"})}function Q(e){return Y(e,{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"WEI",toDenomination:"GWEI"})}function ee(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function re(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ee(Object(t),!0).forEach((function(r){(0,p.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function te(e){return Q($(e))}function ne(e){return ae.apply(this,arguments)}function ae(){return(ae=(0,n.Z)(h().mark((function e(r){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.U2)(r);case 2:return t=e.sent,n=re(re({},t),{},{estimatedBaseFee:te(t.estimatedBaseFee),low:re(re({},t.low),{},{suggestedMaxPriorityFeePerGas:te(t.low.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:te(t.low.suggestedMaxFeePerGas)}),medium:re(re({},t.medium),{},{suggestedMaxPriorityFeePerGas:te(t.medium.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:te(t.medium.suggestedMaxFeePerGas)}),high:re(re({},t.high),{},{suggestedMaxPriorityFeePerGas:te(t.high.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:te(t.high.suggestedMaxFeePerGas)})}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return oe.apply(this,arguments)}function oe(){return(oe=(0,n.Z)(h().mark((function e(r){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.U2)(r,{referrer:r,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors"});case 2:return t=e.sent,e.abrupt("return",{low:t.SafeGasPrice,medium:t.ProposeGasPrice,high:t.FastGasPrice});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var se=function(e,r){var t;try{_().ok(e&&"object"===(0,P.Z)(e),"Params must be an object."),_().ok("data"in e,'Params must include a "data" field.'),_().ok("from"in e,'Params must include a "from" field.'),_().ok("string"===typeof e.from&&(0,w.isValidAddress)(e.from),'"from" field must be a valid, lowercase, hexadecimal Ethereum address string.');var n=null,a=null;switch(e.version){case b.SignTypedDataVersion.V1:"string"===typeof e.data?_().doesNotThrow((function(){n=JSON.parse(e.data)}),'"data" must be a valid JSON string.'):n=e.data,_().ok(Array.isArray(n),"params.data must be an array."),_().doesNotThrow((function(){(0,b.typedSignatureHash)(n)}),"Signing data must be valid EIP-712 typed data.");break;case b.SignTypedDataVersion.V3:case b.SignTypedDataVersion.V4:"string"===typeof e.data?_().doesNotThrow((function(){n=JSON.parse(e.data)}),'"data" must be a valid JSON string.'):n=e.data,_().ok(n.primaryType in n.types,'Primary type of "'.concat(n.primaryType,'" has no type definition.'));var i=O.validate(n,b.TYPED_MESSAGE_SCHEMA.properties);_().strictEqual(i.errors.length,0,"Signing data must conform to EIP-712 schema. See https://git.io/fNtcx."),(a=null===(t=n.domain)||void 0===t?void 0:t.chainId)&&(_().ok(!Number.isNaN(r),'Cannot sign messages for chainId "'.concat(a,'", because Web3Auth is switching networks.')),"string"===typeof a&&(a=Number.parseInt(a,(0,g.H2)(a)?16:10)),_().strictEqual(a,r,'Provided chainId "'.concat(a,'" must match the active chainId "').concat(r,'"')));break;default:_().fail('Unknown typed data version "'.concat(e.version,'"'))}}catch(o){throw y.ethErrors.rpc.invalidInput({message:null===o||void 0===o?void 0:o.message})}};function ce(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ue(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ce(Object(t),!0).forEach((function(r){(0,p.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ce(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function fe(e,r,t){return pe.apply(this,arguments)}function pe(){return(pe=(0,n.Z)(h().mark((function e(r,t,n){var a,i,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.formatTransaction(r);case 2:return a=e.sent,e.next=5,n.getCommonConfiguration();case 5:return i=e.sent,o=x.TransactionFactory.fromTxData(a,{common:i}),s=o.sign(N.from(t,"hex")).serialize(),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e){var r=e.txFormatter,t=e.privKey,a=e.getProviderEngineProxy;return{getAccounts:function(){var e=(0,n.Z)(h().mark((function e(r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["0x".concat((0,w.privateToAddress)(N.from(t,"hex")).toString("hex"))]);case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),getPrivateKey:function(){var e=(0,n.Z)(h().mark((function e(r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),processTransaction:function(){var e=(0,n.Z)(h().mark((function e(n,i){var o,s,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a()){e.next=3;break}throw y.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return e.next=5,fe(n,t,r);case 5:return s=e.sent,e.next=8,o.request({method:"eth_sendRawTransaction",params:["0x".concat(s.toString("hex"))]});case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),processSignTransaction:function(){var e=(0,n.Z)(h().mark((function e(n,i){var o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a()){e.next=3;break}throw y.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return e.next=5,fe(n,t,r);case 5:return o=e.sent,e.abrupt("return","0x".concat(o.toString("hex")));case 7:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),processEthSignMessage:function(){var e=(0,n.Z)(h().mark((function e(r,n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,l.l)(t,r.data),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),processPersonalMessage:function(){var e=(0,n.Z)(h().mark((function e(r,n){var a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=N.from(t,"hex"),i=(0,b.personalSign)({privateKey:a,data:r.data}),e.abrupt("return",i);case 3:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),processTypedMessage:function(){var e=(0,n.Z)(h().mark((function e(r,n){var i,o,s,c,u,f,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.cM.debug("processTypedMessage",r),i=N.from(t,"hex"),o=a()){e.next=5;break}throw y.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return e.next=7,o.request({method:"eth_chainId"});case 7:return s=e.sent,c=Number.parseInt(s,(0,g.H2)(s)?16:10),u=ue(ue({},r),{},{version:b.SignTypedDataVersion.V1}),se(u,c),f="string"===typeof u.data?JSON.parse(u.data):u.data,p=(0,b.signTypedData)({privateKey:i,data:f,version:b.SignTypedDataVersion.V1}),e.abrupt("return",p);case 14:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),processTypedMessageV3:function(){var e=(0,n.Z)(h().mark((function e(r,n){var i,o,s,c,u,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.cM.debug("processTypedMessageV3",r),i=N.from(t,"hex"),o=a()){e.next=5;break}throw y.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return e.next=7,o.request({method:"eth_chainId"});case 7:return s=e.sent,c=Number.parseInt(s,(0,g.H2)(s)?16:10),se(r,c),u="string"===typeof r.data?JSON.parse(r.data):r.data,f=(0,b.signTypedData)({privateKey:i,data:u,version:b.SignTypedDataVersion.V3}),e.abrupt("return",f);case 13:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),processTypedMessageV4:function(){var e=(0,n.Z)(h().mark((function e(r,n){var i,o,s,c,u,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.cM.debug("processTypedMessageV4",r),i=N.from(t,"hex"),o=a()){e.next=5;break}throw y.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return e.next=7,o.request({method:"eth_chainId"});case 7:return s=e.sent,c=Number.parseInt(s,(0,g.H2)(s)?16:10),se(r,c),u="string"===typeof r.data?JSON.parse(r.data):r.data,f=(0,b.signTypedData)({privateKey:i,data:u,version:b.SignTypedDataVersion.V4}),e.abrupt("return",f);case 13:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),processEncryptionPublicKey:function(){var e=(0,n.Z)(h().mark((function e(r,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.cM.info("processEncryptionPublicKey",r),e.abrupt("return",(0,b.getEncryptionPublicKey)(t));case 2:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),processDecryptMessage:function(e,r){g.cM.info("processDecryptMessage",e);var n=(0,w.stripHexPrefix)(e.data),a=N.from(n,"hex");return(0,b.decrypt)({encryptedData:JSON.parse(a.toString("utf8")),privateKey:t})}}}function he(e){return(0,w.addHexPrefix)(e.toString(16))}function le(e){return w.BN.isBN(e)?e:new w.BN((0,w.stripHexPrefix)(e),16)}function ve(e,r,t){var n=new w.BN(r),a=new w.BN(t);return e.mul(n).div(a)}var ge="0x0",me="0x2",ye="sentEther",xe="contractInteraction",be="contractDeployment",we="fee-market",Pe="legacy",ke="eth_gasPrice";function Ee(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _e(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Ee(Object(t),!0).forEach((function(r){(0,p.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ee(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Oe=function(){function e(r){var t=r.getProviderEngineProxy;(0,a.Z)(this,e),(0,p.Z)(this,"chainConfig",null),(0,p.Z)(this,"getProviderEngineProxy",void 0),(0,p.Z)(this,"isEIP1559Compatible",!1),this.getProviderEngineProxy=t}return(0,i.Z)(e,[{key:"providerProxy",get:function(){return this.getProviderEngineProxy()}},{key:"init",value:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_provider_config",params:[]});case 2:return this.chainConfig=e.sent,e.next=5,this.getEIP1559Compatibility();case 5:this.isEIP1559Compatible=e.sent;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCommonConfiguration",value:function(){var e=(0,n.Z)(h().mark((function e(){var r,t,n,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw new Error("Chain config not initialized");case 2:return r=this.chainConfig,t=r.displayName,n=r.chainId,a=this.isEIP1559Compatible?T.Hardfork.London:T.Hardfork.Berlin,i={name:t,chainId:"loading"===n?0:Number.parseInt(n,16),networkId:"loading"===n?0:Number.parseInt(n,16),defaultHardfork:a},e.abrupt("return",A().custom(i));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"formatTransaction",value:function(){var e=(0,n.Z)(h().mark((function e(r){var t,n,a,i,o,s,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw new Error("Chain config not initialized");case 2:if(void 0!==(t=_e({},r)).nonce){e.next=7;break}return e.next=6,this.providerProxy.request({method:"eth_getTransactionCount",params:[r.from,"latest"]});case 6:t.nonce=e.sent;case 7:if(this.isEIP1559Compatible||!t.gasPrice){e.next=19;break}if(t.maxFeePerGas&&delete t.maxFeePerGas,t.maxPriorityFeePerGas&&delete t.maxPriorityFeePerGas,t.gas){e.next=17;break}return e.next=13,this.getDefaultGasLimit(t);case 13:(n=e.sent)&&(t.gasLimit=n),e.next=18;break;case 17:t.gasLimit=t.gas;case 18:return e.abrupt("return",t);case 19:if(t.gas){e.next=26;break}return e.next=22,this.getDefaultGasLimit(t);case 22:(a=e.sent)&&(t.gasLimit=a),e.next=27;break;case 26:t.gasLimit=t.gas;case 27:return e.next=29,this.getDefaultGasFees(t);case 29:return i=e.sent,o=i.gasPrice,s=i.maxFeePerGas,c=i.maxPriorityFeePerGas,this.isEIP1559Compatible?(!t.gasPrice||t.maxFeePerGas||t.maxPriorityFeePerGas?(s&&!t.maxFeePerGas&&(t.maxFeePerGas=s),c&&!t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=c),o&&!t.maxFeePerGas&&(t.maxFeePerGas=o),t.maxFeePerGas&&!t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=t.maxFeePerGas)):(t.maxFeePerGas=t.gasPrice,t.maxPriorityFeePerGas=(u="string"===typeof c?(0,w.stripHexPrefix)(c):c,f="string"===typeof t.gasPrice?(0,w.stripHexPrefix)(t.gasPrice):t.gasPrice,null!==u&&void 0!==u&&null!==f&&void 0!==f&&new S.O(u,10).lt(f,10)?c:t.gasPrice)),delete t.gasPrice):(delete t.maxPriorityFeePerGas,delete t.maxFeePerGas),!o||t.gasPrice||t.maxPriorityFeePerGas||t.maxFeePerGas||(t.gasPrice=o),t.type=this.isEIP1559Compatible?me:ge,t.chainId=this.chainConfig.chainId,e.abrupt("return",t);case 38:case"end":return e.stop()}var u,f}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"fetchEthGasPriceEstimate",value:function(){var e=(0,n.Z)(h().mark((function e(){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_gasPrice",params:[]});case 2:return r=e.sent,e.abrupt("return",{gasPrice:Q(r).toString()});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getEIP1559Compatibility",value:function(){var e=(0,n.Z)(h().mark((function e(){var r,t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]});case 2:return r=e.sent,t=r&&void 0!==r.baseFeePerGas,e.abrupt("return",!!t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchGasFeeEstimateData",value:function(){var e=(0,n.Z)(h().mark((function e(){var r,t,n,a,i,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw new Error("Chain config not initialized");case 2:if(r="0x1"===this.chainConfig.chainId,t=Number.parseInt(this.chainConfig.chainId,16),e.prev=4,!this.isEIP1559Compatible){e.next=12;break}return e.next=8,ne("https://gas-api.metaswap.codefi.network/networks/<chain_id>/suggestedGasFees".replace("<chain_id>","".concat(t)));case 8:a=e.sent,n={gasFeeEstimates:a,gasEstimateType:we},e.next=20;break;case 12:if(!r){e.next=19;break}return e.next=15,ie("https://gas-api.metaswap.codefi.network/networks/<chain_id>/gasPrices".replace("<chain_id>","".concat(t)));case 15:i=e.sent,n={gasFeeEstimates:i,gasEstimateType:Pe},e.next=20;break;case 19:throw new Error("Main gas fee/price estimation failed. Use fallback");case 20:e.next=34;break;case 22:return e.prev=22,e.t0=e.catch(4),e.prev=24,e.next=27,this.fetchEthGasPriceEstimate();case 27:o=e.sent,n={gasFeeEstimates:o,gasEstimateType:ke},e.next=34;break;case 31:throw e.prev=31,e.t1=e.catch(24),new Error("Gas fee/price estimation failed. Message: ".concat(e.t1.message));case 34:return e.abrupt("return",n);case 35:case"end":return e.stop()}}),e,this,[[4,22],[24,31]])})));return function(){return e.apply(this,arguments)}}()},{key:"getDefaultGasFees",value:function(){var e=(0,n.Z)(h().mark((function e(r){var t,n,a,i,o,s,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!this.isEIP1559Compatible&&r.gasPrice||this.isEIP1559Compatible&&r.maxFeePerGas&&r.maxPriorityFeePerGas)){e.next=2;break}return e.abrupt("return",{});case 2:return e.prev=2,e.next=5,this.fetchGasFeeEstimateData();case 5:if(t=e.sent,n=t.gasFeeEstimates,a=t.gasEstimateType,!this.isEIP1559Compatible||a!==we){e.next=16;break}if(i=n.medium,o=(i=void 0===i?{}:i).suggestedMaxPriorityFeePerGas,s=i.suggestedMaxFeePerGas,!o||!s){e.next=14;break}return e.abrupt("return",{maxFeePerGas:(0,w.addHexPrefix)($(s)),maxPriorityFeePerGas:(0,w.addHexPrefix)($(o))});case 14:e.next=22;break;case 16:if(a!==Pe){e.next=20;break}return e.abrupt("return",{gasPrice:(0,w.addHexPrefix)($(n.medium))});case 20:if(a!==ke){e.next=22;break}return e.abrupt("return",{gasPrice:(0,w.addHexPrefix)($(n.gasPrice))});case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),g.cM.error(e.t0);case 27:return e.next=29,this.fetchEthGasPriceEstimate();case 29:return c=e.sent,u=c.gasPrice,e.abrupt("return",{gasPrice:(0,w.addHexPrefix)($(u))});case 32:case"end":return e.stop()}}),e,this,[[2,24]])})));return function(r){return e.apply(this,arguments)}}()},{key:"estimateTxGas",value:function(){var e=(0,n.Z)(h().mark((function e(r){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(t=_e({},r)).gasPrice,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,e.next=6,this.providerProxy.request({method:"eth_estimateGas",params:[t]});case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"analyzeGasUsage",value:function(){var e=(0,n.Z)(h().mark((function e(r){var t,n,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]});case 2:return t=e.sent,n=le(t.gasLimit),a=ve(n,19,20),i=he(a),e.prev=6,e.next=9,this.estimateTxGas(r);case 9:i=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),g.cM.warn(e.t0);case 15:return e.abrupt("return",{blockGasLimit:t.gasLimit,estimatedGasHex:i});case 16:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(r){return e.apply(this,arguments)}}()},{key:"addGasBuffer",value:function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.5,n=le(e),a=le(r),i=a.muln(.9),o=n.muln(t);return n.gt(i)?he(n):o.lt(i)?he(o):he(i)}},{key:"determineTransactionCategory",value:function(){var e=(0,n.Z)(h().mark((function e(r){var t,n,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.data,n=r.to,a="",!t||n){e.next=6;break}i=be,e.next=17;break;case 6:return e.prev=6,e.next=9,this.providerProxy.request({method:"eth_getCode",params:[n,"latest"]});case 9:a=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),g.cM.warn(e.t0);case 15:i=!a||"0x"===a||"0x0"===a?ye:xe;case 17:return e.abrupt("return",{transactionCategory:i,code:a});case 18:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(r){return e.apply(this,arguments)}}()},{key:"getDefaultGasLimit",value:function(){var e=(0,n.Z)(h().mark((function e(r){var t,n,a,i,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.determineTransactionCategory(_e({},r));case 2:if(t=e.sent,n=t.transactionCategory,!r.gas){e.next=6;break}return e.abrupt("return",r.gas);case 6:if(!r.to||n!==ye){e.next=11;break}if(!r.data){e.next=9;break}throw Error("TxGasUtil - Trying to call a function on a non-contract address");case 9:return 21e3,e.abrupt("return",(0,w.addHexPrefix)(21e3.toString(16)));case 11:return e.next=13,this.analyzeGasUsage(r);case 13:return a=e.sent,i=a.blockGasLimit,o=a.estimatedGasHex,s=this.addGasBuffer((0,w.addHexPrefix)(o),i),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()}]),e}();function Se(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Te(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Se(Object(t),!0).forEach((function(r){(0,p.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Se(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function Ae(e){var r=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,f.Z)(e);if(r){var a=(0,f.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,u.Z)(this,t)}}var Ne=function(e){(0,c.Z)(t,e);var r=Ae(t);function t(e){var n=e.config,i=e.state;return(0,a.Z)(this,t),r.call(this,{config:{chainConfig:Te(Te({},n.chainConfig),{},{chainNamespace:g.EN.EIP155})},state:i})}return(0,i.Z)(t,[{key:"enable",value:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.privateKey){e.next=2;break}throw y.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});case 2:return e.next=4,this.setupProvider(this.state.privateKey);case 4:return e.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var e=(0,n.Z)(h().mark((function e(r){var t,n,a,i,o,s,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Oe({getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),n=de({txFormatter:t,privKey:r,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),a=M(n),i=this.getChainSwitchMiddleware(),o=new v.eI,s=F(this.config.chainConfig),c=s.networkMiddleware,o.push(a),o.push(i),o.push(this.getAccountMiddleware()),o.push(c),u=(0,l.Xj)(o),this.updateProviderEngineProxy(u),e.next=14,t.init();case 14:return e.next=16,this.lookupNetwork();case 16:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"updateAccount",value:function(){var e=(0,n.Z)(h().mark((function e(r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw y.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return e.next=4,this._providerEngineProxy.request({method:"eth_private_key"});case 4:if(e.sent===r.privateKey){e.next=14;break}return e.next=8,this.setupProvider(r.privateKey);case 8:return e.t0=this._providerEngineProxy,e.next=11,this._providerEngineProxy.request({method:"eth_accounts"});case 11:e.t1=e.sent,e.t2={accounts:e.t1},e.t0.emit.call(e.t0,"accountsChanged",e.t2);case 14:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=(0,n.Z)(h().mark((function e(r){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw y.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return t=this.getChainConfig(r.chainId),this.update({chainId:"loading"}),this.configure({chainConfig:t}),e.next=7,this._providerEngineProxy.request({method:"eth_private_key"});case 7:return n=e.sent,e.next=10,this.setupProvider(n);case 10:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var e=(0,n.Z)(h().mark((function e(){var r,t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw y.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:if(r=this.config.chainConfig.chainId){e.next=5;break}throw y.ethErrors.rpc.invalidParams("chainId is required while lookupNetwork");case 5:return e.next=7,this._providerEngineProxy.request({method:"net_version",params:[]});case 7:if(t=e.sent,parseInt(r,16)===parseInt(t,10)){e.next=10;break}throw y.ethErrors.provider.chainDisconnected("Invalid network, net_version is: ".concat(t));case 10:return this.state.chainId!==r&&(this._providerEngineProxy.emit("chainChanged",r),this._providerEngineProxy.emit("connect",{chainId:r})),this.update({chainId:r}),e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getChainSwitchMiddleware",value:function(){var e=this,r={addChain:function(){var r=(0,n.Z)(h().mark((function r(t){var n,a,i,o,s;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=t.chainId,a=t.chainName,i=t.rpcUrls,o=t.blockExplorerUrls,s=t.nativeCurrency,e.addChain({chainNamespace:"eip155",chainId:n,ticker:(null===s||void 0===s?void 0:s.symbol)||"ETH",tickerName:(null===s||void 0===s?void 0:s.name)||"Ether",displayName:a,rpcTarget:i[0],blockExplorer:(null===o||void 0===o?void 0:o[0])||""});case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),switchChain:function(){var r=(0,n.Z)(h().mark((function r(t){var n;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.chainId,r.next=3,e.switchChain({chainId:n});case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},t=function(e){var r=e.addChain,t=e.switchChain;function a(){return(a=(0,n.Z)(h().mark((function e(t,n){var a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!==(a=t.params)&&void 0!==a&&a.length?t.params[0]:void 0){e.next=3;break}throw y.ethErrors.rpc.invalidParams("Missing chain params");case 3:if(i.chainId){e.next=5;break}throw y.ethErrors.rpc.invalidParams("Missing chainId in chainParams");case 5:if(i.rpcUrls&&0!==i.rpcUrls.length){e.next=7;break}throw y.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");case 7:if(i.nativeCurrency){e.next=9;break}throw y.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");case 9:return e.next=11,r(i);case 11:n.result=e.sent;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=(0,n.Z)(h().mark((function e(r,n){var a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!==(a=r.params)&&void 0!==a&&a.length?r.params[0]:void 0){e.next=3;break}throw y.ethErrors.rpc.invalidParams("Missing chainId");case 3:return e.next=5,t(i);case 5:n.result=e.sent;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,v.v0)({wallet_addEthereumChain:(0,v.Pk)((function(e,r){return a.apply(this,arguments)})),wallet_switchEthereumChain:(0,v.Pk)((function(e,r){return i.apply(this,arguments)}))})}(r);return t}},{key:"getAccountMiddleware",value:function(){var e=this,r={updatePrivatekey:function(){var r=(0,n.Z)(h().mark((function r(t){var n;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.privateKey,r.next=3,e.updateAccount({privateKey:n});case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()};return function(e){var r=e.updatePrivatekey;function t(){return(t=(0,n.Z)(h().mark((function e(t,n){var a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(i=null!==(a=t.params)&&void 0!==a&&a.length?t.params[0]:void 0)&&void 0!==i&&i.privateKey){e.next=3;break}throw y.ethErrors.rpc.invalidParams("Missing privateKey");case 3:return e.next=5,r(i);case 5:n.result=e.sent;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,v.v0)({wallet_updateAccount:(0,v.Pk)((function(e,r){return t.apply(this,arguments)}))})}(r)}}]),t}(m.Zk);(0,p.Z)(Ne,"getProviderInstance",function(){var e=(0,n.Z)(h().mark((function e(r){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Ne({config:{chainConfig:r.chainConfig}}),e.next=3,t.setupProvider(r.privKey);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}())},46114:function(e,r,t){var n=t(48764).Buffer,a=this&&this.__read||function(e,r){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,a,i=t.call(e),o=[];try{for(;(void 0===r||r-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return o},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isZeroAddress=r.zeroAddress=r.importPublic=r.privateToAddress=r.privateToPublic=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isValidAddress=r.Account=void 0;var o=i(t(69282)),s=t(50523),c=t(95053),u=t(60571),f=t(16397),p=t(47107),d=t(91207),h=t(3323),l=t(89260),v=function(){function e(e,r,t,n){void 0===e&&(e=new s.BN(0)),void 0===r&&(r=new s.BN(0)),void 0===t&&(t=f.KECCAK256_RLP),void 0===n&&(n=f.KECCAK256_NULL),this.nonce=e,this.balance=r,this.stateRoot=t,this.codeHash=n,this._validate()}return e.fromAccountData=function(r){var t=r.nonce,n=r.balance,a=r.stateRoot,i=r.codeHash;return new e(t?new s.BN((0,p.toBuffer)(t)):void 0,n?new s.BN((0,p.toBuffer)(n)):void 0,a?(0,p.toBuffer)(a):void 0,i?(0,p.toBuffer)(i):void 0)},e.fromRlpSerializedAccount=function(e){var r=s.rlp.decode(e);if(!Array.isArray(r))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(r)},e.fromValuesArray=function(r){var t=a(r,4),n=t[0],i=t[1],o=t[2],c=t[3];return new e(new s.BN(n),new s.BN(i),o,c)},e.prototype._validate=function(){if(this.nonce.lt(new s.BN(0)))throw new Error("nonce must be greater than zero");if(this.balance.lt(new s.BN(0)))throw new Error("balance must be greater than zero");if(32!==this.stateRoot.length)throw new Error("stateRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")},e.prototype.raw=function(){return[(0,l.bnToUnpaddedBuffer)(this.nonce),(0,l.bnToUnpaddedBuffer)(this.balance),this.stateRoot,this.codeHash]},e.prototype.serialize=function(){return s.rlp.encode(this.raw())},e.prototype.isContract=function(){return!this.codeHash.equals(f.KECCAK256_NULL)},e.prototype.isEmpty=function(){return this.balance.isZero()&&this.nonce.isZero()&&this.codeHash.equals(f.KECCAK256_NULL)},e}();r.Account=v;r.isValidAddress=function(e){try{(0,h.assertIsString)(e)}catch(r){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};r.toChecksumAddress=function(e,r){(0,h.assertIsHexString)(e);var t=(0,u.stripHexPrefix)(e).toLowerCase(),n="";r&&(n=(0,l.toType)(r,l.TypeOutput.BN).toString()+"0x");for(var a=(0,d.keccakFromString)(n+t).toString("hex"),i="0x",o=0;o<t.length;o++)parseInt(a[o],16)>=8?i+=t[o].toUpperCase():i+=t[o];return i};r.isValidChecksumAddress=function(e,t){return(0,r.isValidAddress)(e)&&(0,r.toChecksumAddress)(e,t)===e};r.generateAddress=function(e,r){(0,h.assertIsBuffer)(e),(0,h.assertIsBuffer)(r);var t=new s.BN(r);return t.isZero()?(0,d.rlphash)([e,null]).slice(-20):(0,d.rlphash)([e,n.from(t.toArray())]).slice(-20)};r.generateAddress2=function(e,r,t){return(0,h.assertIsBuffer)(e),(0,h.assertIsBuffer)(r),(0,h.assertIsBuffer)(t),(0,o.default)(20===e.length),(0,o.default)(32===r.length),(0,d.keccak256)(n.concat([n.from("ff","hex"),e,r,(0,d.keccak256)(t)])).slice(-20)};r.isValidPrivate=function(e){return(0,c.privateKeyVerify)(e)};r.isValidPublic=function(e,r){return void 0===r&&(r=!1),(0,h.assertIsBuffer)(e),64===e.length?(0,c.publicKeyVerify)(n.concat([n.from([4]),e])):!!r&&(0,c.publicKeyVerify)(e)};r.pubToAddress=function(e,r){return void 0===r&&(r=!1),(0,h.assertIsBuffer)(e),r&&64!==e.length&&(e=n.from((0,c.publicKeyConvert)(e,!1).slice(1))),(0,o.default)(64===e.length),(0,d.keccak)(e).slice(-20)},r.publicToAddress=r.pubToAddress;r.privateToPublic=function(e){return(0,h.assertIsBuffer)(e),n.from((0,c.publicKeyCreate)(e,!1)).slice(1)};r.privateToAddress=function(e){return(0,r.publicToAddress)((0,r.privateToPublic)(e))};r.importPublic=function(e){return(0,h.assertIsBuffer)(e),64!==e.length&&(e=n.from((0,c.publicKeyConvert)(e,!1).slice(1))),e};r.zeroAddress=function(){var e=(0,p.zeros)(20);return(0,p.bufferToHex)(e)};r.isZeroAddress=function(e){try{(0,h.assertIsString)(e)}catch(t){return!1}return(0,r.zeroAddress)()===e}},75770:function(e,r,t){var n=t(48764).Buffer,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Address=void 0;var i=a(t(69282)),o=t(50523),s=t(47107),c=t(46114),u=function(){function e(e){(0,i.default)(20===e.length,"Invalid address length"),this.buf=e}return e.zero=function(){return new e((0,s.zeros)(20))},e.fromString=function(r){return(0,i.default)((0,c.isValidAddress)(r),"Invalid address"),new e((0,s.toBuffer)(r))},e.fromPublicKey=function(r){return(0,i.default)(n.isBuffer(r),"Public key should be Buffer"),new e((0,c.pubToAddress)(r))},e.fromPrivateKey=function(r){return(0,i.default)(n.isBuffer(r),"Private key should be Buffer"),new e((0,c.privateToAddress)(r))},e.generate=function(r,t){return(0,i.default)(o.BN.isBN(t)),new e((0,c.generateAddress)(r.buf,t.toArrayLike(n)))},e.generate2=function(r,t,a){return(0,i.default)(n.isBuffer(t)),(0,i.default)(n.isBuffer(a)),new e((0,c.generateAddress2)(r.buf,t,a))},e.prototype.equals=function(e){return this.buf.equals(e.buf)},e.prototype.isZero=function(){return this.equals(e.zero())},e.prototype.isPrecompileOrSystemAddress=function(){var e=new o.BN(this.buf),r=new o.BN(0),t=new o.BN("ffff","hex");return e.gte(r)&&e.lte(t)},e.prototype.toString=function(){return"0x"+this.buf.toString("hex")},e.prototype.toBuffer=function(){return n.from(this.buf)},e}();r.Address=u},47107:function(e,r,t){var n=t(48764).Buffer,a=this&&this.__values||function(e){var r="function"===typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,r){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,a,i=t.call(e),o=[];try{for(;(void 0===r||r-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return o};Object.defineProperty(r,"__esModule",{value:!0}),r.bufArrToArr=r.arrToBufArr=r.validateNoLeadingZeroes=r.baToJSON=r.toUtf8=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.bufferToHex=r.bufferToInt=r.toBuffer=r.unpadHexString=r.unpadArray=r.unpadBuffer=r.setLengthRight=r.setLengthLeft=r.zeros=r.intToBuffer=r.intToHex=void 0;var o=t(50523),s=t(60571),c=t(3323);r.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("Received an invalid integer type: ".concat(e));return"0x".concat(e.toString(16))};r.intToBuffer=function(e){var t=(0,r.intToHex)(e);return n.from((0,s.padToEven)(t.slice(2)),"hex")};r.zeros=function(e){return n.allocUnsafe(e).fill(0)};var u=function(e,t,n){var a=(0,r.zeros)(t);return n?e.length<t?(e.copy(a),a):e.slice(0,t):e.length<t?(e.copy(a,t-e.length),a):e.slice(-t)};r.setLengthLeft=function(e,r){return(0,c.assertIsBuffer)(e),u(e,r,!1)};r.setLengthRight=function(e,r){return(0,c.assertIsBuffer)(e),u(e,r,!0)};var f=function(e){for(var r=e[0];e.length>0&&"0"===r.toString();)r=(e=e.slice(1))[0];return e};r.unpadBuffer=function(e){return(0,c.assertIsBuffer)(e),f(e)};r.unpadArray=function(e){return(0,c.assertIsArray)(e),f(e)};r.unpadHexString=function(e){return(0,c.assertIsHexString)(e),e=(0,s.stripHexPrefix)(e),f(e)};r.toBuffer=function(e){if(null===e||void 0===e)return n.allocUnsafe(0);if(n.isBuffer(e))return n.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return n.from(e);if("string"===typeof e){if(!(0,s.isHexString)(e))throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ".concat(e));return n.from((0,s.padToEven)((0,s.stripHexPrefix)(e)),"hex")}if("number"===typeof e)return(0,r.intToBuffer)(e);if(o.BN.isBN(e)){if(e.isNeg())throw new Error("Cannot convert negative BN to buffer. Given: ".concat(e));return e.toArrayLike(n)}if(e.toArray)return n.from(e.toArray());if(e.toBuffer)return n.from(e.toBuffer());throw new Error("invalid type")};r.bufferToInt=function(e){return new o.BN((0,r.toBuffer)(e)).toNumber()};r.bufferToHex=function(e){return"0x"+(e=(0,r.toBuffer)(e)).toString("hex")};r.fromSigned=function(e){return new o.BN(e).fromTwos(256)};r.toUnsigned=function(e){return n.from(e.toTwos(256).toArray())};r.addHexPrefix=function(e){return"string"!==typeof e||(0,s.isHexPrefixed)(e)?e:"0x"+e};r.toUtf8=function(e){if((e=(0,s.stripHexPrefix)(e)).length%2!==0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return n.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};r.baToJSON=function(e){if(n.isBuffer(e))return"0x".concat(e.toString("hex"));if(e instanceof Array){for(var t=[],a=0;a<e.length;a++)t.push((0,r.baToJSON)(e[a]));return t}};r.validateNoLeadingZeroes=function(e){var r,t;try{for(var n=a(Object.entries(e)),o=n.next();!o.done;o=n.next()){var s=i(o.value,2),c=s[0],u=s[1];if(void 0!==u&&u.length>0&&0===u[0])throw new Error("".concat(c," cannot have leading zeroes, received: ").concat(u.toString("hex")))}}catch(f){r={error:f}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(r)throw r.error}}},r.arrToBufArr=function e(r){return Array.isArray(r)?r.map((function(r){return e(r)})):n.from(r)},r.bufArrToArr=function e(r){return Array.isArray(r)?r.map((function(r){return e(r)})):Uint8Array.from(null!==r&&void 0!==r?r:[])}},16397:function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0}),r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.MAX_INTEGER=r.MAX_UINT64=void 0;var n=t(48764),a=t(50523);r.MAX_UINT64=new a.BN("ffffffffffffffff",16),r.MAX_INTEGER=new a.BN("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),r.TWO_POW256=new a.BN("10000000000000000000000000000000000000000000000000000000000000000",16),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=n.Buffer.from(r.KECCAK256_NULL_S,"hex"),r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=n.Buffer.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=n.Buffer.from(r.KECCAK256_RLP_S,"hex")},50523:function(e,r,t){var n=this&&this.__createBinding||(Object.create?function(e,r,t,n){void 0===n&&(n=t);var a=Object.getOwnPropertyDescriptor(r,t);a&&!("get"in a?!r.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,a)}:function(e,r,t,n){void 0===n&&(n=t),e[n]=r[t]}),a=this&&this.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&n(r,e,t);return a(r,e),r},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.rlp=r.BN=void 0;var s=o(t(13550));r.BN=s.default;var c=i(t(51675));r.rlp=c},91207:function(e,r,t){var n=t(48764).Buffer;Object.defineProperty(r,"__esModule",{value:!0}),r.rlphash=r.ripemd160FromArray=r.ripemd160FromString=r.ripemd160=r.sha256FromArray=r.sha256FromString=r.sha256=r.keccakFromArray=r.keccakFromHexString=r.keccakFromString=r.keccak256=r.keccak=void 0;var a=t(82192),i=t(23482),o=t(50523),s=t(47107),c=t(3323);r.keccak=function(e,r){switch(void 0===r&&(r=256),(0,c.assertIsBuffer)(e),r){case 224:return(0,a.keccak224)(e);case 256:return(0,a.keccak256)(e);case 384:return(0,a.keccak384)(e);case 512:return(0,a.keccak512)(e);default:throw new Error("Invald algorithm: keccak".concat(r))}};r.keccak256=function(e){return(0,r.keccak)(e)};r.keccakFromString=function(e,t){void 0===t&&(t=256),(0,c.assertIsString)(e);var a=n.from(e,"utf8");return(0,r.keccak)(a,t)};r.keccakFromHexString=function(e,t){return void 0===t&&(t=256),(0,c.assertIsHexString)(e),(0,r.keccak)((0,s.toBuffer)(e),t)};r.keccakFromArray=function(e,t){return void 0===t&&(t=256),(0,c.assertIsArray)(e),(0,r.keccak)((0,s.toBuffer)(e),t)};var u=function(e){return e=(0,s.toBuffer)(e),i("sha256").update(e).digest()};r.sha256=function(e){return(0,c.assertIsBuffer)(e),u(e)};r.sha256FromString=function(e){return(0,c.assertIsString)(e),u(e)};r.sha256FromArray=function(e){return(0,c.assertIsArray)(e),u(e)};var f=function(e,r){e=(0,s.toBuffer)(e);var t=i("rmd160").update(e).digest();return!0===r?(0,s.setLengthLeft)(t,32):t};r.ripemd160=function(e,r){return(0,c.assertIsBuffer)(e),f(e,r)};r.ripemd160FromString=function(e,r){return(0,c.assertIsString)(e),f(e,r)};r.ripemd160FromArray=function(e,r){return(0,c.assertIsArray)(e),f(e,r)};r.rlphash=function(e){return(0,r.keccak)(o.rlp.encode(e))}},3323:function(e,r,t){var n=t(48764).Buffer;Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBuffer=r.assertIsHexString=void 0;var a=t(60571);r.assertIsHexString=function(e){if(!(0,a.isHexString)(e)){var r="This method only supports 0x-prefixed hex strings but input was: ".concat(e);throw new Error(r)}};r.assertIsBuffer=function(e){if(!n.isBuffer(e)){var r="This method only supports Buffer but input was: ".concat(e);throw new Error(r)}};r.assertIsArray=function(e){if(!Array.isArray(e)){var r="This method only supports number arrays but input was: ".concat(e);throw new Error(r)}};r.assertIsString=function(e){if("string"!==typeof e){var r="This method only supports strings but input was: ".concat(e);throw new Error(r)}}},53934:function(e,r,t){var n=this&&this.__createBinding||(Object.create?function(e,r,t,n){void 0===n&&(n=t);var a=Object.getOwnPropertyDescriptor(r,t);a&&!("get"in a?!r.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,a)}:function(e,r,t,n){void 0===n&&(n=t),e[n]=r[t]}),a=this&&this.__exportStar||function(e,r){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(r,t)||n(r,e,t)};Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0,a(t(16397),r),a(t(46114),r),a(t(75770),r),a(t(91207),r),a(t(3077),r),a(t(47107),r),a(t(9211),r),a(t(50523),r),a(t(89260),r);var i=t(60571);Object.defineProperty(r,"isHexPrefixed",{enumerable:!0,get:function(){return i.isHexPrefixed}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return i.stripHexPrefix}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return i.padToEven}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return i.getBinarySize}}),Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return i.arrayContainsArray}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return i.toAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return i.fromUtf8}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return i.fromAscii}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return i.getKeys}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return i.isHexString}})},60571:function(e,r,t){var n=t(48764).Buffer;function a(e){if("string"!==typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type ".concat(typeof e));return"0"===e[0]&&"x"===e[1]}Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0,r.isHexPrefixed=a;function i(e){var r=e;if("string"!==typeof r)throw new Error("[padToEven] value must be type 'string', received ".concat(typeof r));return r.length%2&&(r="0".concat(r)),r}r.stripHexPrefix=function(e){if("string"!==typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received ".concat(typeof e));return a(e)?e.slice(2):e},r.padToEven=i,r.getBinarySize=function(e){if("string"!==typeof e)throw new Error("[getBinarySize] method requires input type 'string', recieved ".concat(typeof e));return n.byteLength(e,"utf8")},r.arrayContainsArray=function(e,r,t){if(!0!==Array.isArray(e))throw new Error("[arrayContainsArray] method requires input 'superset' to be an array, got type '".concat(typeof e,"'"));if(!0!==Array.isArray(r))throw new Error("[arrayContainsArray] method requires input 'subset' to be an array, got type '".concat(typeof r,"'"));return r[t?"some":"every"]((function(r){return e.indexOf(r)>=0}))},r.toAscii=function(e){var r="",t=0,n=e.length;for("0x"===e.substring(0,2)&&(t=2);t<n;t+=2){var a=parseInt(e.substr(t,2),16);r+=String.fromCharCode(a)}return r},r.fromUtf8=function(e){var r=n.from(e,"utf8");return"0x".concat(i(r.toString("hex")).replace(/^0+|0+$/g,""))},r.fromAscii=function(e){for(var r="",t=0;t<e.length;t++){var n=e.charCodeAt(t).toString(16);r+=n.length<2?"0".concat(n):n}return"0x".concat(r)},r.getKeys=function(e,r,t){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got ".concat(typeof e));if("string"!==typeof r)throw new Error("[getKeys] method expects input 'key' to be type 'string', got ".concat(typeof e));for(var n=[],a=0;a<e.length;a++){var i=e[a][r];if(t&&!i)i="";else if("string"!==typeof i)throw new Error("invalid abi - expected type 'string', received ".concat(typeof i));n.push(i)}return n},r.isHexString=function(e,r){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!r||e.length===2+2*r)}},9211:function(e,r,t){var n=t(48764).Buffer,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.defineProperties=void 0;var i=a(t(69282)),o=t(60571),s=t(50523),c=t(47107);r.defineProperties=function(e,r,t){if(e.raw=[],e._fields=[],e.toJSON=function(r){if(void 0===r&&(r=!1),r){var t={};return e._fields.forEach((function(r){t[r]="0x".concat(e[r].toString("hex"))})),t}return(0,c.baToJSON)(e.raw)},e.serialize=function(){return s.rlp.encode(e.raw)},r.forEach((function(r,t){function a(){return e.raw[t]}function o(a){"00"!==(a=(0,c.toBuffer)(a)).toString("hex")||r.allowZero||(a=n.allocUnsafe(0)),r.allowLess&&r.length?(a=(0,c.unpadBuffer)(a),(0,i.default)(r.length>=a.length,"The field ".concat(r.name," must not have more ").concat(r.length," bytes"))):r.allowZero&&0===a.length||!r.length||(0,i.default)(r.length===a.length,"The field ".concat(r.name," must have byte length of ").concat(r.length)),e.raw[t]=a}e._fields.push(r.name),Object.defineProperty(e,r.name,{enumerable:!0,configurable:!0,get:a,set:o}),r.default&&(e[r.name]=r.default),r.alias&&Object.defineProperty(e,r.alias,{enumerable:!1,configurable:!0,set:o,get:a})})),t)if("string"===typeof t&&(t=n.from((0,o.stripHexPrefix)(t),"hex")),n.isBuffer(t)&&(t=s.rlp.decode(t)),Array.isArray(t)){if(t.length>e._fields.length)throw new Error("wrong number of fields in data");t.forEach((function(r,t){e[e._fields[t]]=(0,c.toBuffer)(r)}))}else{if("object"!==typeof t)throw new Error("invalid data");var a=Object.keys(t);r.forEach((function(r){-1!==a.indexOf(r.name)&&(e[r.name]=t[r.name]),-1!==a.indexOf(r.alias)&&(e[r.alias]=t[r.alias])}))}}},3077:function(e,r,t){var n=t(48764).Buffer;Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.ecsign=void 0;var a=t(95053),i=t(50523),o=t(47107),s=t(91207),c=t(3323),u=t(89260);function f(e,r){var t=(0,u.toType)(e,u.TypeOutput.BN);if(t.eqn(0)||t.eqn(1))return(0,u.toType)(e,u.TypeOutput.BN);if(!r)return t.subn(27);var n=(0,u.toType)(r,u.TypeOutput.BN);return t.sub(n.muln(2).addn(35))}function p(e){var r=new i.BN(e);return r.eqn(0)||r.eqn(1)}r.ecsign=function(e,r,t){var i=(0,a.ecdsaSign)(e,r),o=i.signature,s=i.recid,c=n.from(o.slice(0,32)),f=n.from(o.slice(32,64));if(!t||"number"===typeof t){if(t&&!Number.isSafeInteger(t))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");return{r:c,s:f,v:t?s+(2*t+35):s+27}}return{r:c,s:f,v:(0,u.toType)(t,u.TypeOutput.BN).muln(2).addn(35).addn(s).toArrayLike(n)}};r.ecrecover=function(e,r,t,i,s){var c=n.concat([(0,o.setLengthLeft)(t,32),(0,o.setLengthLeft)(i,32)],64),u=f(r,s);if(!p(u))throw new Error("Invalid signature v value");var d=(0,a.ecdsaRecover)(c,u.toNumber(),e);return n.from((0,a.publicKeyConvert)(d,!1).slice(1))};r.toRpcSig=function(e,r,t,a){if(!p(f(e,a)))throw new Error("Invalid signature v value");return(0,o.bufferToHex)(n.concat([(0,o.setLengthLeft)(r,32),(0,o.setLengthLeft)(t,32),(0,o.toBuffer)(e)]))};r.toCompactSig=function(e,r,t,a){if(!p(f(e,a)))throw new Error("Invalid signature v value");var i=(0,u.toType)(e,u.TypeOutput.Number),s=t;return(i>28&&i%2===1||1===i||28===i)&&((s=n.from(t))[0]|=128),(0,o.bufferToHex)(n.concat([(0,o.setLengthLeft)(r,32),(0,o.setLengthLeft)(s,32)]))};r.fromRpcSig=function(e){var r,t,n,a=(0,o.toBuffer)(e);if(a.length>=65)r=a.slice(0,32),t=a.slice(32,64),n=(0,o.bufferToInt)(a.slice(64));else{if(64!==a.length)throw new Error("Invalid signature length");r=a.slice(0,32),t=a.slice(32,64),n=(0,o.bufferToInt)(a.slice(32,33))>>7,t[0]&=127}return n<27&&(n+=27),{v:n,r:r,s:t}};r.isValidSignature=function(e,r,t,n,a){void 0===n&&(n=!0);var o=new i.BN("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),s=new i.BN("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(32!==r.length||32!==t.length)return!1;if(!p(f(e,a)))return!1;var c=new i.BN(r),u=new i.BN(t);return!(c.isZero()||c.gt(s)||u.isZero()||u.gt(s))&&(!n||1!==u.cmp(o))};r.hashPersonalMessage=function(e){(0,c.assertIsBuffer)(e);var r=n.from("\x19Ethereum Signed Message:\n".concat(e.length),"utf-8");return(0,s.keccak)(n.concat([r,e]))}},89260:function(e,r,t){var n=t(48764).Buffer;Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=r.bnToRlp=r.bnToUnpaddedBuffer=r.bnToHex=void 0;var a,i=t(50523),o=t(60571),s=t(47107);function c(e){return(0,s.unpadBuffer)(e.toArrayLike(n))}r.bnToHex=function(e){return"0x".concat(e.toString(16))},r.bnToUnpaddedBuffer=c,r.bnToRlp=function(e){return c(e)},function(e){e[e.Number=0]="Number",e[e.BN=1]="BN",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(a=r.TypeOutput||(r.TypeOutput={})),r.toType=function(e,r){if(null===e)return null;if(void 0!==e){if("string"===typeof e&&!(0,o.isHexString)(e))throw new Error("A string must be provided with a 0x-prefix, given: ".concat(e));if("number"===typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");var t=(0,s.toBuffer)(e);if(r===a.Buffer)return t;if(r===a.BN)return new i.BN(t);if(r===a.Number){var n=new i.BN(t),c=new i.BN(Number.MAX_SAFE_INTEGER.toString());if(n.gt(c))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return n.toNumber()}return"0x".concat(t.toString("hex"))}}}}]);