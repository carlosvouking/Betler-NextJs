"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[600],{96600:function(e,t,r){r.r(t),r.d(t,{WalletConnectV1Adapter:function(){return kt}});var n=r(15861),a=r(15671),i=r(43144),o=r(97326),s=r(73237),c=r(32531),u=r(82963),f=r(61120),p=r(4942),d=r(64687),h=r.n(d),l=r(71516),v=r(95844),g=r(13631),y=r(20917),m=r(96245),w=r(2043),x=r.n(w),b="eip155",k="solana",P="other",E="eip155",O=function(e,t){if(e===P)return null;var r=t?"number"===typeof t?t:parseInt(t,16):function(e){if(e===b)return 1;if(e===k)return 1;throw new Error("Chain namespace ".concat(e," is not supported"))}(e);return e===b?function(e){return 1===e?{chainNamespace:b,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:3===e?{chainNamespace:b,chainId:"0x3",rpcTarget:"https://rpc.ankr.com/eth_ropsten",displayName:"Ropsten Testnet",blockExplorer:"https://ropsten.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:4===e?{chainNamespace:b,chainId:"0x4",rpcTarget:"https://rpc.ankr.com/eth_rinkeby",displayName:"Rinkeby Testnet",blockExplorer:"https://rinkeby.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:5===e?{chainNamespace:b,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:137===e?{chainNamespace:b,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorer:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:80001===e?{chainNamespace:b,chainId:"0x13881",rpcTarget:"https://rpc.ankr.com/polygon_mumbai",displayName:"Polygon Mumbai Testnet",blockExplorer:"https://mumbai.polygonscan.com/",ticker:"MATIC",tickerName:"Polygon"}:56===e?{chainNamespace:b,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorer:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:97===e?{chainNamespace:b,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorer:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:25===e?{chainNamespace:b,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:338===e?{chainNamespace:b,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:8217===e?{chainNamespace:b,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorer:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn"}:null}(r):e===k?function(e){return 1===e?{chainNamespace:k,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorer:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana"}:2===e?{chainNamespace:k,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorer:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana"}:3===e?{chainNamespace:k,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorer:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana"}:null}(r):null};function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.Z)(e);if(t){var a=(0,f.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var N=function(e){(0,c.Z)(r,e);var t=C(r);function r(e,n){var i;return(0,a.Z)(this,r),i=t.call(this,n),(0,p.Z)((0,o.Z)(i),"code",void 0),(0,p.Z)((0,o.Z)(i),"message",void 0),i.code=e,i.message=n||"",Object.defineProperty((0,o.Z)(i),"name",{value:"Web3AuthError"}),i}return(0,i.Z)(r,[{key:"toJSON",value:function(){return{name:this.name,code:this.code,message:this.message}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),r}(g.s),_=function(e){(0,c.Z)(r,e);var t=C(r);function r(e,n){var i;return(0,a.Z)(this,r),i=t.call(this,e,n),Object.defineProperty((0,o.Z)(i),"name",{value:"WalletInitializationError"}),i}return(0,i.Z)(r,null,[{key:"fromCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new r(e,"".concat(r.messages[e],", ").concat(t))}},{key:"notFound",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5001,e)}},{key:"notInstalled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5002,e)}},{key:"notReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5003,e)}},{key:"windowBlocked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5004,e)}},{key:"windowClosed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5005,e)}},{key:"incompatibleChainNameSpace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5006,e)}},{key:"duplicateAdapterError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5007,e)}},{key:"invalidProviderConfigError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5008,e)}},{key:"providerNotReadyError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5009,e)}},{key:"rpcConnectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5010,e)}},{key:"invalidParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5011,e)}},{key:"invalidNetwork",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5013,e)}}]),r}(N);(0,p.Z)(_,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});var T=function(e){(0,c.Z)(r,e);var t=C(r);function r(e,n){var i;return(0,a.Z)(this,r),i=t.call(this,e,n),Object.defineProperty((0,o.Z)(i),"name",{value:"WalletLoginError"}),i}return(0,i.Z)(r,null,[{key:"fromCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new r(e,"".concat(r.messages[e]).concat(t))}},{key:"connectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5111,e)}},{key:"disconnectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5112,e)}},{key:"notConnectedError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5113,e)}},{key:"popupClosed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5114,e)}}]),r}(N);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(0,p.Z)(T,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user"});var A={OPENLOGIN:"openlogin",WALLET_CONNECT_V1:"wallet-connect-v1",WALLET_CONNECT_V2:"wallet-connect-v2"},I=Z({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLLET:"sollet",SOLLET_EXTENSION:"sollet-extension",SOLFLARE:"solflare",SLOPE:"slope"},A),B=Z({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},A),j=Z(Z({},B),I);function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.Z)(e);if(t){var a=(0,f.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var L="external",F={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},G=M(M({},F),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated"}),H=function(e){(0,c.Z)(r,e);var t=R(r);function r(){var e;(0,a.Z)(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,p.Z)((0,o.Z)(e),"adapterData",{}),(0,p.Z)((0,o.Z)(e),"sessionTime",86400),(0,p.Z)((0,o.Z)(e),"chainConfig",null),e}return(0,i.Z)(r,[{key:"chainConfigProxy",get:function(){return this.chainConfig?M({},this.chainConfig):null}},{key:"setChainConfig",value:function(e){if(this.status!==F.READY){if(!e.chainNamespace)throw _.notReady("ChainNamespace is required while setting chainConfig");var t=O(e.chainNamespace,e.chainId);this.chainConfig=M(M({},t),e)}}},{key:"setAdapterSettings",value:function(e){}},{key:"checkConnectionRequirements",value:function(){if(this.name!==j.WALLET_CONNECT_V1||this.status!==F.CONNECTING){if(this.status===F.CONNECTING)throw _.notReady("Already connecting");if(this.status===F.CONNECTED)throw T.connectionError("Already connected");if(this.status!==F.READY)throw T.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function");if(!this.clientId)throw T.connectionError("Please initialize Web3Auth with a valid clientId in constructor")}}},{key:"checkInitializationRequirements",value:function(){if(this.status!==F.NOT_READY){if(this.status===F.CONNECTED)throw _.notReady("Already connected");if(this.status===F.READY)throw _.notReady("Adapter is already initialized")}}},{key:"updateAdapterData",value:function(e){this.adapterData=e,this.emit(G.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}}]),r}(v.Ue),K="https://authjs.web3auth.io",U=x().getLogger("web3auth-logger");function V(e){var t,r=!1,n=0;try{t=window[e],r=!0,n=t.length;var a="__storage_test__";return t.setItem(a,a),t.removeItem(a),!0}catch(o){var i=o;return!(!i||22!==i.code&&1014!==i.code&&"QuotaExceededError"!==i.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==i.name||!r||0===n)}}var q=function(e){return("string"===typeof e||"number"===typeof e)&&/^(-)?0x[0-9a-f]*$/i.test(e)},W=function(e){var t=(0,m.Z)(e);return!t.exp||t.exp<Math.floor(Date.now()/1e3)},z=function(){var e=(0,n.Z)(h().mark((function e(t,r){var n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={payload:t,header:{t:"solana"===r?"sip99":"eip191"},network:"solana"===r?"solana":"ethereum"},e.next=6,(0,y.v_)("".concat(K,"/siww/get"),n);case 6:if((a=e.sent).success){e.next=9;break}throw new Error("Failed to authenticate user, Please reach out to Web3Auth Support team");case 9:return e.abrupt("return",a.challenge);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Y=function(){var e=(0,n.Z)(h().mark((function e(t,r,n,a,i,o){var s,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={signature:{s:r,t:"solana"===t?"sip99":"eip191"},message:n,issuer:a,audience:window.location.hostname,timeout:i},e.next=4,(0,y.v_)("".concat(K,"/siww/verify"),s,{headers:{client_id:o,wallet_provider:a}});case 4:if((c=e.sent).success){e.next=8;break}throw U.error("Failed to authenticate user, ,message verification failed",c.error),new Error("Failed to authenticate user, ,message verification failed");case 8:return e.abrupt("return",c.token);case 9:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,o){return e.apply(this,arguments)}}(),J=function(e,t,r){return V("localStorage")?localStorage.setItem("".concat(e.toLowerCase(),"_").concat(t),r):null};function X(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.Z)(e);if(t){var a=(0,f.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var $=function(e){(0,c.Z)(r,e);var t=X(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.Z)(this,r),e=t.call(this),(0,p.Z)((0,o.Z)(e),"clientId",void 0),e.clientId=n.clientId,e}return(0,i.Z)(r,[{key:"authenticateUser",value:function(){var e=(0,n.Z)(h().mark((function e(){var t,r,n,a,i,o,s,c,u,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.provider&&null!==(t=this.chainConfig)&&void 0!==t&&t.chainId){e.next=2;break}throw T.notConnectedError();case 2:if(r=this.chainConfig,n=r.chainNamespace,a=r.chainId,this.status===F.CONNECTED){e.next=5;break}throw T.notConnectedError("Not connected with wallet, Please login/connect first");case 5:return e.next=7,this.provider.request({method:"eth_accounts"});case 7:if(!((i=e.sent)&&i.length>0)){e.next=26;break}if(p=i[0],d=this.name,!(o=V("localStorage")?localStorage.getItem("".concat(p.toLowerCase(),"_").concat(d)):null)){e.next=14;break}if(W(o)){e.next=14;break}return e.abrupt("return",{idToken:o});case 14:return s={domain:window.location.origin,uri:window.location.href,address:i[0],chainId:parseInt(a,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:(new Date).toISOString()},e.next=17,z(s,n);case 17:return c=e.sent,e.next=20,this.provider.request({method:"personal_sign",params:[c,i[0]]});case 20:return u=e.sent,e.next=23,Y(n,u,c,this.name,this.sessionTime,this.clientId);case 23:return f=e.sent,J(i[0],this.name,f),e.abrupt("return",{idToken:f});case 26:throw T.notConnectedError("Not connected with wallet, Please login/connect first");case 27:case"end":return e.stop()}var p,d}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,n.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===F.CONNECTED){e.next=2;break}throw T.disconnectionError("Not connected with wallet");case 2:return e.next=4,this.provider.request({method:"eth_accounts"});case 4:(t=e.sent)&&t.length>0&&(r=t[0],n=this.name,V("localStorage")&&localStorage.removeItem("".concat(r.toLowerCase(),"_").concat(n)));case 6:case"end":return e.stop()}var r,n}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(H),Q=r(22782),ee=r(79826),te=r(23420),re=r.n(te);function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.Z)(e);if(t){var a=(0,f.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var oe=function(e){(0,c.Z)(r,e);var t=ie(r);function r(e){var n,i,c=e.config,u=e.state;if((0,a.Z)(this,r),i=t.call(this,{config:c,state:u}),(0,p.Z)((0,o.Z)(i),"_providerEngineProxy",null),!c.chainConfig)throw _.invalidProviderConfigError("Please provide chainConfig");if(!c.chainConfig.chainId)throw _.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!c.chainConfig.rpcTarget)throw _.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");return i.defaultState={chainId:"loading"},i.defaultConfig={chainConfig:c.chainConfig,networks:(0,p.Z)({},c.chainConfig.chainId,c.chainConfig)},(0,s.Z)((n=(0,o.Z)(i),(0,f.Z)(r.prototype)),"initialize",n).call(n),i}return(0,i.Z)(r,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(e){throw new Error("Method not implemented.")}},{key:"addChain",value:function(e){if(!e.chainId)throw ee.ethErrors.rpc.invalidParams("chainId is required");if(!e.rpcTarget)throw ee.ethErrors.rpc.invalidParams("chainId is required");this.configure({networks:ae(ae({},this.config.networks),{},(0,p.Z)({},e.chainId,e))})}},{key:"getChainConfig",value:function(e){var t,r=null===(t=this.config.networks)||void 0===t?void 0:t[e];if(!r)throw ee.ethErrors.rpc.invalidRequest("Chain ".concat(e," is not supported, please add chainConfig for it"));return r}},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=(0,Q.qY)(e)}}]),r}(Q.xG),se=function(){function e(){(0,a.Z)(this,e),(0,p.Z)(this,"_providerEngineProxy",null)}return(0,i.Z)(e,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(e){throw new Error("Method not implemented.")}},{key:"addChain",value:function(e){throw new Error("Method not implemented.")}},{key:"setupProvider",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.getPrivKeyMiddleware(t),(n=new v.eI).push(r),a=(0,Q.Xj)(n),this.updateProviderEngineProxy(a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=(0,Q.qY)(e)}},{key:"getPrivKeyMiddleware",value:function(e){var t={getPrivatekey:function(){var t=(0,n.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()};return this.createPrivKeyMiddleware(t)}},{key:"createPrivKeyMiddleware",value:function(e){var t=e.getPrivatekey;function r(){return(r=(0,n.Z)(h().mark((function e(r,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:n.result=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,v.v0)({private_key:(0,v.Pk)((function(e,t){return r.apply(this,arguments)}))})}}]),e}();(0,p.Z)(se,"getProviderInstance",function(){var e=(0,n.Z)(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new se,e.next=3,r.setupProvider(t.privKey);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());re()();var ce=r(66052),ue=r(51091),fe=r(62671),pe=r(71002),de=r(69282),he=r.n(de),le=r(40660),ve=r(70794),ge=r(2832),ye=r.n(ge),me=r(48764).Buffer;function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function be(e){return 42===e.length}function ke(e){var t=e.getAccounts,r=e.getPrivateKey,a=e.processDecryptMessage,i=e.processEncryptionPublicKey,o=e.processEthSignMessage,s=e.processPersonalMessage,c=e.processTransaction,u=e.processSignTransaction,f=e.processTypedMessage,p=e.processTypedMessageV3,d=e.processTypedMessageV4;if(!t)throw new Error("opts.getAccounts is required");function l(e,t){return g.apply(this,arguments)}function g(){return(g=(0,n.Z)(h().mark((function e(r,n){var a,i,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("string"===typeof r&&r.length>0)){e.next=8;break}return e.next=3,t(n);case 3:if(a=e.sent,i=a.map((function(e){return e.toLowerCase()})),o=r.toLowerCase(),!i.includes(o)){e.next=8;break}return e.abrupt("return",o);case 8:throw ee.ethErrors.rpc.invalidParams({message:"Invalid parameters: must provide an Ethereum address."});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=(0,n.Z)(h().mark((function e(r,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(r);case 2:n.result=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=(0,n.Z)(h().mark((function e(r,n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(r);case 2:a=e.sent,n.result=a[0]||null;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=(0,n.Z)(h().mark((function e(t,r){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}throw ee.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0]||{from:""},e.next=5,l(n.from,t);case 5:return n.from=e.sent,e.next=8,c(n,t);case 8:r.result=e.sent;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=(0,n.Z)(h().mark((function e(t,r){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}throw ee.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0]||{from:""},e.next=5,l(n.from,t);case 5:return n.from=e.sent,e.next=8,u(n,t);case 8:r.result=e.sent;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=(0,n.Z)(h().mark((function e(t,r){var n,a,i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}throw ee.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,l(t.params[0],t);case 4:return n=e.sent,a=t.params[1],i=t.params[2]||{},s=xe(xe({},i),{},{from:n,data:a}),e.next=10,o(s,t);case 10:r.result=e.sent;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=(0,n.Z)(h().mark((function e(t,r){var n,a,i,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}throw ee.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0],e.next=5,l(t.params[1],t);case 5:return a=e.sent,"V1",i=t.params[2]||{},o=xe(xe({},i),{},{from:a,data:n}),e.next=11,f(o,t,"V1");case 11:r.result=e.sent;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=(0,n.Z)(h().mark((function e(t,r){var n,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}throw ee.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,l(t.params[0],t);case 4:return n=e.sent,a=t.params[1],"V3",i={data:a,from:n,version:"V3"},e.next=10,p(i,t,"V3");case 10:r.result=e.sent;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=(0,n.Z)(h().mark((function e(t,r){var n,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}throw ee.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,l(t.params[0],t);case 4:return n=e.sent,a=t.params[1],"V4",i={data:a,from:n,version:"V4"},e.next=10,d(i,t,"V4");case 10:r.result=e.sent;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=(0,n.Z)(h().mark((function e(t,r){var n,a,i,o,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}throw ee.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0],a=t.params[1],i=t.params[2]||{},be(n)&&!be(a)?("The eth_personalSign method requires params ordered ","[message, address]. This was previously handled incorrectly, ","and has been corrected automatically. ","Please switch this param order for smooth behavior in the future.",r.warning="The eth_personalSign method requires params ordered [message, address]. This was previously handled incorrectly, and has been corrected automatically. Please switch this param order for smooth behavior in the future.",o=n,c=a):(c=n,o=a),e.next=8,l(o,t);case 8:return o=e.sent,u=xe(xe({},i),{},{from:o,data:c}),e.next=12,s(u,t);case 12:r.result=e.sent;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=(0,n.Z)(h().mark((function e(t,r){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}throw ee.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,l(t.params[0],t);case 4:return n=e.sent,e.next=7,i(n,t);case 7:r.result=e.sent;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=(0,n.Z)(h().mark((function e(t,r){var n,i,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}throw ee.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0],e.next=5,l(t.params[1],t);case 5:i=e.sent,o=t.params[2]||{},s=xe(xe({},o),{},{from:i,data:n}),r.result=a(s,t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=(0,n.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw ee.ethErrors.rpc.methodNotSupported();case 2:n.result=r(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,v.v0)({eth_accounts:(0,v.Pk)((function(e,t){return y.apply(this,arguments)})),eth_private_key:(0,v.Pk)((function(e,t){return _.apply(this,arguments)})),eth_coinbase:(0,v.Pk)((function(e,t){return m.apply(this,arguments)})),eth_sendTransaction:(0,v.Pk)((function(e,t){return w.apply(this,arguments)})),eth_signTransaction:(0,v.Pk)((function(e,t){return x.apply(this,arguments)})),eth_sign:(0,v.Pk)((function(e,t){return b.apply(this,arguments)})),eth_signTypedData:(0,v.Pk)((function(e,t){return k.apply(this,arguments)})),eth_signTypedData_v3:(0,v.Pk)((function(e,t){return P.apply(this,arguments)})),eth_signTypedData_v4:(0,v.Pk)((function(e,t){return E.apply(this,arguments)})),personal_sign:(0,v.Pk)((function(e,t){return O.apply(this,arguments)})),eth_getEncryptionPublicKey:(0,v.Pk)((function(e,t){return C.apply(this,arguments)})),eth_decrypt:(0,v.Pk)((function(e,t){return N.apply(this,arguments)}))})}function Pe(e){var t=e.getAccounts,r=e.getPrivateKey,n=e.processTransaction,a=e.processSignTransaction,i=e.processEthSignMessage,o=e.processTypedMessage,s=e.processTypedMessageV3,c=e.processTypedMessageV4,u=e.processPersonalMessage,f=e.processEncryptionPublicKey,p=e.processDecryptMessage;return(0,v.UZ)([(0,v.v0)({eth_syncing:!1}),ke({getAccounts:t,getPrivateKey:r,processTransaction:n,processEthSignMessage:i,processSignTransaction:a,processTypedMessage:o,processTypedMessageV3:s,processTypedMessageV4:c,processPersonalMessage:u,processEncryptionPublicKey:f,processDecryptMessage:p})])}function Ee(e){return function(t,r,n,a){return"eth_chainId"===t.method?(r.result=e,a()):n()}}function Oe(e){return function(t,r,n,a){return"eth_provider_config"===t.method?(r.result=e,a()):n()}}function Ce(e){var t=e.chainId,r=e.rpcTarget,n=(0,Q.v$)({rpcTarget:r});return{networkMiddleware:(0,v.UZ)([Ee(t),Oe(e),n]),fetchMiddleware:n}}function Ne(e){var t=e.connector;return{getPrivateKey:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw ee.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAccounts:function(){var e=(0,n.Z)(h().mark((function e(r){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.accounts)||!n.length){e.next=3;break}return e.abrupt("return",n);case 3:throw new Error("Failed to get accounts");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processTransaction:function(){var e=(0,n.Z)(h().mark((function e(r,n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.sendTransaction(r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processSignTransaction:function(){var e=(0,n.Z)(h().mark((function e(r,n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signTransaction(r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processEthSignMessage:function(){var e=(0,n.Z)(h().mark((function e(r,n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signMessage([r.from,r.data]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processPersonalMessage:function(){var e=(0,n.Z)(h().mark((function e(r,n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signPersonalMessage([r.data,r.from]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processTypedMessage:function(){var e=(0,n.Z)(h().mark((function e(r,n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signTypedData([r.from,r.data]);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processTypedMessageV3:function(){var e=(0,n.Z)(h().mark((function e(r){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signTypedData([r.from,r.data]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processTypedMessageV4:function(){var e=(0,n.Z)(h().mark((function e(r){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signTypedData([r.from,r.data]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processEncryptionPublicKey:function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw ee.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processDecryptMessage:function(e){throw ee.ethErrors.rpc.methodNotSupported()}}}function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Se(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.Z)(e);if(t){var a=(0,f.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var Ze=function(e){(0,c.Z)(r,e);var t=Se(r);function r(e){var n,i=e.config,s=e.state,c=e.connector;return(0,a.Z)(this,r),n=t.call(this,{config:{chainConfig:Te(Te({},i.chainConfig),{},{chainNamespace:b}),skipLookupNetwork:!!i.skipLookupNetwork},state:Te(Te({},s||{}),{},{chainId:"loading",accounts:[]})}),(0,p.Z)((0,o.Z)(n),"connector",null),n.connector=c||null,n}return(0,i.Z)(r,[{key:"enable",value:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connector){e.next=2;break}throw ee.ethErrors.provider.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});case 2:return e.next=4,this.setupProvider(this.connector);case 4:return e.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.onConnectorStateUpdate(t),e.next=3,this.setupEngine(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n,a,i,o,s,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.chainId,n=t.addChain,a=void 0===n||n,i=t.lookup,o=void 0===i||i,this.connector){e.next=3;break}throw ee.ethErrors.provider.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});case 3:if(s=this.getChainConfig(r),this.update({chainId:"loading"}),c=s.rpcTarget,u=s.displayName,!a){e.next=15;break}return e.prev=7,e.next=10,this.connector.sendCustomRequest({method:"wallet_addEthereumChain",params:[{chainId:r,chainName:u,rpcUrls:[c]}]});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),U.error(e.t0);case 15:return e.prev=15,e.next=18,this.connector.sendCustomRequest({method:"wallet_switchEthereumChain",params:[{chainId:r}]});case 18:e.next=25;break;case 20:if(e.prev=20,e.t1=e.catch(15),U.error(e.t1),"JSON RPC response format is invalid"===e.t1.message){e.next=25;break}throw e.t1;case 25:if(this.configure({chainConfig:s}),!o){e.next=29;break}return e.next=29,this.lookupNetwork(this.connector);case 29:case"end":return e.stop()}}),e,this,[[7,12],[15,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addChain",value:function(){var e=(0,n.Z)(h().mark((function e(t){var n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connector){e.next=2;break}throw _.notReady("Wallet adapter is not ready yet");case 2:return n=t.rpcTarget,a=t.displayName,e.prev=3,e.next=6,this.connector.sendCustomRequest({method:"wallet_addEthereumChain",params:[{chainId:t.chainId,chainName:a,rpcUrls:[n]}]});case 6:(0,s.Z)((0,f.Z)(r.prototype),"addChain",this).call(this,t),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(3),U.error(e.t0),e.t0;case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.connected){e.next=2;break}throw T.notConnectedError("Wallet connect connector is not connected");case 2:if(this.provider){e.next=4;break}throw ee.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 4:if(r=this.config.chainConfig.chainId,n=q(t.chainId.toString())?t.chainId:"0x".concat(t.chainId.toString(16)),r===n){e.next=8;break}throw _.rpcConnectionError("Invalid network, net_version is: ".concat(n,", expected: ").concat(r));case 8:return this.provider.emit("connect",{chainId:r}),this.provider.emit("chainChanged",this.state.chainId),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupEngine",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n,a,i,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ne({connector:t}),this.update({accounts:t.accounts||[]}),n=Pe(r),a=new v.eI,i=Ce(this.config.chainConfig),o=i.networkMiddleware,a.push(n),a.push(o),s=(0,Q.Xj)(a),this.updateProviderEngineProxy(s),this.config.skipLookupNetwork){e.next=12;break}return e.next=12,this.lookupNetwork(t);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onConnectorStateUpdate",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.on("session_update",function(){var e=(0,n.Z)(h().mark((function e(n,a){var i,o,s,c,u,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.provider){e.next=2;break}throw T.notConnectedError("Wallet connect connector is not connected");case 2:if(!n){e.next=5;break}return r.provider.emit("error",n),e.abrupt("return");case 5:if(i=a.params[0],o=i.accounts,s=i.chainId,c=i.rpcUrl,null!==o&&void 0!==o&&o.length&&r.state.accounts[0]!==o[0]&&(r.update({accounts:o}),r.provider.emit("accountsChanged",o)),u="0x".concat(s.toString(16)),!s||r.state.chainId===u){e.next=13;break}return f=O(b,s)||{},r.configure({chainConfig:Te(Te({},f),{},{chainId:u,rpcTarget:c,chainNamespace:b})}),e.next=13,r.setupEngine(t);case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(oe);(0,p.Z)(Ze,"getProviderInstance",function(){var e=(0,n.Z)(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Ze({config:{chainConfig:t.chainConfig,skipLookupNetwork:t.skipLookupNetwork}}),e.next=3,r.setupProvider(t.connector);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var Ae=new ve.Z("1e18"),Ie=new ve.Z("1e9"),Be=new ve.Z("1"),je={hex:function(e){return"string"===typeof e?new ve.Z((0,fe.stripHexPrefix)(e),16):new ve.Z(e,16)},dec:function(e){return new ve.Z(e,10)}},Re={WEI:function(e){return e.div(Ae)},GWEI:function(e){return e.div(Ie)},ETH:function(e){return e.div(Be)}},De={WEI:function(e){return e.times(Ae).dp(0,ve.Z.ROUND_HALF_UP)},GWEI:function(e){return e.times(Ie).dp(9,ve.Z.ROUND_HALF_UP)},ETH:function(e){return e.times(Be).dp(9,ve.Z.ROUND_HALF_UP)}},Me={hex:function(e){return e.toString(16)},dec:function(e){return new ve.Z(e).toString(10)}},Le=function(e,t){var r=t.fromNumericBase;return function(e){var t=e.value,r=e.fromNumericBase,n=e.fromDenomination,a=e.toNumericBase,i=e.toDenomination,o=e.numberOfDecimals,s=je[r](t);return n&&(s=Re[n](s)),i&&(s=De[i](s)),o&&(s=s.dp(o,ve.Z.ROUND_HALF_DOWN)),a&&(s=Me[a](s)),s}({fromNumericBase:void 0===r?"hex":r,toNumericBase:t.toNumericBase,fromDenomination:t.fromDenomination,toDenomination:t.toDenomination,numberOfDecimals:t.numberOfDecimals,value:e||"0"})};function Fe(e){return Le(e,{fromNumericBase:"dec",toNumericBase:"hex",fromDenomination:"GWEI",toDenomination:"WEI"})}function Ge(e){return Le(e,{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"WEI",toDenomination:"GWEI"})}function He(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ue(e){return Ge(Fe(e))}function Ve(e){return qe.apply(this,arguments)}function qe(){return(qe=(0,n.Z)(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.U2)(t);case 2:return r=e.sent,n=Ke(Ke({},r),{},{estimatedBaseFee:Ue(r.estimatedBaseFee),low:Ke(Ke({},r.low),{},{suggestedMaxPriorityFeePerGas:Ue(r.low.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:Ue(r.low.suggestedMaxFeePerGas)}),medium:Ke(Ke({},r.medium),{},{suggestedMaxPriorityFeePerGas:Ue(r.medium.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:Ue(r.medium.suggestedMaxFeePerGas)}),high:Ke(Ke({},r.high),{},{suggestedMaxPriorityFeePerGas:Ue(r.high.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:Ue(r.high.suggestedMaxFeePerGas)})}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e){return ze.apply(this,arguments)}function ze(){return(ze=(0,n.Z)(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.U2)(t,{referrer:t,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors"});case 2:return r=e.sent,e.abrupt("return",{low:r.SafeGasPrice,medium:r.ProposeGasPrice,high:r.FastGasPrice});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ye=function(e,t){var r;try{he().ok(e&&"object"===(0,pe.Z)(e),"Params must be an object."),he().ok("data"in e,'Params must include a "data" field.'),he().ok("from"in e,'Params must include a "from" field.'),he().ok("string"===typeof e.from&&(0,fe.isValidAddress)(e.from),'"from" field must be a valid, lowercase, hexadecimal Ethereum address string.');var n=null,a=null;switch(e.version){case ue.SignTypedDataVersion.V1:"string"===typeof e.data?he().doesNotThrow((function(){n=JSON.parse(e.data)}),'"data" must be a valid JSON string.'):n=e.data,he().ok(Array.isArray(n),"params.data must be an array."),he().doesNotThrow((function(){(0,ue.typedSignatureHash)(n)}),"Signing data must be valid EIP-712 typed data.");break;case ue.SignTypedDataVersion.V3:case ue.SignTypedDataVersion.V4:"string"===typeof e.data?he().doesNotThrow((function(){n=JSON.parse(e.data)}),'"data" must be a valid JSON string.'):n=e.data,he().ok(n.primaryType in n.types,'Primary type of "'.concat(n.primaryType,'" has no type definition.'));var i=le.validate(n,ue.TYPED_MESSAGE_SCHEMA.properties);he().strictEqual(i.errors.length,0,"Signing data must conform to EIP-712 schema. See https://git.io/fNtcx."),(a=null===(r=n.domain)||void 0===r?void 0:r.chainId)&&(he().ok(!Number.isNaN(t),'Cannot sign messages for chainId "'.concat(a,'", because Web3Auth is switching networks.')),"string"===typeof a&&(a=Number.parseInt(a,q(a)?16:10)),he().strictEqual(a,t,'Provided chainId "'.concat(a,'" must match the active chainId "').concat(t,'"')));break;default:he().fail('Unknown typed data version "'.concat(e.version,'"'))}}catch(o){throw ee.ethErrors.rpc.invalidInput({message:null===o||void 0===o?void 0:o.message})}};function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $e(e,t,r){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,n.Z)(h().mark((function e(t,r,n){var a,i,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.formatTransaction(t);case 2:return a=e.sent,e.next=5,n.getCommonConfiguration();case 5:return i=e.sent,o=ce.TransactionFactory.fromTxData(a,{common:i}),s=o.sign(me.from(r,"hex")).serialize(),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e){var t=e.txFormatter,r=e.privKey,a=e.getProviderEngineProxy;return{getAccounts:function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["0x".concat((0,fe.privateToAddress)(me.from(r,"hex")).toString("hex"))]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getPrivateKey:function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processTransaction:function(){var e=(0,n.Z)(h().mark((function e(n,i){var o,s,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a()){e.next=3;break}throw ee.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return e.next=5,$e(n,r,t);case 5:return s=e.sent,e.next=8,o.request({method:"eth_sendRawTransaction",params:["0x".concat(s.toString("hex"))]});case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processSignTransaction:function(){var e=(0,n.Z)(h().mark((function e(n,i){var o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a()){e.next=3;break}throw ee.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return e.next=5,$e(n,r,t);case 5:return o=e.sent,e.abrupt("return","0x".concat(o.toString("hex")));case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processEthSignMessage:function(){var e=(0,n.Z)(h().mark((function e(t,n){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,Q.l)(r,t.data),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processPersonalMessage:function(){var e=(0,n.Z)(h().mark((function e(t,n){var a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=me.from(r,"hex"),i=(0,ue.personalSign)({privateKey:a,data:t.data}),e.abrupt("return",i);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processTypedMessage:function(){var e=(0,n.Z)(h().mark((function e(t,n){var i,o,s,c,u,f,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U.debug("processTypedMessage",t),i=me.from(r,"hex"),o=a()){e.next=5;break}throw ee.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return e.next=7,o.request({method:"eth_chainId"});case 7:return s=e.sent,c=Number.parseInt(s,q(s)?16:10),u=Xe(Xe({},t),{},{version:ue.SignTypedDataVersion.V1}),Ye(u,c),f="string"===typeof u.data?JSON.parse(u.data):u.data,p=(0,ue.signTypedData)({privateKey:i,data:f,version:ue.SignTypedDataVersion.V1}),e.abrupt("return",p);case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processTypedMessageV3:function(){var e=(0,n.Z)(h().mark((function e(t,n){var i,o,s,c,u,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U.debug("processTypedMessageV3",t),i=me.from(r,"hex"),o=a()){e.next=5;break}throw ee.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return e.next=7,o.request({method:"eth_chainId"});case 7:return s=e.sent,c=Number.parseInt(s,q(s)?16:10),Ye(t,c),u="string"===typeof t.data?JSON.parse(t.data):t.data,f=(0,ue.signTypedData)({privateKey:i,data:u,version:ue.SignTypedDataVersion.V3}),e.abrupt("return",f);case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processTypedMessageV4:function(){var e=(0,n.Z)(h().mark((function e(t,n){var i,o,s,c,u,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U.debug("processTypedMessageV4",t),i=me.from(r,"hex"),o=a()){e.next=5;break}throw ee.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return e.next=7,o.request({method:"eth_chainId"});case 7:return s=e.sent,c=Number.parseInt(s,q(s)?16:10),Ye(t,c),u="string"===typeof t.data?JSON.parse(t.data):t.data,f=(0,ue.signTypedData)({privateKey:i,data:u,version:ue.SignTypedDataVersion.V4}),e.abrupt("return",f);case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processEncryptionPublicKey:function(){var e=(0,n.Z)(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U.info("processEncryptionPublicKey",t),e.abrupt("return",(0,ue.getEncryptionPublicKey)(r));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),processDecryptMessage:function(e,t){U.info("processDecryptMessage",e);var n=(0,fe.stripHexPrefix)(e.data),a=me.from(n,"hex");return(0,ue.decrypt)({encryptedData:JSON.parse(a.toString("utf8")),privateKey:r})}}}function tt(e){return(0,fe.addHexPrefix)(e.toString(16))}function rt(e){return fe.BN.isBN(e)?e:new fe.BN((0,fe.stripHexPrefix)(e),16)}function nt(e,t,r){var n=new fe.BN(t),a=new fe.BN(r);return e.mul(n).div(a)}var at="0x0",it="0x2",ot="sentEther",st="contractInteraction",ct="contractDeployment",ut="fee-market",ft="legacy",pt="eth_gasPrice";function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var lt=function(){function e(t){var r=t.getProviderEngineProxy;(0,a.Z)(this,e),(0,p.Z)(this,"chainConfig",null),(0,p.Z)(this,"getProviderEngineProxy",void 0),(0,p.Z)(this,"isEIP1559Compatible",!1),this.getProviderEngineProxy=r}return(0,i.Z)(e,[{key:"providerProxy",get:function(){return this.getProviderEngineProxy()}},{key:"init",value:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_provider_config",params:[]});case 2:return this.chainConfig=e.sent,e.next=5,this.getEIP1559Compatibility();case 5:this.isEIP1559Compatible=e.sent;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCommonConfiguration",value:function(){var e=(0,n.Z)(h().mark((function e(){var t,r,n,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw new Error("Chain config not initialized");case 2:return t=this.chainConfig,r=t.displayName,n=t.chainId,a=this.isEIP1559Compatible?ge.Hardfork.London:ge.Hardfork.Berlin,i={name:r,chainId:"loading"===n?0:Number.parseInt(n,16),networkId:"loading"===n?0:Number.parseInt(n,16),defaultHardfork:a},e.abrupt("return",ye().custom(i));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"formatTransaction",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n,a,i,o,s,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw new Error("Chain config not initialized");case 2:if(void 0!==(r=ht({},t)).nonce){e.next=7;break}return e.next=6,this.providerProxy.request({method:"eth_getTransactionCount",params:[t.from,"latest"]});case 6:r.nonce=e.sent;case 7:if(this.isEIP1559Compatible||!r.gasPrice){e.next=19;break}if(r.maxFeePerGas&&delete r.maxFeePerGas,r.maxPriorityFeePerGas&&delete r.maxPriorityFeePerGas,r.gas){e.next=17;break}return e.next=13,this.getDefaultGasLimit(r);case 13:(n=e.sent)&&(r.gasLimit=n),e.next=18;break;case 17:r.gasLimit=r.gas;case 18:return e.abrupt("return",r);case 19:if(r.gas){e.next=26;break}return e.next=22,this.getDefaultGasLimit(r);case 22:(a=e.sent)&&(r.gasLimit=a),e.next=27;break;case 26:r.gasLimit=r.gas;case 27:return e.next=29,this.getDefaultGasFees(r);case 29:return i=e.sent,o=i.gasPrice,s=i.maxFeePerGas,c=i.maxPriorityFeePerGas,this.isEIP1559Compatible?(!r.gasPrice||r.maxFeePerGas||r.maxPriorityFeePerGas?(s&&!r.maxFeePerGas&&(r.maxFeePerGas=s),c&&!r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=c),o&&!r.maxFeePerGas&&(r.maxFeePerGas=o),r.maxFeePerGas&&!r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=r.maxFeePerGas)):(r.maxFeePerGas=r.gasPrice,r.maxPriorityFeePerGas=(u="string"===typeof c?(0,fe.stripHexPrefix)(c):c,f="string"===typeof r.gasPrice?(0,fe.stripHexPrefix)(r.gasPrice):r.gasPrice,null!==u&&void 0!==u&&null!==f&&void 0!==f&&new ve.O(u,10).lt(f,10)?c:r.gasPrice)),delete r.gasPrice):(delete r.maxPriorityFeePerGas,delete r.maxFeePerGas),!o||r.gasPrice||r.maxPriorityFeePerGas||r.maxFeePerGas||(r.gasPrice=o),r.type=this.isEIP1559Compatible?it:at,r.chainId=this.chainConfig.chainId,e.abrupt("return",r);case 38:case"end":return e.stop()}var u,f}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchEthGasPriceEstimate",value:function(){var e=(0,n.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_gasPrice",params:[]});case 2:return t=e.sent,e.abrupt("return",{gasPrice:Ge(t).toString()});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getEIP1559Compatibility",value:function(){var e=(0,n.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]});case 2:return t=e.sent,r=t&&void 0!==t.baseFeePerGas,e.abrupt("return",!!r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchGasFeeEstimateData",value:function(){var e=(0,n.Z)(h().mark((function e(){var t,r,n,a,i,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw new Error("Chain config not initialized");case 2:if(t="0x1"===this.chainConfig.chainId,r=Number.parseInt(this.chainConfig.chainId,16),e.prev=4,!this.isEIP1559Compatible){e.next=12;break}return e.next=8,Ve("https://gas-api.metaswap.codefi.network/networks/<chain_id>/suggestedGasFees".replace("<chain_id>","".concat(r)));case 8:a=e.sent,n={gasFeeEstimates:a,gasEstimateType:ut},e.next=20;break;case 12:if(!t){e.next=19;break}return e.next=15,We("https://gas-api.metaswap.codefi.network/networks/<chain_id>/gasPrices".replace("<chain_id>","".concat(r)));case 15:i=e.sent,n={gasFeeEstimates:i,gasEstimateType:ft},e.next=20;break;case 19:throw new Error("Main gas fee/price estimation failed. Use fallback");case 20:e.next=34;break;case 22:return e.prev=22,e.t0=e.catch(4),e.prev=24,e.next=27,this.fetchEthGasPriceEstimate();case 27:o=e.sent,n={gasFeeEstimates:o,gasEstimateType:pt},e.next=34;break;case 31:throw e.prev=31,e.t1=e.catch(24),new Error("Gas fee/price estimation failed. Message: ".concat(e.t1.message));case 34:return e.abrupt("return",n);case 35:case"end":return e.stop()}}),e,this,[[4,22],[24,31]])})));return function(){return e.apply(this,arguments)}}()},{key:"getDefaultGasFees",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n,a,i,o,s,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!this.isEIP1559Compatible&&t.gasPrice||this.isEIP1559Compatible&&t.maxFeePerGas&&t.maxPriorityFeePerGas)){e.next=2;break}return e.abrupt("return",{});case 2:return e.prev=2,e.next=5,this.fetchGasFeeEstimateData();case 5:if(r=e.sent,n=r.gasFeeEstimates,a=r.gasEstimateType,!this.isEIP1559Compatible||a!==ut){e.next=16;break}if(i=n.medium,o=(i=void 0===i?{}:i).suggestedMaxPriorityFeePerGas,s=i.suggestedMaxFeePerGas,!o||!s){e.next=14;break}return e.abrupt("return",{maxFeePerGas:(0,fe.addHexPrefix)(Fe(s)),maxPriorityFeePerGas:(0,fe.addHexPrefix)(Fe(o))});case 14:e.next=22;break;case 16:if(a!==ft){e.next=20;break}return e.abrupt("return",{gasPrice:(0,fe.addHexPrefix)(Fe(n.medium))});case 20:if(a!==pt){e.next=22;break}return e.abrupt("return",{gasPrice:(0,fe.addHexPrefix)(Fe(n.gasPrice))});case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),U.error(e.t0);case 27:return e.next=29,this.fetchEthGasPriceEstimate();case 29:return c=e.sent,u=c.gasPrice,e.abrupt("return",{gasPrice:(0,fe.addHexPrefix)(Fe(u))});case 32:case"end":return e.stop()}}),e,this,[[2,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"estimateTxGas",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(r=ht({},t)).gasPrice,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,e.next=6,this.providerProxy.request({method:"eth_estimateGas",params:[r]});case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"analyzeGasUsage",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]});case 2:return r=e.sent,n=rt(r.gasLimit),a=nt(n,19,20),i=tt(a),e.prev=6,e.next=9,this.estimateTxGas(t);case 9:i=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),U.warn(e.t0);case 15:return e.abrupt("return",{blockGasLimit:r.gasLimit,estimatedGasHex:i});case 16:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addGasBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.5,n=rt(e),a=rt(t),i=a.muln(.9),o=n.muln(r);return n.gt(i)?tt(n):o.lt(i)?tt(o):tt(i)}},{key:"determineTransactionCategory",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.data,n=t.to,a="",!r||n){e.next=6;break}i=ct,e.next=17;break;case 6:return e.prev=6,e.next=9,this.providerProxy.request({method:"eth_getCode",params:[n,"latest"]});case 9:a=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),U.warn(e.t0);case 15:i=!a||"0x"===a||"0x0"===a?ot:st;case 17:return e.abrupt("return",{transactionCategory:i,code:a});case 18:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getDefaultGasLimit",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n,a,i,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.determineTransactionCategory(ht({},t));case 2:if(r=e.sent,n=r.transactionCategory,!t.gas){e.next=6;break}return e.abrupt("return",t.gas);case 6:if(!t.to||n!==ot){e.next=11;break}if(!t.data){e.next=9;break}throw Error("TxGasUtil - Trying to call a function on a non-contract address");case 9:return 21e3,e.abrupt("return",(0,fe.addHexPrefix)(21e3.toString(16)));case 11:return e.next=13,this.analyzeGasUsage(t);case 13:return a=e.sent,i=a.blockGasLimit,o=a.estimatedGasHex,s=this.addGasBuffer((0,fe.addHexPrefix)(o),i),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.Z)(e);if(t){var a=(0,f.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var mt=function(e){(0,c.Z)(r,e);var t=yt(r);function r(e){var n=e.config,i=e.state;return(0,a.Z)(this,r),t.call(this,{config:{chainConfig:gt(gt({},n.chainConfig),{},{chainNamespace:b})},state:i})}return(0,i.Z)(r,[{key:"enable",value:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.privateKey){e.next=2;break}throw ee.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});case 2:return e.next=4,this.setupProvider(this.state.privateKey);case 4:return e.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n,a,i,o,s,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new lt({getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),n=et({txFormatter:r,privKey:t,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),a=Pe(n),i=this.getChainSwitchMiddleware(),o=new v.eI,s=Ce(this.config.chainConfig),c=s.networkMiddleware,o.push(a),o.push(i),o.push(this.getAccountMiddleware()),o.push(c),u=(0,Q.Xj)(o),this.updateProviderEngineProxy(u),e.next=14,r.init();case 14:return e.next=16,this.lookupNetwork();case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateAccount",value:function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw ee.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return e.next=4,this._providerEngineProxy.request({method:"eth_private_key"});case 4:if(e.sent===t.privateKey){e.next=14;break}return e.next=8,this.setupProvider(t.privateKey);case 8:return e.t0=this._providerEngineProxy,e.next=11,this._providerEngineProxy.request({method:"eth_accounts"});case 11:e.t1=e.sent,e.t2={accounts:e.t1},e.t0.emit.call(e.t0,"accountsChanged",e.t2);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw ee.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return r=this.getChainConfig(t.chainId),this.update({chainId:"loading"}),this.configure({chainConfig:r}),e.next=7,this._providerEngineProxy.request({method:"eth_private_key"});case 7:return n=e.sent,e.next=10,this.setupProvider(n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var e=(0,n.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw ee.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:if(t=this.config.chainConfig.chainId){e.next=5;break}throw ee.ethErrors.rpc.invalidParams("chainId is required while lookupNetwork");case 5:return e.next=7,this._providerEngineProxy.request({method:"net_version",params:[]});case 7:if(r=e.sent,parseInt(t,16)===parseInt(r,10)){e.next=10;break}throw ee.ethErrors.provider.chainDisconnected("Invalid network, net_version is: ".concat(r));case 10:return this.state.chainId!==t&&(this._providerEngineProxy.emit("chainChanged",t),this._providerEngineProxy.emit("connect",{chainId:t})),this.update({chainId:t}),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getChainSwitchMiddleware",value:function(){var e=this,t={addChain:function(){var t=(0,n.Z)(h().mark((function t(r){var n,a,i,o,s;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.chainId,a=r.chainName,i=r.rpcUrls,o=r.blockExplorerUrls,s=r.nativeCurrency,e.addChain({chainNamespace:"eip155",chainId:n,ticker:(null===s||void 0===s?void 0:s.symbol)||"ETH",tickerName:(null===s||void 0===s?void 0:s.name)||"Ether",displayName:a,rpcTarget:i[0],blockExplorer:(null===o||void 0===o?void 0:o[0])||""});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),switchChain:function(){var t=(0,n.Z)(h().mark((function t(r){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.chainId,t.next=3,e.switchChain({chainId:n});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},r=function(e){var t=e.addChain,r=e.switchChain;function a(){return(a=(0,n.Z)(h().mark((function e(r,n){var a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!==(a=r.params)&&void 0!==a&&a.length?r.params[0]:void 0){e.next=3;break}throw ee.ethErrors.rpc.invalidParams("Missing chain params");case 3:if(i.chainId){e.next=5;break}throw ee.ethErrors.rpc.invalidParams("Missing chainId in chainParams");case 5:if(i.rpcUrls&&0!==i.rpcUrls.length){e.next=7;break}throw ee.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");case 7:if(i.nativeCurrency){e.next=9;break}throw ee.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");case 9:return e.next=11,t(i);case 11:n.result=e.sent;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=(0,n.Z)(h().mark((function e(t,n){var a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!==(a=t.params)&&void 0!==a&&a.length?t.params[0]:void 0){e.next=3;break}throw ee.ethErrors.rpc.invalidParams("Missing chainId");case 3:return e.next=5,r(i);case 5:n.result=e.sent;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,v.v0)({wallet_addEthereumChain:(0,v.Pk)((function(e,t){return a.apply(this,arguments)})),wallet_switchEthereumChain:(0,v.Pk)((function(e,t){return i.apply(this,arguments)}))})}(t);return r}},{key:"getAccountMiddleware",value:function(){var e=this,t={updatePrivatekey:function(){var t=(0,n.Z)(h().mark((function t(r){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.privateKey,t.next=3,e.updateAccount({privateKey:n});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return function(e){var t=e.updatePrivatekey;function r(){return(r=(0,n.Z)(h().mark((function e(r,n){var a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(i=null!==(a=r.params)&&void 0!==a&&a.length?r.params[0]:void 0)&&void 0!==i&&i.privateKey){e.next=3;break}throw ee.ethErrors.rpc.invalidParams("Missing privateKey");case 3:return e.next=5,t(i);case 5:n.result=e.sent;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,v.v0)({wallet_updateAccount:(0,v.Pk)((function(e,t){return r.apply(this,arguments)}))})}(t)}}]),r}(oe);(0,p.Z)(mt,"getProviderInstance",function(){var e=(0,n.Z)(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new mt({config:{chainConfig:t.chainConfig}}),e.next=3,r.setupProvider(t.privKey);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var wt=[{name:"Rainbow",chains:[b],logo:"https://images.web3auth.io/login-rainbow.svg",mobile:{native:"rainbow:",universal:"https://rnbwapp.com"},desktop:{native:"",universal:""}},{name:"MetaMask",chains:[b],logo:"https://images.web3auth.io/login-metamask.svg",mobile:{native:"metamask:",universal:"https://metamask.app.link"},desktop:{native:"",universal:""}}];function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.Z)(e);if(t){var a=(0,f.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var kt=function(e){(0,c.Z)(r,e);var t=bt(r);function r(e){var n;return(0,a.Z)(this,r),n=t.call(this,e),(0,p.Z)((0,o.Z)(n),"name",j.WALLET_CONNECT_V1),(0,p.Z)((0,o.Z)(n),"adapterNamespace",E),(0,p.Z)((0,o.Z)(n),"currentChainNamespace",b),(0,p.Z)((0,o.Z)(n),"type",L),(0,p.Z)((0,o.Z)(n),"adapterOptions",void 0),(0,p.Z)((0,o.Z)(n),"status",F.NOT_READY),(0,p.Z)((0,o.Z)(n),"adapterData",{uri:"",extensionAdapters:wt}),(0,p.Z)((0,o.Z)(n),"connector",null),(0,p.Z)((0,o.Z)(n),"wcProvider",null),(0,p.Z)((0,o.Z)(n),"rehydrated",!1),n.adapterOptions=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),n.chainConfig=e.chainConfig||null,n.sessionTime=e.sessionTime||86400,n}return(0,i.Z)(r,[{key:"connected",get:function(){var e;return!(null===(e=this.connector)||void 0===e||!e.connected)}},{key:"provider",get:function(){var e;return(null===(e=this.wcProvider)||void 0===e?void 0:e.provider)||null},set:function(e){throw new Error("Not implemented")}},{key:"init",value:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.Z)((0,f.Z)(r.prototype),"checkInitializationRequirements",this).call(this),this.chainConfig||(this.chainConfig=O(b,1)),this.connector=this.getWalletConnectInstance(),this.wcProvider=new Ze({config:{chainConfig:this.chainConfig},connector:this.connector}),this.emit(G.READY,j.WALLET_CONNECT_V1),this.status=F.READY,U.debug("initializing wallet connect v1 adapter"),!this.connector.connected){e.next=11;break}return this.rehydrated=!0,e.next=11,this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=(0,n.Z)(h().mark((function e(){var t,a,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.Z)((0,f.Z)(r.prototype),"checkConnectionRequirements",this).call(this),this.connector){e.next=3;break}throw _.notReady("Wallet adapter is not ready yet");case 3:if(!this.connected){e.next=7;break}return e.next=6,this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId});case 6:return e.abrupt("return",this.provider);case 7:if(this.status===F.CONNECTING){e.next=13;break}return null!==(t=this.adapterOptions.adapterSettings)&&void 0!==t&&t.qrcodeModal&&(this.connector=this.getWalletConnectInstance(),this.wcProvider=new Ze({config:{chainConfig:this.chainConfig,skipLookupNetwork:null===(a=this.adapterOptions.adapterSettings)||void 0===a?void 0:a.skipNetworkSwitching},connector:this.connector})),e.next=11,this.createNewSession();case 11:this.status=F.CONNECTING,this.emit(G.CONNECTING,{adapter:j.WALLET_CONNECT_V1});case 13:return e.abrupt("return",new Promise((function(e,t){if(!i.connector)return t(_.notReady("Wallet adapter is not ready yet"));i.connector.on("modal_closed",(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.status=F.READY,i.emit(G.READY,j.WALLET_CONNECT_V1),e.abrupt("return",t(new Error("User closed modal")));case 3:case"end":return e.stop()}}),e)}))));try{i.connector.on("connect",function(){var t=(0,n.Z)(h().mark((function t(r,n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r&&i.emit(G.ERRORED,r),U.debug("connected event emitted by web3auth"),t.next=4,i.onConnectHandler(n.params[0]);case 4:return t.abrupt("return",e(i.provider));case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())}catch(r){U.error("Wallet connect v1 adapter error while connecting",r),i.status=F.READY,i.rehydrated=!0,i.emit(G.ERRORED,r),t(r instanceof N?r:T.connectionError("Failed to login with wallet connect: ".concat((null===r||void 0===r?void 0:r.message)||"")))}})));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setAdapterSettings",value:function(e){this.status!==F.READY&&(null!==e&&void 0!==e&&e.sessionTime&&(this.sessionTime=e.sessionTime),null!==e&&void 0!==e&&e.clientId&&(this.clientId=e.clientId))}},{key:"getUserInfo",value:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connected){e.next=2;break}throw T.notConnectedError("Not connected with wallet, Please login/connect first");case 2:return e.abrupt("return",{});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,n.Z)(h().mark((function e(){var t,n,a=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{cleanup:!1},n=t.cleanup,this.connector&&this.connected){e.next=4;break}throw T.notConnectedError("Not connected with wallet");case 4:return e.next=6,(0,s.Z)((0,f.Z)(r.prototype),"disconnect",this).call(this);case 6:return e.next=8,this.connector.killSession();case 8:this.rehydrated=!1,n?(this.connector=null,this.status=F.NOT_READY,this.wcProvider=null):this.status=F.READY,this.emit(G.DISCONNECTED);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addChain",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.wcProvider){e.next=3;break}throw _.notReady("Wallet adapter is not ready yet");case 3:if(!(n=null===(r=this.adapterOptions.adapterSettings)||void 0===r?void 0:r.networkSwitchModal)){e.next=7;break}return e.next=7,n.addNetwork({chainConfig:t,appOrigin:window.location.hostname});case 7:return e.next=9,this.wcProvider.addChain(t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),U.error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=(0,n.Z)(h().mark((function e(t,r){var n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.wcProvider){e.next=2;break}throw _.notReady("Wallet adapter is not ready yet");case 2:if(!(a=null===(n=this.adapterOptions.adapterSettings)||void 0===n?void 0:n.networkSwitchModal)){e.next=6;break}return e.next=6,a.switchNetwork({currentChainConfig:r,newChainConfig:t,appOrigin:window.location.hostname});case 6:return e.next=8,this.wcProvider.switchChain({chainId:r.chainId,lookup:!1,addChain:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createNewSession",value:function(){var e=(0,n.Z)(h().mark((function e(){var t,r,a,i,o=this,s=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>0&&void 0!==s[0]?s[0]:{forceNewSession:!1},this.connector){e.next=3;break}throw _.notReady("Wallet adapter is not ready yet");case 3:if(!a.forceNewSession||!this.connector.pending){e.next=6;break}return e.next=6,this.connector.killSession();case 6:if(null===(t=this.adapterOptions)||void 0===t||null===(r=t.adapterSettings)||void 0===r||!r.qrcodeModal){e.next=10;break}return e.next=9,this.connector.createSession({chainId:parseInt((null===(i=this.chainConfig)||void 0===i?void 0:i.chainId)||"0x1",16)});case 9:return e.abrupt("return");case 10:return e.abrupt("return",new Promise((function(e,t){var r;if(!o.connector)return t(_.notReady("Wallet adapter is not ready yet"));U.debug("creating new session for web3auth wallet connect"),o.connector.on("display_uri",function(){var r=(0,n.Z)(h().mark((function r(n,a){var i,s;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n){r.next=3;break}return o.emit(G.ERRORED,T.connectionError("Failed to display wallet connect qr code")),r.abrupt("return",t(n));case 3:return s=a.params[0],o.updateAdapterData({uri:s,extensionAdapters:wt}),null===(i=o.connector)||void 0===i||i.off("display_uri"),r.abrupt("return",e());case 7:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()),o.connector.createSession({chainId:parseInt((null===(r=o.chainConfig)||void 0===r?void 0:r.chainId)||"0x1",16)}).catch((function(e){return U.error("error while creating new wallet connect session",e),o.emit(G.ERRORED,e),t(e)}))})));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onConnectHandler",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n,a,i,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connector&&this.wcProvider){e.next=2;break}throw _.notReady("Wallet adapter is not ready yet");case 2:if(this.chainConfig){e.next=4;break}throw _.invalidParams("Chain config is not set");case 4:if(r=t.chainId,U.debug("connected chainId in hex"),r===parseInt(this.chainConfig.chainId,16)){e.next=27;break}if(o=O(b,r)||{chainId:"0x".concat(r.toString(16)),displayName:"Unknown Network"},(s=null===(n=this.adapterOptions.adapterSettings)||void 0===n?void 0:n.qrcodeModal)&&(!s||null!==(a=this.adapterOptions)&&void 0!==a&&null!==(i=a.adapterSettings)&&void 0!==i&&i.skipNetworkSwitching)){e.next=27;break}return e.prev=10,e.next=13,this.addChain(this.chainConfig);case 13:return e.next=15,this.switchChain(o,this.chainConfig);case 15:this.connector=this.getWalletConnectInstance(),e.next=27;break;case 18:return e.prev=18,e.t0=e.catch(10),U.error("error while chain switching",e.t0),e.next=23,this.createNewSession({forceNewSession:!0});case 23:return this.emit(G.ERRORED,_.fromCode(5e3,"Not connected to correct network. Expected: ".concat(this.chainConfig.displayName,", Current: ").concat((null===o||void 0===o?void 0:o.displayName)||r,", Please switch to correct network from wallet"))),this.status=F.READY,this.rehydrated=!0,e.abrupt("return");case 27:return e.next=29,this.wcProvider.setupProvider(this.connector);case 29:this.subscribeEvents(this.connector),this.status=F.CONNECTED,this.emit(G.CONNECTED,{adapter:j.WALLET_CONNECT_V1,reconnected:this.rehydrated});case 32:case"end":return e.stop()}}),e,this,[[10,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"subscribeEvents",value:function(e){var t=this;e.on("session_update",function(){var e=(0,n.Z)(h().mark((function e(r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r&&t.emit(G.ERRORED,r);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"getWalletConnectInstance",value:function(){var e=this.adapterOptions.adapterSettings||{};return e.bridge=e.bridge||"https://bridge.walletconnect.org",new l.Z(e)}}]),r}($)},93326:function(e,t,r){var n=r(48764).Buffer,a=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isZeroAddress=t.zeroAddress=t.importPublic=t.privateToAddress=t.privateToPublic=t.publicToAddress=t.pubToAddress=t.isValidPublic=t.isValidPrivate=t.generateAddress2=t.generateAddress=t.isValidChecksumAddress=t.toChecksumAddress=t.isValidAddress=t.Account=void 0;var o=i(r(69282)),s=r(2970),c=r(95053),u=r(14543),f=r(39831),p=r(95642),d=r(98898),h=r(11091),l=r(58456),v=function(){function e(e,t,r,n){void 0===e&&(e=new s.BN(0)),void 0===t&&(t=new s.BN(0)),void 0===r&&(r=f.KECCAK256_RLP),void 0===n&&(n=f.KECCAK256_NULL),this.nonce=e,this.balance=t,this.stateRoot=r,this.codeHash=n,this._validate()}return e.fromAccountData=function(t){var r=t.nonce,n=t.balance,a=t.stateRoot,i=t.codeHash;return new e(r?new s.BN((0,p.toBuffer)(r)):void 0,n?new s.BN((0,p.toBuffer)(n)):void 0,a?(0,p.toBuffer)(a):void 0,i?(0,p.toBuffer)(i):void 0)},e.fromRlpSerializedAccount=function(e){var t=s.rlp.decode(e);if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)},e.fromValuesArray=function(t){var r=a(t,4),n=r[0],i=r[1],o=r[2],c=r[3];return new e(new s.BN(n),new s.BN(i),o,c)},e.prototype._validate=function(){if(this.nonce.lt(new s.BN(0)))throw new Error("nonce must be greater than zero");if(this.balance.lt(new s.BN(0)))throw new Error("balance must be greater than zero");if(32!==this.stateRoot.length)throw new Error("stateRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")},e.prototype.raw=function(){return[(0,l.bnToUnpaddedBuffer)(this.nonce),(0,l.bnToUnpaddedBuffer)(this.balance),this.stateRoot,this.codeHash]},e.prototype.serialize=function(){return s.rlp.encode(this.raw())},e.prototype.isContract=function(){return!this.codeHash.equals(f.KECCAK256_NULL)},e.prototype.isEmpty=function(){return this.balance.isZero()&&this.nonce.isZero()&&this.codeHash.equals(f.KECCAK256_NULL)},e}();t.Account=v;t.isValidAddress=function(e){try{(0,h.assertIsString)(e)}catch(t){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};t.toChecksumAddress=function(e,t){(0,h.assertIsHexString)(e);var r=(0,u.stripHexPrefix)(e).toLowerCase(),n="";t&&(n=(0,l.toType)(t,l.TypeOutput.BN).toString()+"0x");for(var a=(0,d.keccakFromString)(n+r).toString("hex"),i="0x",o=0;o<r.length;o++)parseInt(a[o],16)>=8?i+=r[o].toUpperCase():i+=r[o];return i};t.isValidChecksumAddress=function(e,r){return(0,t.isValidAddress)(e)&&(0,t.toChecksumAddress)(e,r)===e};t.generateAddress=function(e,t){(0,h.assertIsBuffer)(e),(0,h.assertIsBuffer)(t);var r=new s.BN(t);return r.isZero()?(0,d.rlphash)([e,null]).slice(-20):(0,d.rlphash)([e,n.from(r.toArray())]).slice(-20)};t.generateAddress2=function(e,t,r){return(0,h.assertIsBuffer)(e),(0,h.assertIsBuffer)(t),(0,h.assertIsBuffer)(r),(0,o.default)(20===e.length),(0,o.default)(32===t.length),(0,d.keccak256)(n.concat([n.from("ff","hex"),e,t,(0,d.keccak256)(r)])).slice(-20)};t.isValidPrivate=function(e){return(0,c.privateKeyVerify)(e)};t.isValidPublic=function(e,t){return void 0===t&&(t=!1),(0,h.assertIsBuffer)(e),64===e.length?(0,c.publicKeyVerify)(n.concat([n.from([4]),e])):!!t&&(0,c.publicKeyVerify)(e)};t.pubToAddress=function(e,t){return void 0===t&&(t=!1),(0,h.assertIsBuffer)(e),t&&64!==e.length&&(e=n.from((0,c.publicKeyConvert)(e,!1).slice(1))),(0,o.default)(64===e.length),(0,d.keccak)(e).slice(-20)},t.publicToAddress=t.pubToAddress;t.privateToPublic=function(e){return(0,h.assertIsBuffer)(e),n.from((0,c.publicKeyCreate)(e,!1)).slice(1)};t.privateToAddress=function(e){return(0,t.publicToAddress)((0,t.privateToPublic)(e))};t.importPublic=function(e){return(0,h.assertIsBuffer)(e),64!==e.length&&(e=n.from((0,c.publicKeyConvert)(e,!1).slice(1))),e};t.zeroAddress=function(){var e=(0,p.zeros)(20);return(0,p.bufferToHex)(e)};t.isZeroAddress=function(e){try{(0,h.assertIsString)(e)}catch(r){return!1}return(0,t.zeroAddress)()===e}},90897:function(e,t,r){var n=r(48764).Buffer,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Address=void 0;var i=a(r(69282)),o=r(2970),s=r(95642),c=r(93326),u=function(){function e(e){(0,i.default)(20===e.length,"Invalid address length"),this.buf=e}return e.zero=function(){return new e((0,s.zeros)(20))},e.fromString=function(t){return(0,i.default)((0,c.isValidAddress)(t),"Invalid address"),new e((0,s.toBuffer)(t))},e.fromPublicKey=function(t){return(0,i.default)(n.isBuffer(t),"Public key should be Buffer"),new e((0,c.pubToAddress)(t))},e.fromPrivateKey=function(t){return(0,i.default)(n.isBuffer(t),"Private key should be Buffer"),new e((0,c.privateToAddress)(t))},e.generate=function(t,r){return(0,i.default)(o.BN.isBN(r)),new e((0,c.generateAddress)(t.buf,r.toArrayLike(n)))},e.generate2=function(t,r,a){return(0,i.default)(n.isBuffer(r)),(0,i.default)(n.isBuffer(a)),new e((0,c.generateAddress2)(t.buf,r,a))},e.prototype.equals=function(e){return this.buf.equals(e.buf)},e.prototype.isZero=function(){return this.equals(e.zero())},e.prototype.isPrecompileOrSystemAddress=function(){var e=new o.BN(this.buf),t=new o.BN(0),r=new o.BN("ffff","hex");return e.gte(t)&&e.lte(r)},e.prototype.toString=function(){return"0x"+this.buf.toString("hex")},e.prototype.toBuffer=function(){return n.from(this.buf)},e}();t.Address=u},95642:function(e,t,r){var n=r(48764).Buffer,a=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.bufArrToArr=t.arrToBufArr=t.validateNoLeadingZeroes=t.baToJSON=t.toUtf8=t.addHexPrefix=t.toUnsigned=t.fromSigned=t.bufferToHex=t.bufferToInt=t.toBuffer=t.unpadHexString=t.unpadArray=t.unpadBuffer=t.setLengthRight=t.setLengthLeft=t.zeros=t.intToBuffer=t.intToHex=void 0;var o=r(2970),s=r(14543),c=r(11091);t.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("Received an invalid integer type: ".concat(e));return"0x".concat(e.toString(16))};t.intToBuffer=function(e){var r=(0,t.intToHex)(e);return n.from((0,s.padToEven)(r.slice(2)),"hex")};t.zeros=function(e){return n.allocUnsafe(e).fill(0)};var u=function(e,r,n){var a=(0,t.zeros)(r);return n?e.length<r?(e.copy(a),a):e.slice(0,r):e.length<r?(e.copy(a,r-e.length),a):e.slice(-r)};t.setLengthLeft=function(e,t){return(0,c.assertIsBuffer)(e),u(e,t,!1)};t.setLengthRight=function(e,t){return(0,c.assertIsBuffer)(e),u(e,t,!0)};var f=function(e){for(var t=e[0];e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};t.unpadBuffer=function(e){return(0,c.assertIsBuffer)(e),f(e)};t.unpadArray=function(e){return(0,c.assertIsArray)(e),f(e)};t.unpadHexString=function(e){return(0,c.assertIsHexString)(e),e=(0,s.stripHexPrefix)(e),f(e)};t.toBuffer=function(e){if(null===e||void 0===e)return n.allocUnsafe(0);if(n.isBuffer(e))return n.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return n.from(e);if("string"===typeof e){if(!(0,s.isHexString)(e))throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ".concat(e));return n.from((0,s.padToEven)((0,s.stripHexPrefix)(e)),"hex")}if("number"===typeof e)return(0,t.intToBuffer)(e);if(o.BN.isBN(e)){if(e.isNeg())throw new Error("Cannot convert negative BN to buffer. Given: ".concat(e));return e.toArrayLike(n)}if(e.toArray)return n.from(e.toArray());if(e.toBuffer)return n.from(e.toBuffer());throw new Error("invalid type")};t.bufferToInt=function(e){return new o.BN((0,t.toBuffer)(e)).toNumber()};t.bufferToHex=function(e){return"0x"+(e=(0,t.toBuffer)(e)).toString("hex")};t.fromSigned=function(e){return new o.BN(e).fromTwos(256)};t.toUnsigned=function(e){return n.from(e.toTwos(256).toArray())};t.addHexPrefix=function(e){return"string"!==typeof e||(0,s.isHexPrefixed)(e)?e:"0x"+e};t.toUtf8=function(e){if((e=(0,s.stripHexPrefix)(e)).length%2!==0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return n.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};t.baToJSON=function(e){if(n.isBuffer(e))return"0x".concat(e.toString("hex"));if(e instanceof Array){for(var r=[],a=0;a<e.length;a++)r.push((0,t.baToJSON)(e[a]));return r}};t.validateNoLeadingZeroes=function(e){var t,r;try{for(var n=a(Object.entries(e)),o=n.next();!o.done;o=n.next()){var s=i(o.value,2),c=s[0],u=s[1];if(void 0!==u&&u.length>0&&0===u[0])throw new Error("".concat(c," cannot have leading zeroes, received: ").concat(u.toString("hex")))}}catch(f){t={error:f}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},t.arrToBufArr=function e(t){return Array.isArray(t)?t.map((function(t){return e(t)})):n.from(t)},t.bufArrToArr=function e(t){return Array.isArray(t)?t.map((function(t){return e(t)})):Uint8Array.from(null!==t&&void 0!==t?t:[])}},39831:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.KECCAK256_RLP=t.KECCAK256_RLP_S=t.KECCAK256_RLP_ARRAY=t.KECCAK256_RLP_ARRAY_S=t.KECCAK256_NULL=t.KECCAK256_NULL_S=t.TWO_POW256=t.MAX_INTEGER=t.MAX_UINT64=void 0;var n=r(48764),a=r(2970);t.MAX_UINT64=new a.BN("ffffffffffffffff",16),t.MAX_INTEGER=new a.BN("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),t.TWO_POW256=new a.BN("10000000000000000000000000000000000000000000000000000000000000000",16),t.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",t.KECCAK256_NULL=n.Buffer.from(t.KECCAK256_NULL_S,"hex"),t.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",t.KECCAK256_RLP_ARRAY=n.Buffer.from(t.KECCAK256_RLP_ARRAY_S,"hex"),t.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",t.KECCAK256_RLP=n.Buffer.from(t.KECCAK256_RLP_S,"hex")},2970:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.rlp=t.BN=void 0;var s=o(r(13550));t.BN=s.default;var c=i(r(51675));t.rlp=c},98898:function(e,t,r){var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.rlphash=t.ripemd160FromArray=t.ripemd160FromString=t.ripemd160=t.sha256FromArray=t.sha256FromString=t.sha256=t.keccakFromArray=t.keccakFromHexString=t.keccakFromString=t.keccak256=t.keccak=void 0;var a=r(82192),i=r(23482),o=r(2970),s=r(95642),c=r(11091);t.keccak=function(e,t){switch(void 0===t&&(t=256),(0,c.assertIsBuffer)(e),t){case 224:return(0,a.keccak224)(e);case 256:return(0,a.keccak256)(e);case 384:return(0,a.keccak384)(e);case 512:return(0,a.keccak512)(e);default:throw new Error("Invald algorithm: keccak".concat(t))}};t.keccak256=function(e){return(0,t.keccak)(e)};t.keccakFromString=function(e,r){void 0===r&&(r=256),(0,c.assertIsString)(e);var a=n.from(e,"utf8");return(0,t.keccak)(a,r)};t.keccakFromHexString=function(e,r){return void 0===r&&(r=256),(0,c.assertIsHexString)(e),(0,t.keccak)((0,s.toBuffer)(e),r)};t.keccakFromArray=function(e,r){return void 0===r&&(r=256),(0,c.assertIsArray)(e),(0,t.keccak)((0,s.toBuffer)(e),r)};var u=function(e){return e=(0,s.toBuffer)(e),i("sha256").update(e).digest()};t.sha256=function(e){return(0,c.assertIsBuffer)(e),u(e)};t.sha256FromString=function(e){return(0,c.assertIsString)(e),u(e)};t.sha256FromArray=function(e){return(0,c.assertIsArray)(e),u(e)};var f=function(e,t){e=(0,s.toBuffer)(e);var r=i("rmd160").update(e).digest();return!0===t?(0,s.setLengthLeft)(r,32):r};t.ripemd160=function(e,t){return(0,c.assertIsBuffer)(e),f(e,t)};t.ripemd160FromString=function(e,t){return(0,c.assertIsString)(e),f(e,t)};t.ripemd160FromArray=function(e,t){return(0,c.assertIsArray)(e),f(e,t)};t.rlphash=function(e){return(0,t.keccak)(o.rlp.encode(e))}},11091:function(e,t,r){var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.assertIsString=t.assertIsArray=t.assertIsBuffer=t.assertIsHexString=void 0;var a=r(14543);t.assertIsHexString=function(e){if(!(0,a.isHexString)(e)){var t="This method only supports 0x-prefixed hex strings but input was: ".concat(e);throw new Error(t)}};t.assertIsBuffer=function(e){if(!n.isBuffer(e)){var t="This method only supports Buffer but input was: ".concat(e);throw new Error(t)}};t.assertIsArray=function(e){if(!Array.isArray(e)){var t="This method only supports number arrays but input was: ".concat(e);throw new Error(t)}};t.assertIsString=function(e){if("string"!==typeof e){var t="This method only supports strings but input was: ".concat(e);throw new Error(t)}}},62671:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.isHexString=t.getKeys=t.fromAscii=t.fromUtf8=t.toAscii=t.arrayContainsArray=t.getBinarySize=t.padToEven=t.stripHexPrefix=t.isHexPrefixed=void 0,a(r(39831),t),a(r(93326),t),a(r(90897),t),a(r(98898),t),a(r(44877),t),a(r(95642),t),a(r(5780),t),a(r(2970),t),a(r(58456),t);var i=r(14543);Object.defineProperty(t,"isHexPrefixed",{enumerable:!0,get:function(){return i.isHexPrefixed}}),Object.defineProperty(t,"stripHexPrefix",{enumerable:!0,get:function(){return i.stripHexPrefix}}),Object.defineProperty(t,"padToEven",{enumerable:!0,get:function(){return i.padToEven}}),Object.defineProperty(t,"getBinarySize",{enumerable:!0,get:function(){return i.getBinarySize}}),Object.defineProperty(t,"arrayContainsArray",{enumerable:!0,get:function(){return i.arrayContainsArray}}),Object.defineProperty(t,"toAscii",{enumerable:!0,get:function(){return i.toAscii}}),Object.defineProperty(t,"fromUtf8",{enumerable:!0,get:function(){return i.fromUtf8}}),Object.defineProperty(t,"fromAscii",{enumerable:!0,get:function(){return i.fromAscii}}),Object.defineProperty(t,"getKeys",{enumerable:!0,get:function(){return i.getKeys}}),Object.defineProperty(t,"isHexString",{enumerable:!0,get:function(){return i.isHexString}})},14543:function(e,t,r){var n=r(48764).Buffer;function a(e){if("string"!==typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type ".concat(typeof e));return"0"===e[0]&&"x"===e[1]}Object.defineProperty(t,"__esModule",{value:!0}),t.isHexString=t.getKeys=t.fromAscii=t.fromUtf8=t.toAscii=t.arrayContainsArray=t.getBinarySize=t.padToEven=t.stripHexPrefix=t.isHexPrefixed=void 0,t.isHexPrefixed=a;function i(e){var t=e;if("string"!==typeof t)throw new Error("[padToEven] value must be type 'string', received ".concat(typeof t));return t.length%2&&(t="0".concat(t)),t}t.stripHexPrefix=function(e){if("string"!==typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received ".concat(typeof e));return a(e)?e.slice(2):e},t.padToEven=i,t.getBinarySize=function(e){if("string"!==typeof e)throw new Error("[getBinarySize] method requires input type 'string', recieved ".concat(typeof e));return n.byteLength(e,"utf8")},t.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error("[arrayContainsArray] method requires input 'superset' to be an array, got type '".concat(typeof e,"'"));if(!0!==Array.isArray(t))throw new Error("[arrayContainsArray] method requires input 'subset' to be an array, got type '".concat(typeof t,"'"));return t[r?"some":"every"]((function(t){return e.indexOf(t)>=0}))},t.toAscii=function(e){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){var a=parseInt(e.substr(r,2),16);t+=String.fromCharCode(a)}return t},t.fromUtf8=function(e){var t=n.from(e,"utf8");return"0x".concat(i(t.toString("hex")).replace(/^0+|0+$/g,""))},t.fromAscii=function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r).toString(16);t+=n.length<2?"0".concat(n):n}return"0x".concat(t)},t.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got ".concat(typeof e));if("string"!==typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got ".concat(typeof e));for(var n=[],a=0;a<e.length;a++){var i=e[a][t];if(r&&!i)i="";else if("string"!==typeof i)throw new Error("invalid abi - expected type 'string', received ".concat(typeof i));n.push(i)}return n},t.isHexString=function(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}},5780:function(e,t,r){var n=r(48764).Buffer,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defineProperties=void 0;var i=a(r(69282)),o=r(14543),s=r(2970),c=r(95642);t.defineProperties=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(t){if(void 0===t&&(t=!1),t){var r={};return e._fields.forEach((function(t){r[t]="0x".concat(e[t].toString("hex"))})),r}return(0,c.baToJSON)(e.raw)},e.serialize=function(){return s.rlp.encode(e.raw)},t.forEach((function(t,r){function a(){return e.raw[r]}function o(a){"00"!==(a=(0,c.toBuffer)(a)).toString("hex")||t.allowZero||(a=n.allocUnsafe(0)),t.allowLess&&t.length?(a=(0,c.unpadBuffer)(a),(0,i.default)(t.length>=a.length,"The field ".concat(t.name," must not have more ").concat(t.length," bytes"))):t.allowZero&&0===a.length||!t.length||(0,i.default)(t.length===a.length,"The field ".concat(t.name," must have byte length of ").concat(t.length)),e.raw[r]=a}e._fields.push(t.name),Object.defineProperty(e,t.name,{enumerable:!0,configurable:!0,get:a,set:o}),t.default&&(e[t.name]=t.default),t.alias&&Object.defineProperty(e,t.alias,{enumerable:!1,configurable:!0,set:o,get:a})})),r)if("string"===typeof r&&(r=n.from((0,o.stripHexPrefix)(r),"hex")),n.isBuffer(r)&&(r=s.rlp.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw new Error("wrong number of fields in data");r.forEach((function(t,r){e[e._fields[r]]=(0,c.toBuffer)(t)}))}else{if("object"!==typeof r)throw new Error("invalid data");var a=Object.keys(r);t.forEach((function(t){-1!==a.indexOf(t.name)&&(e[t.name]=r[t.name]),-1!==a.indexOf(t.alias)&&(e[t.alias]=r[t.alias])}))}}},44877:function(e,t,r){var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.hashPersonalMessage=t.isValidSignature=t.fromRpcSig=t.toCompactSig=t.toRpcSig=t.ecrecover=t.ecsign=void 0;var a=r(95053),i=r(2970),o=r(95642),s=r(98898),c=r(11091),u=r(58456);function f(e,t){var r=(0,u.toType)(e,u.TypeOutput.BN);if(r.eqn(0)||r.eqn(1))return(0,u.toType)(e,u.TypeOutput.BN);if(!t)return r.subn(27);var n=(0,u.toType)(t,u.TypeOutput.BN);return r.sub(n.muln(2).addn(35))}function p(e){var t=new i.BN(e);return t.eqn(0)||t.eqn(1)}t.ecsign=function(e,t,r){var i=(0,a.ecdsaSign)(e,t),o=i.signature,s=i.recid,c=n.from(o.slice(0,32)),f=n.from(o.slice(32,64));if(!r||"number"===typeof r){if(r&&!Number.isSafeInteger(r))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");return{r:c,s:f,v:r?s+(2*r+35):s+27}}return{r:c,s:f,v:(0,u.toType)(r,u.TypeOutput.BN).muln(2).addn(35).addn(s).toArrayLike(n)}};t.ecrecover=function(e,t,r,i,s){var c=n.concat([(0,o.setLengthLeft)(r,32),(0,o.setLengthLeft)(i,32)],64),u=f(t,s);if(!p(u))throw new Error("Invalid signature v value");var d=(0,a.ecdsaRecover)(c,u.toNumber(),e);return n.from((0,a.publicKeyConvert)(d,!1).slice(1))};t.toRpcSig=function(e,t,r,a){if(!p(f(e,a)))throw new Error("Invalid signature v value");return(0,o.bufferToHex)(n.concat([(0,o.setLengthLeft)(t,32),(0,o.setLengthLeft)(r,32),(0,o.toBuffer)(e)]))};t.toCompactSig=function(e,t,r,a){if(!p(f(e,a)))throw new Error("Invalid signature v value");var i=(0,u.toType)(e,u.TypeOutput.Number),s=r;return(i>28&&i%2===1||1===i||28===i)&&((s=n.from(r))[0]|=128),(0,o.bufferToHex)(n.concat([(0,o.setLengthLeft)(t,32),(0,o.setLengthLeft)(s,32)]))};t.fromRpcSig=function(e){var t,r,n,a=(0,o.toBuffer)(e);if(a.length>=65)t=a.slice(0,32),r=a.slice(32,64),n=(0,o.bufferToInt)(a.slice(64));else{if(64!==a.length)throw new Error("Invalid signature length");t=a.slice(0,32),r=a.slice(32,64),n=(0,o.bufferToInt)(a.slice(32,33))>>7,r[0]&=127}return n<27&&(n+=27),{v:n,r:t,s:r}};t.isValidSignature=function(e,t,r,n,a){void 0===n&&(n=!0);var o=new i.BN("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),s=new i.BN("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(32!==t.length||32!==r.length)return!1;if(!p(f(e,a)))return!1;var c=new i.BN(t),u=new i.BN(r);return!(c.isZero()||c.gt(s)||u.isZero()||u.gt(s))&&(!n||1!==u.cmp(o))};t.hashPersonalMessage=function(e){(0,c.assertIsBuffer)(e);var t=n.from("\x19Ethereum Signed Message:\n".concat(e.length),"utf-8");return(0,s.keccak)(n.concat([t,e]))}},58456:function(e,t,r){var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.toType=t.TypeOutput=t.bnToRlp=t.bnToUnpaddedBuffer=t.bnToHex=void 0;var a,i=r(2970),o=r(14543),s=r(95642);function c(e){return(0,s.unpadBuffer)(e.toArrayLike(n))}t.bnToHex=function(e){return"0x".concat(e.toString(16))},t.bnToUnpaddedBuffer=c,t.bnToRlp=function(e){return c(e)},function(e){e[e.Number=0]="Number",e[e.BN=1]="BN",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(a=t.TypeOutput||(t.TypeOutput={})),t.toType=function(e,t){if(null===e)return null;if(void 0!==e){if("string"===typeof e&&!(0,o.isHexString)(e))throw new Error("A string must be provided with a 0x-prefix, given: ".concat(e));if("number"===typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");var r=(0,s.toBuffer)(e);if(t===a.Buffer)return r;if(t===a.BN)return new i.BN(r);if(t===a.Number){var n=new i.BN(r),c=new i.BN(Number.MAX_SAFE_INTEGER.toString());if(n.gt(c))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return n.toNumber()}return"0x".concat(r.toString("hex"))}}}}]);