"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[600],{96600:function(e,t,r){r.r(t),r.d(t,{WalletConnectV1Adapter:function(){return e7}});var n,a,i,o,s,c=r(15861),u=r(15671),f=r(43144),p=r(97326),h=r(73237),d=r(32531),l=r(82963),v=r(61120),g=r(4942),y=r(64687),m=r.n(y),w=r(71516),x=r(95844),b=r(13631),k=r(20917),P=r(96245),E=r(2043),C=r.n(E),O={EIP155:"eip155",SOLANA:"solana",OTHER:"other"},N={EIP155:"eip155",SOLANA:"solana",MULTICHAIN:"multichain"},T=function(e){if(e===O.EIP155||e===O.SOLANA)return 1;throw Error("Chain namespace ".concat(e," is not supported"))},_=function(e){var t=O.EIP155;return 1===e?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:3===e?{chainNamespace:t,chainId:"0x3",rpcTarget:"https://rpc.ankr.com/eth_ropsten",displayName:"Ropsten Testnet",blockExplorer:"https://ropsten.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:4===e?{chainNamespace:t,chainId:"0x4",rpcTarget:"https://rpc.ankr.com/eth_rinkeby",displayName:"Rinkeby Testnet",blockExplorer:"https://rinkeby.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:5===e?{chainNamespace:t,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:137===e?{chainNamespace:t,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorer:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:80001===e?{chainNamespace:t,chainId:"0x13881",rpcTarget:"https://rpc.ankr.com/polygon_mumbai",displayName:"Polygon Mumbai Testnet",blockExplorer:"https://mumbai.polygonscan.com/",ticker:"MATIC",tickerName:"Polygon"}:56===e?{chainNamespace:t,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorer:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:97===e?{chainNamespace:t,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorer:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:25===e?{chainNamespace:t,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:338===e?{chainNamespace:t,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:8217===e?{chainNamespace:t,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorer:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn"}:null},A=function(e){var t=O.SOLANA;return 1===e?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorer:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana"}:2===e?{chainNamespace:t,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorer:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana"}:3===e?{chainNamespace:t,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorer:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana"}:null},S=function(e,t){if(e===O.OTHER)return null;var r=t?"number"==typeof t?t:parseInt(t,16):T(e);return e===O.EIP155?_(r):e===O.SOLANA?A(r):null};function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,v.Z)(e);if(t){var a=(0,v.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.Z)(this,r)}}var Z=function(e){(0,d.Z)(r,e);var t=I(r);function r(e,n){var a;return(0,u.Z)(this,r),a=t.call(this,n),(0,g.Z)((0,p.Z)(a),"code",void 0),(0,g.Z)((0,p.Z)(a),"message",void 0),a.code=e,a.message=n||"",Object.defineProperty((0,p.Z)(a),"name",{value:"Web3AuthError"}),a}return(0,f.Z)(r,[{key:"toJSON",value:function(){return{name:this.name,code:this.code,message:this.message}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),r}(b.s),R=function(e){(0,d.Z)(r,e);var t=I(r);function r(e,n){var a;return(0,u.Z)(this,r),a=t.call(this,e,n),Object.defineProperty((0,p.Z)(a),"name",{value:"WalletInitializationError"}),a}return(0,f.Z)(r,null,[{key:"fromCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new r(e,"".concat(r.messages[e],", ").concat(t))}},{key:"notFound",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5001,e)}},{key:"notInstalled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5002,e)}},{key:"notReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5003,e)}},{key:"windowBlocked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5004,e)}},{key:"windowClosed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5005,e)}},{key:"incompatibleChainNameSpace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5006,e)}},{key:"duplicateAdapterError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5007,e)}},{key:"invalidProviderConfigError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5008,e)}},{key:"providerNotReadyError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5009,e)}},{key:"rpcConnectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5010,e)}},{key:"invalidParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5011,e)}},{key:"invalidNetwork",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5013,e)}}]),r}(Z);(0,g.Z)(R,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});var B=function(e){(0,d.Z)(r,e);var t=I(r);function r(e,n){var a;return(0,u.Z)(this,r),a=t.call(this,e,n),Object.defineProperty((0,p.Z)(a),"name",{value:"WalletLoginError"}),a}return(0,f.Z)(r,null,[{key:"fromCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new r(e,"".concat(r.messages[e]).concat(t))}},{key:"connectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5111,e)}},{key:"disconnectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5112,e)}},{key:"notConnectedError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5113,e)}},{key:"popupClosed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5114,e)}}]),r}(Z);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach(function(t){(0,g.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(0,g.Z)(B,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user"});var M={OPENLOGIN:"openlogin",WALLET_CONNECT_V1:"wallet-connect-v1",WALLET_CONNECT_V2:"wallet-connect-v2"},L=D({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLLET:"sollet",SOLLET_EXTENSION:"sollet-extension",SOLFLARE:"solflare",SLOPE:"slope"},M),G=D({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},M),H=D(D({},G),L);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach(function(t){(0,g.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var U={EXTERNAL:"external",IN_APP:"in_app"},V={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},q=K(K({},V),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated"}),W=function(e){(0,d.Z)(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,v.Z)(n);if(t){var a=(0,v.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function n(){var e;(0,u.Z)(this,n);for(var t=arguments.length,a=Array(t),i=0;i<t;i++)a[i]=arguments[i];return e=r.call.apply(r,[this].concat(a)),(0,g.Z)((0,p.Z)(e),"adapterData",{}),(0,g.Z)((0,p.Z)(e),"sessionTime",86400),(0,g.Z)((0,p.Z)(e),"chainConfig",null),e}return(0,f.Z)(n,[{key:"chainConfigProxy",get:function(){return this.chainConfig?K({},this.chainConfig):null}},{key:"setChainConfig",value:function(e){if(this.status!==V.READY){if(!e.chainNamespace)throw R.notReady("ChainNamespace is required while setting chainConfig");var t=S(e.chainNamespace,e.chainId);this.chainConfig=K(K({},t),e)}}},{key:"setAdapterSettings",value:function(e){}},{key:"checkConnectionRequirements",value:function(){if(this.name!==H.WALLET_CONNECT_V1||this.status!==V.CONNECTING){if(this.status===V.CONNECTING)throw R.notReady("Already connecting");if(this.status===V.CONNECTED)throw B.connectionError("Already connected");if(this.status!==V.READY)throw B.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function");if(!this.clientId)throw B.connectionError("Please initialize Web3Auth with a valid clientId in constructor")}}},{key:"checkInitializationRequirements",value:function(){if(this.status!==V.NOT_READY){if(this.status===V.CONNECTED)throw R.notReady("Already connected");if(this.status===V.READY)throw R.notReady("Adapter is already initialized")}}},{key:"updateAdapterData",value:function(e){this.adapterData=e,this.emit(q.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}}]),n}(x.Ue),z="https://authjs.web3auth.io",Y=C().getLogger("web3auth-logger");function J(e){var t,r=!1,n=0;try{t=window[e],r=!0,n=t.length;var a="__storage_test__";return t.setItem(a,a),t.removeItem(a),!0}catch(i){return!!(i&&(22===i.code||1014===i.code||"QuotaExceededError"===i.name||"NS_ERROR_DOM_QUOTA_REACHED"===i.name)&&r&&0!==n)}}var X=function(e){return("string"==typeof e||"number"==typeof e)&&/^(-)?0x[0-9a-f]*$/i.test(e)},$=function(e){var t=(0,P.Z)(e);return!!(!t.exp||t.exp<Math.floor(Date.now()/1e3))},Q=(n=(0,c.Z)(m().mark(function e(t,r){var n,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={payload:t,header:{t:"solana"===r?"sip99":"eip191"},network:"solana"===r?"solana":"ethereum"},e.next=6,(0,k.v_)("".concat(z,"/siww/get"),n);case 6:if((a=e.sent).success){e.next=9;break}throw Error("Failed to authenticate user, Please reach out to Web3Auth Support team");case 9:return e.abrupt("return",a.challenge);case 10:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)}),ee=(a=(0,c.Z)(m().mark(function e(t,r,n,a,i,o){var s,c;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={signature:{s:r,t:"solana"===t?"sip99":"eip191"},message:n,issuer:a,audience:window.location.hostname,timeout:i},e.next=4,(0,k.v_)("".concat(z,"/siww/verify"),s,{headers:{client_id:o,wallet_provider:a}});case 4:if((c=e.sent).success){e.next=8;break}throw Y.error("Failed to authenticate user, ,message verification failed",c.error),Error("Failed to authenticate user, ,message verification failed");case 8:return e.abrupt("return",c.token);case 9:case"end":return e.stop()}},e)})),function(e,t,r,n,i,o){return a.apply(this,arguments)}),et=function(e){(0,d.Z)(i,e);var t,r,n,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,v.Z)(i);if(t){var n=(0,v.Z)(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.Z)(this,i),e=a.call(this),(0,g.Z)((0,p.Z)(e),"clientId",void 0),e.clientId=t.clientId,e}return(0,f.Z)(i,[{key:"authenticateUser",value:(r=(0,c.Z)(m().mark(function e(){var t,r,n,a,i,o,s,c,u,f;return m().wrap(function(e){for(var p,h,d,l;;)switch(e.prev=e.next){case 0:if(!(!this.provider||!(null!==(t=this.chainConfig)&&void 0!==t&&t.chainId))){e.next=2;break}throw B.notConnectedError();case 2:if(n=(r=this.chainConfig).chainNamespace,a=r.chainId,!(this.status!==V.CONNECTED)){e.next=5;break}throw B.notConnectedError("Not connected with wallet, Please login/connect first");case 5:return e.next=7,this.provider.request({method:"eth_accounts"});case 7:if(!((i=e.sent)&&i.length>0)){e.next=26;break}if(p=i[0],h=this.name,!(o=J("localStorage")?localStorage.getItem("".concat(p.toLowerCase(),"_").concat(h)):null)||$(o)){e.next=14;break}return e.abrupt("return",{idToken:o});case 14:return s={domain:window.location.origin,uri:window.location.href,address:i[0],chainId:parseInt(a,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},e.next=17,Q(s,n);case 17:return c=e.sent,e.next=20,this.provider.request({method:"personal_sign",params:[c,i[0]]});case 20:return u=e.sent,e.next=23,ee(n,u,c,this.name,this.sessionTime,this.clientId);case 23:return f=e.sent,d=i[0],l=this.name,J("localStorage")&&localStorage.setItem("".concat(d.toLowerCase(),"_").concat(l),f),e.abrupt("return",{idToken:f});case 26:throw B.notConnectedError("Not connected with wallet, Please login/connect first");case 27:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"disconnect",value:(n=(0,c.Z)(m().mark(function e(){var t;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.status!==V.CONNECTED)){e.next=2;break}throw B.disconnectionError("Not connected with wallet");case 2:return e.next=4,this.provider.request({method:"eth_accounts"});case 4:if((t=e.sent)&&t.length>0){var r,n;r=t[0],n=this.name,J("localStorage")&&localStorage.removeItem("".concat(r.toLowerCase(),"_").concat(n))}case 6:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})}]),i}(W),er=r(22782),en=r(79826),ea=r(23420),ei=r.n(ea);function eo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function es(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(r),!0).forEach(function(t){(0,g.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eo(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ec=function(e){(0,d.Z)(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,v.Z)(n);if(t){var a=(0,v.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function n(e){var t,a,i=e.config,o=e.state;if((0,u.Z)(this,n),a=r.call(this,{config:i,state:o}),(0,g.Z)((0,p.Z)(a),"_providerEngineProxy",null),!i.chainConfig)throw R.invalidProviderConfigError("Please provide chainConfig");if(!i.chainConfig.chainId)throw R.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!i.chainConfig.rpcTarget)throw R.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");return a.defaultState={chainId:"loading"},a.defaultConfig={chainConfig:i.chainConfig,networks:(0,g.Z)({},i.chainConfig.chainId,i.chainConfig)},(0,h.Z)((t=(0,p.Z)(a),(0,v.Z)(n.prototype)),"initialize",t).call(t),a}return(0,f.Z)(n,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(e){throw Error("Method not implemented.")}},{key:"addChain",value:function(e){if(!e.chainId||!e.rpcTarget)throw en.ethErrors.rpc.invalidParams("chainId is required");this.configure({networks:es(es({},this.config.networks),{},(0,g.Z)({},e.chainId,e))})}},{key:"getChainConfig",value:function(e){var t,r=null===(t=this.config.networks)||void 0===t?void 0:t[e];if(!r)throw en.ethErrors.rpc.invalidRequest("Chain ".concat(e," is not supported, please add chainConfig for it"));return r}},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=(0,er.qY)(e)}}]),n}(er.xG),eu=function(){var e,t;function r(){(0,u.Z)(this,r),(0,g.Z)(this,"_providerEngineProxy",null)}return(0,f.Z)(r,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(e){throw Error("Method not implemented.")}},{key:"addChain",value:function(e){throw Error("Method not implemented.")}},{key:"setupProvider",value:(e=(0,c.Z)(m().mark(function e(t){var r,n,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this.getPrivKeyMiddleware(t),(n=new x.eI).push(r),a=(0,er.Xj)(n),this.updateProviderEngineProxy(a);case 5:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"switchChain",value:(t=(0,c.Z)(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=(0,er.qY)(e)}},{key:"getPrivKeyMiddleware",value:function(e){var t,r={getPrivatekey:(t=(0,c.Z)(m().mark(function t(){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)})};return this.createPrivKeyMiddleware(r)}},{key:"createPrivKeyMiddleware",value:function(e){var t=e.getPrivatekey;function r(){return(r=(0,c.Z)(m().mark(function e(r,n){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:n.result=e.sent;case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}return(0,x.v0)({private_key:(0,x.Pk)(function(e,t){return r.apply(this,arguments)})})}}]),r}();(0,g.Z)(eu,"getProviderInstance",(i=(0,c.Z)(m().mark(function e(t){var r;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new eu,e.next=3,r.setupProvider(t.privKey);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})),ei()();var ef=r(66052),ep=r(51091),eh=r(62671),ed=r(71002),el=r(69282),ev=r.n(el),eg=r(40660),ey=r(70794),em=r(2832),ew=r.n(em),ex=r(48764).Buffer;function eb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ek(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eb(Object(r),!0).forEach(function(t){(0,g.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eb(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eP(e){return 42===e.length}function eE(e){var t=e.getAccounts,r=e.getPrivateKey,n=e.processTransaction,a=e.processSignTransaction,i=e.processEthSignMessage,o=e.processTypedMessage,s=e.processTypedMessageV3,u=e.processTypedMessageV4,f=e.processPersonalMessage,p=e.processEncryptionPublicKey,h=e.processDecryptMessage;return(0,x.UZ)([(0,x.v0)({eth_syncing:!1}),function(e){var t=e.getAccounts,r=e.getPrivateKey,n=e.processDecryptMessage,a=e.processEncryptionPublicKey,i=e.processEthSignMessage,o=e.processPersonalMessage,s=e.processTransaction,u=e.processSignTransaction,f=e.processTypedMessage,p=e.processTypedMessageV3,h=e.processTypedMessageV4;if(!t)throw Error("opts.getAccounts is required");function d(e,t){return l.apply(this,arguments)}function l(){return(l=(0,c.Z)(m().mark(function e(r,n){var a,i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("string"==typeof r&&r.length>0)){e.next=8;break}return e.next=3,t(n);case 3:if(a=e.sent.map(function(e){return e.toLowerCase()}),i=r.toLowerCase(),!a.includes(i)){e.next=8;break}return e.abrupt("return",i);case 8:throw en.ethErrors.rpc.invalidParams({message:"Invalid parameters: must provide an Ethereum address."});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function v(){return(v=(0,c.Z)(m().mark(function e(r,n){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(r);case 2:n.result=e.sent;case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(){return(g=(0,c.Z)(m().mark(function e(r,n){var a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(r);case 2:a=e.sent,n.result=a[0]||null;case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function y(){return(y=(0,c.Z)(m().mark(function e(t,r){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}throw en.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0]||{from:""},e.next=5,d(n.from,t);case 5:return n.from=e.sent,e.next=8,s(n,t);case 8:r.result=e.sent;case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(){return(w=(0,c.Z)(m().mark(function e(t,r){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}throw en.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0]||{from:""},e.next=5,d(n.from,t);case 5:return n.from=e.sent,e.next=8,u(n,t);case 8:r.result=e.sent;case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function b(){return(b=(0,c.Z)(m().mark(function e(t,r){var n,a,o;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}throw en.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,d(t.params[0],t);case 4:return n=e.sent,a=t.params[1],o=ek(ek({},t.params[2]||{}),{},{from:n,data:a}),e.next=10,i(o,t);case 10:r.result=e.sent;case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(){return(k=(0,c.Z)(m().mark(function e(t,r){var n,a,i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}throw en.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0],e.next=5,d(t.params[1],t);case 5:return a=e.sent,i=ek(ek({},t.params[2]||{}),{},{from:a,data:n}),e.next=11,f(i,t,"V1");case 11:r.result=e.sent;case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(){return(P=(0,c.Z)(m().mark(function e(t,r){var n,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}throw en.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,d(t.params[0],t);case 4:return n=e.sent,a={data:t.params[1],from:n,version:"V3"},e.next=10,p(a,t,"V3");case 10:r.result=e.sent;case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(){return(E=(0,c.Z)(m().mark(function e(t,r){var n,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}throw en.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,d(t.params[0],t);case 4:return n=e.sent,a={data:t.params[1],from:n,version:"V4"},e.next=10,h(a,t,"V4");case 10:r.result=e.sent;case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(){return(C=(0,c.Z)(m().mark(function e(t,r){var n,a,i,s,c,u,f;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}throw en.ethErrors.rpc.methodNotSupported();case 2:return n=t.params[0],a=t.params[1],i=t.params[2]||{},eP(n)&&!eP(a)?(u="The eth_personalSign method requires params ordered ",u+="[message, address]. This was previously handled incorrectly, ",u+="and has been corrected automatically. ",u+="Please switch this param order for smooth behavior in the future.",r.warning=u,s=n,c=a):(c=n,s=a),e.next=8,d(s,t);case 8:return s=e.sent,f=ek(ek({},i),{},{from:s,data:c}),e.next=12,o(f,t);case 12:r.result=e.sent;case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(){return(O=(0,c.Z)(m().mark(function e(t,r){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}throw en.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,d(t.params[0],t);case 4:return n=e.sent,e.next=7,a(n,t);case 7:r.result=e.sent;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(){return(N=(0,c.Z)(m().mark(function e(t,r){var a,i,o;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw en.ethErrors.rpc.methodNotSupported();case 2:return a=t.params[0],e.next=5,d(t.params[1],t);case 5:i=e.sent,o=ek(ek({},t.params[2]||{}),{},{from:i,data:a}),r.result=n(o,t);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(){return(T=(0,c.Z)(m().mark(function e(t,n){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw en.ethErrors.rpc.methodNotSupported();case 2:n.result=r(t);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}return(0,x.v0)({eth_accounts:(0,x.Pk)(function(e,t){return v.apply(this,arguments)}),eth_private_key:(0,x.Pk)(function(e,t){return T.apply(this,arguments)}),eth_coinbase:(0,x.Pk)(function(e,t){return g.apply(this,arguments)}),eth_sendTransaction:(0,x.Pk)(function(e,t){return y.apply(this,arguments)}),eth_signTransaction:(0,x.Pk)(function(e,t){return w.apply(this,arguments)}),eth_sign:(0,x.Pk)(function(e,t){return b.apply(this,arguments)}),eth_signTypedData:(0,x.Pk)(function(e,t){return k.apply(this,arguments)}),eth_signTypedData_v3:(0,x.Pk)(function(e,t){return P.apply(this,arguments)}),eth_signTypedData_v4:(0,x.Pk)(function(e,t){return E.apply(this,arguments)}),personal_sign:(0,x.Pk)(function(e,t){return C.apply(this,arguments)}),eth_getEncryptionPublicKey:(0,x.Pk)(function(e,t){return O.apply(this,arguments)}),eth_decrypt:(0,x.Pk)(function(e,t){return N.apply(this,arguments)})})}({getAccounts:t,getPrivateKey:r,processTransaction:n,processEthSignMessage:i,processSignTransaction:a,processTypedMessage:o,processTypedMessageV3:s,processTypedMessageV4:u,processPersonalMessage:f,processEncryptionPublicKey:p,processDecryptMessage:h})])}function eC(e){var t=e.chainId,r=e.rpcTarget,n=(0,er.v$)({rpcTarget:r});return{networkMiddleware:(0,x.UZ)([function(e,r,n,a){return"eth_chainId"===e.method?(r.result=t,a()):n()},function(t,r,n,a){return"eth_provider_config"===t.method?(r.result=e,a()):n()},n]),fetchMiddleware:n}}function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eO(Object(r),!0).forEach(function(t){(0,g.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eT=function(e){(0,d.Z)(b,e);var t,r,n,a,i,o,s,y,w=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,v.Z)(b);if(t){var n=(0,v.Z)(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function b(e){var t,r=e.config,n=e.state,a=e.connector;return(0,u.Z)(this,b),t=w.call(this,{config:{chainConfig:eN(eN({},r.chainConfig),{},{chainNamespace:O.EIP155}),skipLookupNetwork:!!r.skipLookupNetwork},state:eN(eN({},n||{}),{},{chainId:"loading",accounts:[]})}),(0,g.Z)((0,p.Z)(t),"connector",null),t.connector=a||null,t}return(0,f.Z)(b,[{key:"enable",value:(r=(0,c.Z)(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connector){e.next=2;break}throw en.ethErrors.provider.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});case 2:return e.next=4,this.setupProvider(this.connector);case 4:return e.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"setupProvider",value:(n=(0,c.Z)(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.onConnectorStateUpdate(t),e.next=3,this.setupEngine(t);case 3:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"switchChain",value:(a=(0,c.Z)(m().mark(function e(t){var r,n,a,i,o,s,c,u;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.chainId,a=void 0===(n=t.addChain)||n,o=void 0===(i=t.lookup)||i,this.connector){e.next=3;break}throw en.ethErrors.provider.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});case 3:if(s=this.getChainConfig(r),this.update({chainId:"loading"}),c=s.rpcTarget,u=s.displayName,!a){e.next=15;break}return e.prev=7,e.next=10,this.connector.sendCustomRequest({method:"wallet_addEthereumChain",params:[{chainId:r,chainName:u,rpcUrls:[c]}]});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),Y.error(e.t0);case 15:return e.prev=15,e.next=18,this.connector.sendCustomRequest({method:"wallet_switchEthereumChain",params:[{chainId:r}]});case 18:e.next=25;break;case 20:if(e.prev=20,e.t1=e.catch(15),Y.error(e.t1),!("JSON RPC response format is invalid"!==e.t1.message)){e.next=25;break}throw e.t1;case 25:if(this.configure({chainConfig:s}),!o){e.next=29;break}return e.next=29,this.lookupNetwork(this.connector);case 29:case"end":return e.stop()}},e,this,[[7,12],[15,20]])})),function(e){return a.apply(this,arguments)})},{key:"addChain",value:(i=(0,c.Z)(m().mark(function e(t){var r,n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connector){e.next=2;break}throw R.notReady("Wallet adapter is not ready yet");case 2:return r=t.rpcTarget,n=t.displayName,e.prev=3,e.next=6,this.connector.sendCustomRequest({method:"wallet_addEthereumChain",params:[{chainId:t.chainId,chainName:n,rpcUrls:[r]}]});case 6:(0,h.Z)((0,v.Z)(b.prototype),"addChain",this).call(this,t),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(3),Y.error(e.t0),e.t0;case 13:case"end":return e.stop()}},e,this,[[3,9]])})),function(e){return i.apply(this,arguments)})},{key:"lookupNetwork",value:(o=(0,c.Z)(m().mark(function e(t){var r,n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.connected){e.next=2;break}throw B.notConnectedError("Wallet connect connector is not connected");case 2:if(this.provider){e.next=4;break}throw en.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 4:if(!((r=this.config.chainConfig.chainId)!==(n=X(t.chainId.toString())?t.chainId:"0x".concat(t.chainId.toString(16))))){e.next=8;break}throw R.rpcConnectionError("Invalid network, net_version is: ".concat(n,", expected: ").concat(r));case 8:return this.provider.emit("connect",{chainId:r}),this.provider.emit("chainChanged",this.state.chainId),e.abrupt("return",n);case 11:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"setupEngine",value:(s=(0,c.Z)(m().mark(function e(t){var r,n,a,i,o;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(e){var t,r,n,a,i,o,s,u,f,p,h=e.connector;return{getPrivateKey:(t=(0,c.Z)(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw en.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),getAccounts:(r=(0,c.Z)(m().mark(function e(t){var r;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=h.accounts)&&r.length)){e.next=3;break}return e.abrupt("return",r);case 3:throw Error("Failed to get accounts");case 4:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),processTransaction:(n=(0,c.Z)(m().mark(function e(t,r){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.sendTransaction(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)}),processSignTransaction:(a=(0,c.Z)(m().mark(function e(t,r){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.signTransaction(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)}),processEthSignMessage:(i=(0,c.Z)(m().mark(function e(t,r){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.signMessage([t.from,t.data]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)}),processPersonalMessage:(o=(0,c.Z)(m().mark(function e(t,r){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.signPersonalMessage([t.data,t.from]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)}),processTypedMessage:(s=(0,c.Z)(m().mark(function e(t,r){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.signTypedData([t.from,t.data]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)})),function(e,t){return s.apply(this,arguments)}),processTypedMessageV3:(u=(0,c.Z)(m().mark(function e(t){var r;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.signTypedData([t.from,t.data]);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)})),function(e){return u.apply(this,arguments)}),processTypedMessageV4:(f=(0,c.Z)(m().mark(function e(t){var r;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.signTypedData([t.from,t.data]);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)})),function(e){return f.apply(this,arguments)}),processEncryptionPublicKey:(p=(0,c.Z)(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw en.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}},e)})),function(e){return p.apply(this,arguments)}),processDecryptMessage:function(e){throw en.ethErrors.rpc.methodNotSupported()}}}({connector:t}),this.update({accounts:t.accounts||[]}),n=eE(r),a=new x.eI,i=eC(this.config.chainConfig).networkMiddleware,a.push(n),a.push(i),o=(0,er.Xj)(a),this.updateProviderEngineProxy(o),this.config.skipLookupNetwork){e.next=12;break}return e.next=12,this.lookupNetwork(t);case 12:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"onConnectorStateUpdate",value:(y=(0,c.Z)(m().mark(function e(t){var r=this;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.on("session_update",function(){var e=(0,c.Z)(m().mark(function e(n,a){var i,o,s,c,u,f;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.provider){e.next=2;break}throw B.notConnectedError("Wallet connect connector is not connected");case 2:if(!n){e.next=5;break}return r.provider.emit("error",n),e.abrupt("return");case 5:if(o=(i=a.params[0]).accounts,s=i.chainId,c=i.rpcUrl,null!=o&&o.length&&r.state.accounts[0]!==o[0]&&(r.update({accounts:o}),r.provider.emit("accountsChanged",o)),u="0x".concat(s.toString(16)),!(s&&r.state.chainId!==u)){e.next=13;break}return f=S(O.EIP155,s)||{},r.configure({chainConfig:eN(eN({},f),{},{chainId:u,rpcTarget:c,chainNamespace:O.EIP155})}),e.next=13,r.setupEngine(t);case 13:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e)})),function(e){return y.apply(this,arguments)})}]),b}(ec);(0,g.Z)(eT,"getProviderInstance",(o=(0,c.Z)(m().mark(function e(t){var r;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new eT({config:{chainConfig:t.chainConfig,skipLookupNetwork:t.skipLookupNetwork}}),e.next=3,r.setupProvider(t.connector);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}));var e_=new ey.Z("1e18"),eA=new ey.Z("1e9"),eS=new ey.Z("1"),eI={hex:function(e){return"string"==typeof e?new ey.Z((0,eh.stripHexPrefix)(e),16):new ey.Z(e,16)},dec:function(e){return new ey.Z(e,10)}},eZ={WEI:function(e){return e.div(e_)},GWEI:function(e){return e.div(eA)},ETH:function(e){return e.div(eS)}},eR={WEI:function(e){return e.times(e_).dp(0,ey.Z.ROUND_HALF_UP)},GWEI:function(e){return e.times(eA).dp(9,ey.Z.ROUND_HALF_UP)},ETH:function(e){return e.times(eS).dp(9,ey.Z.ROUND_HALF_UP)}},eB={hex:function(e){return e.toString(16)},dec:function(e){return new ey.Z(e).toString(10)}},ej=function(e){var t=e.value,r=e.fromNumericBase,n=e.fromDenomination,a=e.toNumericBase,i=e.toDenomination,o=e.numberOfDecimals,s=eI[r](t);return n&&(s=eZ[n](s)),i&&(s=eR[i](s)),o&&(s=s.dp(o,ey.Z.ROUND_HALF_DOWN)),a&&(s=eB[a](s)),s},eD=function(e,t){var r=t.fromNumericBase;return ej({fromNumericBase:void 0===r?"hex":r,toNumericBase:t.toNumericBase,fromDenomination:t.fromDenomination,toDenomination:t.toDenomination,numberOfDecimals:t.numberOfDecimals,value:e||"0"})};function eM(e){return eD(e,{fromNumericBase:"dec",toNumericBase:"hex",fromDenomination:"GWEI",toDenomination:"WEI"})}function eL(e){return eD(e,{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"WEI",toDenomination:"GWEI"})}function eG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eG(Object(r),!0).forEach(function(t){(0,g.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eG(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eF(e){return eL(eM(e))}function eK(){return(eK=(0,c.Z)(m().mark(function e(t){var r,n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.U2)(t);case 2:return n=eH(eH({},r=e.sent),{},{estimatedBaseFee:eF(r.estimatedBaseFee),low:eH(eH({},r.low),{},{suggestedMaxPriorityFeePerGas:eF(r.low.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:eF(r.low.suggestedMaxFeePerGas)}),medium:eH(eH({},r.medium),{},{suggestedMaxPriorityFeePerGas:eF(r.medium.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:eF(r.medium.suggestedMaxFeePerGas)}),high:eH(eH({},r.high),{},{suggestedMaxPriorityFeePerGas:eF(r.high.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:eF(r.high.suggestedMaxFeePerGas)})}),e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function eU(){return(eU=(0,c.Z)(m().mark(function e(t){var r;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.U2)(t,{referrer:t,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors"});case 2:return r=e.sent,e.abrupt("return",{low:r.SafeGasPrice,medium:r.ProposeGasPrice,high:r.FastGasPrice});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var eV=function(e,t){var r;try{ev().ok(e&&"object"===(0,ed.Z)(e),"Params must be an object."),ev().ok("data"in e,'Params must include a "data" field.'),ev().ok("from"in e,'Params must include a "from" field.'),ev().ok("string"==typeof e.from&&(0,eh.isValidAddress)(e.from),'"from" field must be a valid, lowercase, hexadecimal Ethereum address string.');var n=null,a=null;switch(e.version){case ep.SignTypedDataVersion.V1:"string"==typeof e.data?ev().doesNotThrow(function(){n=JSON.parse(e.data)},'"data" must be a valid JSON string.'):n=e.data,ev().ok(Array.isArray(n),"params.data must be an array."),ev().doesNotThrow(function(){(0,ep.typedSignatureHash)(n)},"Signing data must be valid EIP-712 typed data.");break;case ep.SignTypedDataVersion.V3:case ep.SignTypedDataVersion.V4:"string"==typeof e.data?ev().doesNotThrow(function(){n=JSON.parse(e.data)},'"data" must be a valid JSON string.'):n=e.data,ev().ok(n.primaryType in n.types,'Primary type of "'.concat(n.primaryType,'" has no type definition.'));var i=eg.validate(n,ep.TYPED_MESSAGE_SCHEMA.properties);ev().strictEqual(i.errors.length,0,"Signing data must conform to EIP-712 schema. See https://git.io/fNtcx."),(a=null===(r=n.domain)||void 0===r?void 0:r.chainId)&&(ev().ok(!Number.isNaN(t),'Cannot sign messages for chainId "'.concat(a,'", because Web3Auth is switching networks.')),"string"==typeof a&&(a=Number.parseInt(a,X(a)?16:10)),ev().strictEqual(a,t,'Provided chainId "'.concat(a,'" must match the active chainId "').concat(t,'"')));break;default:ev().fail('Unknown typed data version "'.concat(e.version,'"'))}}catch(o){throw en.ethErrors.rpc.invalidInput({message:null==o?void 0:o.message})}};function eq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eq(Object(r),!0).forEach(function(t){(0,g.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ez(e,t,r){return eY.apply(this,arguments)}function eY(){return(eY=(0,c.Z)(m().mark(function e(t,r,n){var a,i,o;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.formatTransaction(t);case 2:return a=e.sent,e.next=5,n.getCommonConfiguration();case 5:return i=e.sent,o=ef.TransactionFactory.fromTxData(a,{common:i}).sign(ex.from(r,"hex")).serialize(),e.abrupt("return",o);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function eJ(e){return(0,eh.addHexPrefix)(e.toString(16))}function eX(e){return eh.BN.isBN(e)?e:new eh.BN((0,eh.stripHexPrefix)(e),16)}var e$={LEGACY:"0x0",ACCESS_LIST:"0x1",FEE_MARKET:"0x2"},eQ={SENT_ETHER:"sentEther",CONTRACT_INTERACTION:"contractInteraction",DEPLOY_CONTRACT:"contractDeployment",STANDARD_TRANSACTION:"transaction"},e0={FEE_MARKET:"fee-market",LEGACY:"legacy",ETH_GASPRICE:"eth_gasPrice",NONE:"none"};function e1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function e2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e1(Object(r),!0).forEach(function(t){(0,g.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e1(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var e5=function(){var e,t,r,n,a,i,o,s,p,h,d;function l(e){var t=e.getProviderEngineProxy;(0,u.Z)(this,l),(0,g.Z)(this,"chainConfig",null),(0,g.Z)(this,"getProviderEngineProxy",void 0),(0,g.Z)(this,"isEIP1559Compatible",!1),this.getProviderEngineProxy=t}return(0,f.Z)(l,[{key:"providerProxy",get:function(){return this.getProviderEngineProxy()}},{key:"init",value:(e=(0,c.Z)(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_provider_config",params:[]});case 2:return this.chainConfig=e.sent,e.next=5,this.getEIP1559Compatibility();case 5:this.isEIP1559Compatible=e.sent;case 6:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"getCommonConfiguration",value:(t=(0,c.Z)(m().mark(function e(){var t,r,n,a,i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw Error("Chain config not initialized");case 2:return r=(t=this.chainConfig).displayName,n=t.chainId,a=this.isEIP1559Compatible?em.Hardfork.London:em.Hardfork.Berlin,i={name:r,chainId:"loading"===n?0:Number.parseInt(n,16),networkId:"loading"===n?0:Number.parseInt(n,16),defaultHardfork:a},e.abrupt("return",ew().custom(i));case 6:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"formatTransaction",value:(r=(0,c.Z)(m().mark(function e(t){var r,n,a,i,o,s,c;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw Error("Chain config not initialized");case 2:if(void 0!==(r=e2({},t)).nonce){e.next=7;break}return e.next=6,this.providerProxy.request({method:"eth_getTransactionCount",params:[t.from,"latest"]});case 6:r.nonce=e.sent;case 7:if(!(!this.isEIP1559Compatible&&r.gasPrice)){e.next=19;break}if(r.maxFeePerGas&&delete r.maxFeePerGas,r.maxPriorityFeePerGas&&delete r.maxPriorityFeePerGas,r.gas){e.next=17;break}return e.next=13,this.getDefaultGasLimit(r);case 13:(n=e.sent)&&(r.gasLimit=n),e.next=18;break;case 17:r.gasLimit=r.gas;case 18:return e.abrupt("return",r);case 19:if(r.gas){e.next=26;break}return e.next=22,this.getDefaultGasLimit(r);case 22:(a=e.sent)&&(r.gasLimit=a),e.next=27;break;case 26:r.gasLimit=r.gas;case 27:return e.next=29,this.getDefaultGasFees(r);case 29:if(o=(i=e.sent).gasPrice,s=i.maxFeePerGas,c=i.maxPriorityFeePerGas,this.isEIP1559Compatible){if(!r.gasPrice||r.maxFeePerGas||r.maxPriorityFeePerGas)s&&!r.maxFeePerGas&&(r.maxFeePerGas=s),c&&!r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=c),o&&!r.maxFeePerGas&&(r.maxFeePerGas=o),r.maxFeePerGas&&!r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=r.maxFeePerGas);else{var u,f;r.maxFeePerGas=r.gasPrice,u="string"==typeof c?(0,eh.stripHexPrefix)(c):c,f="string"==typeof r.gasPrice?(0,eh.stripHexPrefix)(r.gasPrice):r.gasPrice,r.maxPriorityFeePerGas=(null==u||null==f?null:new ey.O(u,10).lt(f,10))?c:r.gasPrice}delete r.gasPrice}else delete r.maxPriorityFeePerGas,delete r.maxFeePerGas;return!o||r.gasPrice||r.maxPriorityFeePerGas||r.maxFeePerGas||(r.gasPrice=o),r.type=this.isEIP1559Compatible?e$.FEE_MARKET:e$.LEGACY,r.chainId=this.chainConfig.chainId,e.abrupt("return",r);case 38:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"fetchEthGasPriceEstimate",value:(n=(0,c.Z)(m().mark(function e(){var t;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_gasPrice",params:[]});case 2:return t=e.sent,e.abrupt("return",{gasPrice:eL(t).toString()});case 4:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"getEIP1559Compatibility",value:(a=(0,c.Z)(m().mark(function e(){var t,r;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]});case 2:return r=(t=e.sent)&&void 0!==t.baseFeePerGas,e.abrupt("return",!!r);case 5:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"fetchGasFeeEstimateData",value:(i=(0,c.Z)(m().mark(function e(){var t,r,n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw Error("Chain config not initialized");case 2:if(t="0x1"===this.chainConfig.chainId,r=Number.parseInt(this.chainConfig.chainId,16),e.prev=4,!this.isEIP1559Compatible){e.next=12;break}return e.next=8,function(e){return eK.apply(this,arguments)}("https://gas-api.metaswap.codefi.network/networks/<chain_id>/suggestedGasFees".replace("<chain_id>","".concat(r)));case 8:n={gasFeeEstimates:e.sent,gasEstimateType:e0.FEE_MARKET},e.next=20;break;case 12:if(!t){e.next=19;break}return e.next=15,function(e){return eU.apply(this,arguments)}("https://gas-api.metaswap.codefi.network/networks/<chain_id>/gasPrices".replace("<chain_id>","".concat(r)));case 15:n={gasFeeEstimates:e.sent,gasEstimateType:e0.LEGACY},e.next=20;break;case 19:throw Error("Main gas fee/price estimation failed. Use fallback");case 20:e.next=34;break;case 22:return e.prev=22,e.t0=e.catch(4),e.prev=24,e.next=27,this.fetchEthGasPriceEstimate();case 27:n={gasFeeEstimates:e.sent,gasEstimateType:e0.ETH_GASPRICE},e.next=34;break;case 31:throw e.prev=31,e.t1=e.catch(24),Error("Gas fee/price estimation failed. Message: ".concat(e.t1.message));case 34:return e.abrupt("return",n);case 35:case"end":return e.stop()}},e,this,[[4,22],[24,31]])})),function(){return i.apply(this,arguments)})},{key:"getDefaultGasFees",value:(o=(0,c.Z)(m().mark(function e(t){var r,n,a,i,o,s,c;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!this.isEIP1559Compatible&&t.gasPrice||this.isEIP1559Compatible&&t.maxFeePerGas&&t.maxPriorityFeePerGas)){e.next=2;break}return e.abrupt("return",{});case 2:return e.prev=2,e.next=5,this.fetchGasFeeEstimateData();case 5:if(n=(r=e.sent).gasFeeEstimates,a=r.gasEstimateType,!(this.isEIP1559Compatible&&a===e0.FEE_MARKET)){e.next=16;break}if(o=(i=void 0===(i=n.medium)?{}:i).suggestedMaxPriorityFeePerGas,s=i.suggestedMaxFeePerGas,!(o&&s)){e.next=14;break}return e.abrupt("return",{maxFeePerGas:(0,eh.addHexPrefix)(eM(s)),maxPriorityFeePerGas:(0,eh.addHexPrefix)(eM(o))});case 14:e.next=22;break;case 16:if(a!==e0.LEGACY){e.next=20;break}return e.abrupt("return",{gasPrice:(0,eh.addHexPrefix)(eM(n.medium))});case 20:if(a!==e0.ETH_GASPRICE){e.next=22;break}return e.abrupt("return",{gasPrice:(0,eh.addHexPrefix)(eM(n.gasPrice))});case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),Y.error(e.t0);case 27:return e.next=29,this.fetchEthGasPriceEstimate();case 29:return c=e.sent.gasPrice,e.abrupt("return",{gasPrice:(0,eh.addHexPrefix)(eM(c))});case 32:case"end":return e.stop()}},e,this,[[2,24]])})),function(e){return o.apply(this,arguments)})},{key:"estimateTxGas",value:(s=(0,c.Z)(m().mark(function e(t){var r,n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return delete(r=e2({},t)).gasPrice,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,e.next=6,this.providerProxy.request({method:"eth_estimateGas",params:[r]});case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"analyzeGasUsage",value:(p=(0,c.Z)(m().mark(function e(t){var r,n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]});case 2:return n=eJ(function(e,t,r){var n=new eh.BN(19),a=new eh.BN(20);return e.mul(n).div(a)}(eX((r=e.sent).gasLimit),0,0)),e.prev=6,e.next=9,this.estimateTxGas(t);case 9:n=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),Y.warn(e.t0);case 15:return e.abrupt("return",{blockGasLimit:r.gasLimit,estimatedGasHex:n});case 16:case"end":return e.stop()}},e,this,[[6,12]])})),function(e){return p.apply(this,arguments)})},{key:"addGasBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.5,n=eX(e),a=eX(t).muln(.9),i=n.muln(r);return n.gt(a)?eJ(n):i.lt(a)?eJ(i):eJ(a)}},{key:"determineTransactionCategory",value:(h=(0,c.Z)(m().mark(function e(t){var r,n,a,i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.data,n=t.to,a="",!(r&&!n)){e.next=6;break}i=eQ.DEPLOY_CONTRACT,e.next=17;break;case 6:return e.prev=6,e.next=9,this.providerProxy.request({method:"eth_getCode",params:[n,"latest"]});case 9:a=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),Y.warn(e.t0);case 15:i=a&&"0x"!==a&&"0x0"!==a?eQ.CONTRACT_INTERACTION:eQ.SENT_ETHER;case 17:return e.abrupt("return",{transactionCategory:i,code:a});case 18:case"end":return e.stop()}},e,this,[[6,12]])})),function(e){return h.apply(this,arguments)})},{key:"getDefaultGasLimit",value:(d=(0,c.Z)(m().mark(function e(t){var r,n,a,i,o;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.determineTransactionCategory(e2({},t));case 2:if(r=e.sent.transactionCategory,!t.gas){e.next=6;break}return e.abrupt("return",t.gas);case 6:if(!(t.to&&r===eQ.SENT_ETHER)){e.next=11;break}if(!t.data){e.next=9;break}throw Error("TxGasUtil - Trying to call a function on a non-contract address");case 9:return e.abrupt("return",(0,eh.addHexPrefix)(21e3.toString(16)));case 11:return e.next=13,this.analyzeGasUsage(t);case 13:return a=(n=e.sent).blockGasLimit,i=n.estimatedGasHex,o=this.addGasBuffer((0,eh.addHexPrefix)(i),a),e.abrupt("return",o);case 18:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})}]),l}();function e6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function e4(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e6(Object(r),!0).forEach(function(t){(0,g.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e6(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var e3=function(e){(0,d.Z)(p,e);var t,r,n,a,i,o,s=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,v.Z)(p);if(t){var n=(0,v.Z)(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function p(e){var t=e.config,r=e.state;return(0,u.Z)(this,p),s.call(this,{config:{chainConfig:e4(e4({},t.chainConfig),{},{chainNamespace:O.EIP155})},state:r})}return(0,f.Z)(p,[{key:"enable",value:(r=(0,c.Z)(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.privateKey){e.next=2;break}throw en.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});case 2:return e.next=4,this.setupProvider(this.state.privateKey);case 4:return e.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"setupProvider",value:(n=(0,c.Z)(m().mark(function e(t){var r,n,a,i,o,s;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=eE(function(e){var t,r,n,a,i,o,s,u,f,p,h=e.txFormatter,d=e.privKey,l=e.getProviderEngineProxy;return{getAccounts:(t=(0,c.Z)(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["0x".concat((0,eh.privateToAddress)(ex.from(d,"hex")).toString("hex"))]);case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),getPrivateKey:(r=(0,c.Z)(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d);case 1:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),processTransaction:(n=(0,c.Z)(m().mark(function e(t,r){var n,a,i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l()){e.next=3;break}throw en.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return e.next=5,ez(t,d,h);case 5:return a=e.sent,e.next=8,n.request({method:"eth_sendRawTransaction",params:["0x".concat(a.toString("hex"))]});case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)}),processSignTransaction:(a=(0,c.Z)(m().mark(function e(t,r){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l()){e.next=3;break}throw en.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return e.next=5,ez(t,d,h);case 5:return n=e.sent,e.abrupt("return","0x".concat(n.toString("hex")));case 7:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)}),processEthSignMessage:(i=(0,c.Z)(m().mark(function e(t,r){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,er.l)(d,t.data),e.abrupt("return",n);case 2:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)}),processPersonalMessage:(o=(0,c.Z)(m().mark(function e(t,r){var n,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ex.from(d,"hex"),a=(0,ep.personalSign)({privateKey:n,data:t.data}),e.abrupt("return",a);case 3:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)}),processTypedMessage:(s=(0,c.Z)(m().mark(function e(t,r){var n,a,i,o,s,c,u;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.debug("processTypedMessage",t),n=ex.from(d,"hex"),a=l()){e.next=5;break}throw en.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return e.next=7,a.request({method:"eth_chainId"});case 7:return o=Number.parseInt(i=e.sent,X(i)?16:10),eV(s=eW(eW({},t),{},{version:ep.SignTypedDataVersion.V1}),o),c="string"==typeof s.data?JSON.parse(s.data):s.data,u=(0,ep.signTypedData)({privateKey:n,data:c,version:ep.SignTypedDataVersion.V1}),e.abrupt("return",u);case 14:case"end":return e.stop()}},e)})),function(e,t){return s.apply(this,arguments)}),processTypedMessageV3:(u=(0,c.Z)(m().mark(function e(t,r){var n,a,i,o,s;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.debug("processTypedMessageV3",t),n=ex.from(d,"hex"),a=l()){e.next=5;break}throw en.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return e.next=7,a.request({method:"eth_chainId"});case 7:return eV(t,Number.parseInt(i=e.sent,X(i)?16:10)),o="string"==typeof t.data?JSON.parse(t.data):t.data,s=(0,ep.signTypedData)({privateKey:n,data:o,version:ep.SignTypedDataVersion.V3}),e.abrupt("return",s);case 13:case"end":return e.stop()}},e)})),function(e,t){return u.apply(this,arguments)}),processTypedMessageV4:(f=(0,c.Z)(m().mark(function e(t,r){var n,a,i,o,s;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.debug("processTypedMessageV4",t),n=ex.from(d,"hex"),a=l()){e.next=5;break}throw en.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return e.next=7,a.request({method:"eth_chainId"});case 7:return eV(t,Number.parseInt(i=e.sent,X(i)?16:10)),o="string"==typeof t.data?JSON.parse(t.data):t.data,s=(0,ep.signTypedData)({privateKey:n,data:o,version:ep.SignTypedDataVersion.V4}),e.abrupt("return",s);case 13:case"end":return e.stop()}},e)})),function(e,t){return f.apply(this,arguments)}),processEncryptionPublicKey:(p=(0,c.Z)(m().mark(function e(t,r){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Y.info("processEncryptionPublicKey",t),e.abrupt("return",(0,ep.getEncryptionPublicKey)(d));case 2:case"end":return e.stop()}},e)})),function(e,t){return p.apply(this,arguments)}),processDecryptMessage:function(e,t){Y.info("processDecryptMessage",e);var r=(0,eh.stripHexPrefix)(e.data),n=ex.from(r,"hex");return(0,ep.decrypt)({encryptedData:JSON.parse(n.toString("utf8")),privateKey:d})}}}({txFormatter:r=new e5({getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),privKey:t,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)})),a=this.getChainSwitchMiddleware(),i=new x.eI,o=eC(this.config.chainConfig).networkMiddleware,i.push(n),i.push(a),i.push(this.getAccountMiddleware()),i.push(o),s=(0,er.Xj)(i),this.updateProviderEngineProxy(s),e.next=14,r.init();case 14:return e.next=16,this.lookupNetwork();case 16:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"updateAccount",value:(a=(0,c.Z)(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw en.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return e.next=4,this._providerEngineProxy.request({method:"eth_private_key"});case 4:if(!(e.sent!==t.privateKey)){e.next=14;break}return e.next=8,this.setupProvider(t.privateKey);case 8:return e.t0=this._providerEngineProxy,e.next=11,this._providerEngineProxy.request({method:"eth_accounts"});case 11:e.t1=e.sent,e.t2={accounts:e.t1},e.t0.emit.call(e.t0,"accountsChanged",e.t2);case 14:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"switchChain",value:(i=(0,c.Z)(m().mark(function e(t){var r,n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw en.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return r=this.getChainConfig(t.chainId),this.update({chainId:"loading"}),this.configure({chainConfig:r}),e.next=7,this._providerEngineProxy.request({method:"eth_private_key"});case 7:return n=e.sent,e.next=10,this.setupProvider(n);case 10:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"lookupNetwork",value:(o=(0,c.Z)(m().mark(function e(){var t,r;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw en.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:if(t=this.config.chainConfig.chainId){e.next=5;break}throw en.ethErrors.rpc.invalidParams("chainId is required while lookupNetwork");case 5:return e.next=7,this._providerEngineProxy.request({method:"net_version",params:[]});case 7:if(r=e.sent,!(parseInt(t,16)!==parseInt(r,10))){e.next=10;break}throw en.ethErrors.provider.chainDisconnected("Invalid network, net_version is: ".concat(r));case 10:return this.state.chainId!==t&&(this._providerEngineProxy.emit("chainChanged",t),this._providerEngineProxy.emit("connect",{chainId:t})),this.update({chainId:t}),e.abrupt("return",r);case 13:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"getChainSwitchMiddleware",value:function(){var e,t,r=this;return function(e){var t=e.addChain,r=e.switchChain;function n(){return(n=(0,c.Z)(m().mark(function e(r,n){var a,i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!==(a=r.params)&&void 0!==a&&a.length?r.params[0]:void 0){e.next=3;break}throw en.ethErrors.rpc.invalidParams("Missing chain params");case 3:if(i.chainId){e.next=5;break}throw en.ethErrors.rpc.invalidParams("Missing chainId in chainParams");case 5:if(!(!i.rpcUrls||0===i.rpcUrls.length)){e.next=7;break}throw en.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");case 7:if(i.nativeCurrency){e.next=9;break}throw en.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");case 9:return e.next=11,t(i);case 11:n.result=e.sent;case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function a(){return(a=(0,c.Z)(m().mark(function e(t,n){var a,i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!==(a=t.params)&&void 0!==a&&a.length?t.params[0]:void 0){e.next=3;break}throw en.ethErrors.rpc.invalidParams("Missing chainId");case 3:return e.next=5,r(i);case 5:n.result=e.sent;case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}return(0,x.v0)({wallet_addEthereumChain:(0,x.Pk)(function(e,t){return n.apply(this,arguments)}),wallet_switchEthereumChain:(0,x.Pk)(function(e,t){return a.apply(this,arguments)})})}({addChain:(e=(0,c.Z)(m().mark(function e(t){var n,a,i,o,s;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.chainId,a=t.chainName,i=t.rpcUrls,o=t.blockExplorerUrls,s=t.nativeCurrency,r.addChain({chainNamespace:"eip155",chainId:n,ticker:(null==s?void 0:s.symbol)||"ETH",tickerName:(null==s?void 0:s.name)||"Ether",displayName:a,rpcTarget:i[0],blockExplorer:(null==o?void 0:o[0])||""});case 2:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),switchChain:(t=(0,c.Z)(m().mark(function e(t){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.chainId,e.next=3,r.switchChain({chainId:n});case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})})}},{key:"getAccountMiddleware",value:function(){var e,t=this;return function(e){var t=e.updatePrivatekey;function r(){return(r=(0,c.Z)(m().mark(function e(r,n){var a,i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(i=null!==(a=r.params)&&void 0!==a&&a.length?r.params[0]:void 0)&&i.privateKey){e.next=3;break}throw en.ethErrors.rpc.invalidParams("Missing privateKey");case 3:return e.next=5,t(i);case 5:n.result=e.sent;case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}return(0,x.v0)({wallet_updateAccount:(0,x.Pk)(function(e,t){return r.apply(this,arguments)})})}({updatePrivatekey:(e=(0,c.Z)(m().mark(function e(r){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.privateKey,e.next=3,t.updateAccount({privateKey:n});case 3:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)})})}}]),p}(ec);(0,g.Z)(e3,"getProviderInstance",(s=(0,c.Z)(m().mark(function e(t){var r;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new e3({config:{chainConfig:t.chainConfig}}),e.next=3,r.setupProvider(t.privKey);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)}));var e9=[{name:"Rainbow",chains:[O.EIP155],logo:"https://images.web3auth.io/login-rainbow.svg",mobile:{native:"rainbow:",universal:"https://rnbwapp.com"},desktop:{native:"",universal:""}},{name:"MetaMask",chains:[O.EIP155],logo:"https://images.web3auth.io/login-metamask.svg",mobile:{native:"metamask:",universal:"https://metamask.app.link"},desktop:{native:"",universal:""}}];function e8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var e7=function(e){(0,d.Z)(k,e);var t,r,n,a,i,o,s,y,x,b=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,v.Z)(k);if(t){var n=(0,v.Z)(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function k(e){var t;return(0,u.Z)(this,k),t=b.call(this,e),(0,g.Z)((0,p.Z)(t),"name",H.WALLET_CONNECT_V1),(0,g.Z)((0,p.Z)(t),"adapterNamespace",N.EIP155),(0,g.Z)((0,p.Z)(t),"currentChainNamespace",O.EIP155),(0,g.Z)((0,p.Z)(t),"type",U.EXTERNAL),(0,g.Z)((0,p.Z)(t),"adapterOptions",void 0),(0,g.Z)((0,p.Z)(t),"status",V.NOT_READY),(0,g.Z)((0,p.Z)(t),"adapterData",{uri:"",extensionAdapters:e9}),(0,g.Z)((0,p.Z)(t),"connector",null),(0,g.Z)((0,p.Z)(t),"wcProvider",null),(0,g.Z)((0,p.Z)(t),"rehydrated",!1),t.adapterOptions=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e8(Object(r),!0).forEach(function(t){(0,g.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e8(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e),t.chainConfig=e.chainConfig||null,t.sessionTime=e.sessionTime||86400,t}return(0,f.Z)(k,[{key:"connected",get:function(){var e;return!!(null!==(e=this.connector)&&void 0!==e&&e.connected)}},{key:"provider",get:function(){var e;return(null===(e=this.wcProvider)||void 0===e?void 0:e.provider)||null},set:function(e){throw Error("Not implemented")}},{key:"init",value:(r=(0,c.Z)(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,h.Z)((0,v.Z)(k.prototype),"checkInitializationRequirements",this).call(this),this.chainConfig||(this.chainConfig=S(O.EIP155,1)),this.connector=this.getWalletConnectInstance(),this.wcProvider=new eT({config:{chainConfig:this.chainConfig},connector:this.connector}),this.emit(q.READY,H.WALLET_CONNECT_V1),this.status=V.READY,Y.debug("initializing wallet connect v1 adapter"),!this.connector.connected){e.next=11;break}return this.rehydrated=!0,e.next=11,this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId});case 11:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"connect",value:(n=(0,c.Z)(m().mark(function e(){var t,r,n=this;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,h.Z)((0,v.Z)(k.prototype),"checkConnectionRequirements",this).call(this),this.connector){e.next=3;break}throw R.notReady("Wallet adapter is not ready yet");case 3:if(!this.connected){e.next=7;break}return e.next=6,this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId});case 6:return e.abrupt("return",this.provider);case 7:if(!(this.status!==V.CONNECTING)){e.next=13;break}return null!==(t=this.adapterOptions.adapterSettings)&&void 0!==t&&t.qrcodeModal&&(this.connector=this.getWalletConnectInstance(),this.wcProvider=new eT({config:{chainConfig:this.chainConfig,skipLookupNetwork:null===(r=this.adapterOptions.adapterSettings)||void 0===r?void 0:r.skipNetworkSwitching},connector:this.connector})),e.next=11,this.createNewSession();case 11:this.status=V.CONNECTING,this.emit(q.CONNECTING,{adapter:H.WALLET_CONNECT_V1});case 13:return e.abrupt("return",new Promise(function(e,t){if(!n.connector)return t(R.notReady("Wallet adapter is not ready yet"));n.connector.on("modal_closed",(0,c.Z)(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.status=V.READY,n.emit(q.READY,H.WALLET_CONNECT_V1),e.abrupt("return",t(Error("User closed modal")));case 3:case"end":return e.stop()}},e)})));try{n.connector.on("connect",function(){var t=(0,c.Z)(m().mark(function t(r,a){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r&&n.emit(q.ERRORED,r),Y.debug("connected event emitted by web3auth"),t.next=4,n.onConnectHandler(a.params[0]);case 4:return t.abrupt("return",e(n.provider));case 5:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}())}catch(r){Y.error("Wallet connect v1 adapter error while connecting",r),n.status=V.READY,n.rehydrated=!0,n.emit(q.ERRORED,r),t(r instanceof Z?r:B.connectionError("Failed to login with wallet connect: ".concat((null==r?void 0:r.message)||"")))}}));case 14:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"setAdapterSettings",value:function(e){this.status!==V.READY&&(null!=e&&e.sessionTime&&(this.sessionTime=e.sessionTime),null!=e&&e.clientId&&(this.clientId=e.clientId))}},{key:"getUserInfo",value:(a=(0,c.Z)(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connected){e.next=2;break}throw B.notConnectedError("Not connected with wallet, Please login/connect first");case 2:return e.abrupt("return",{});case 3:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"disconnect",value:(i=(0,c.Z)(m().mark(function e(){var t,r=arguments;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(r.length>0&&void 0!==r[0]?r[0]:{cleanup:!1}).cleanup,!(!this.connector||!this.connected)){e.next=4;break}throw B.notConnectedError("Not connected with wallet");case 4:return e.next=6,(0,h.Z)((0,v.Z)(k.prototype),"disconnect",this).call(this);case 6:return e.next=8,this.connector.killSession();case 8:this.rehydrated=!1,t?(this.connector=null,this.status=V.NOT_READY,this.wcProvider=null):this.status=V.READY,this.emit(q.DISCONNECTED);case 11:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"addChain",value:(o=(0,c.Z)(m().mark(function e(t){var r,n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.wcProvider){e.next=3;break}throw R.notReady("Wallet adapter is not ready yet");case 3:if(!(n=null===(r=this.adapterOptions.adapterSettings)||void 0===r?void 0:r.networkSwitchModal)){e.next=7;break}return e.next=7,n.addNetwork({chainConfig:t,appOrigin:window.location.hostname});case 7:return e.next=9,this.wcProvider.addChain(t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Y.error(e.t0);case 14:case"end":return e.stop()}},e,this,[[0,11]])})),function(e){return o.apply(this,arguments)})},{key:"switchChain",value:(s=(0,c.Z)(m().mark(function e(t,r){var n,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.wcProvider){e.next=2;break}throw R.notReady("Wallet adapter is not ready yet");case 2:if(!(a=null===(n=this.adapterOptions.adapterSettings)||void 0===n?void 0:n.networkSwitchModal)){e.next=6;break}return e.next=6,a.switchNetwork({currentChainConfig:r,newChainConfig:t,appOrigin:window.location.hostname});case 6:return e.next=8,this.wcProvider.switchChain({chainId:r.chainId,lookup:!1,addChain:!1});case 8:case"end":return e.stop()}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"createNewSession",value:(y=(0,c.Z)(m().mark(function e(){var t,r,n,a,i=this,o=arguments;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>0&&void 0!==o[0]?o[0]:{forceNewSession:!1},this.connector){e.next=3;break}throw R.notReady("Wallet adapter is not ready yet");case 3:if(!(n.forceNewSession&&this.connector.pending)){e.next=6;break}return e.next=6,this.connector.killSession();case 6:if(!(null!==(t=this.adapterOptions)&&void 0!==t&&null!==(r=t.adapterSettings)&&void 0!==r&&r.qrcodeModal)){e.next=10;break}return e.next=9,this.connector.createSession({chainId:parseInt((null===(a=this.chainConfig)||void 0===a?void 0:a.chainId)||"0x1",16)});case 9:return e.abrupt("return");case 10:return e.abrupt("return",new Promise(function(e,t){var r;if(!i.connector)return t(R.notReady("Wallet adapter is not ready yet"));Y.debug("creating new session for web3auth wallet connect"),i.connector.on("display_uri",function(){var r=(0,c.Z)(m().mark(function r(n,a){var o,s;return m().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!n){r.next=3;break}return i.emit(q.ERRORED,B.connectionError("Failed to display wallet connect qr code")),r.abrupt("return",t(n));case 3:return s=a.params[0],i.updateAdapterData({uri:s,extensionAdapters:e9}),null===(o=i.connector)||void 0===o||o.off("display_uri"),r.abrupt("return",e());case 7:case"end":return r.stop()}},r)}));return function(e,t){return r.apply(this,arguments)}}()),i.connector.createSession({chainId:parseInt((null===(r=i.chainConfig)||void 0===r?void 0:r.chainId)||"0x1",16)}).catch(function(e){return Y.error("error while creating new wallet connect session",e),i.emit(q.ERRORED,e),t(e)})}));case 11:case"end":return e.stop()}},e,this)})),function(){return y.apply(this,arguments)})},{key:"onConnectHandler",value:(x=(0,c.Z)(m().mark(function e(t){var r,n,a,i,o,s;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!this.connector||!this.wcProvider)){e.next=2;break}throw R.notReady("Wallet adapter is not ready yet");case 2:if(this.chainConfig){e.next=4;break}throw R.invalidParams("Chain config is not set");case 4:if(r=t.chainId,Y.debug("connected chainId in hex"),!(r!==parseInt(this.chainConfig.chainId,16))||(o=S(O.EIP155,r)||{chainId:"0x".concat(r.toString(16)),displayName:"Unknown Network"},!(!(s=null===(n=this.adapterOptions.adapterSettings)||void 0===n?void 0:n.qrcodeModal)||s&&!(null!==(a=this.adapterOptions)&&void 0!==a&&null!==(i=a.adapterSettings)&&void 0!==i&&i.skipNetworkSwitching)))){e.next=27;break}return e.prev=10,e.next=13,this.addChain(this.chainConfig);case 13:return e.next=15,this.switchChain(o,this.chainConfig);case 15:this.connector=this.getWalletConnectInstance(),e.next=27;break;case 18:return e.prev=18,e.t0=e.catch(10),Y.error("error while chain switching",e.t0),e.next=23,this.createNewSession({forceNewSession:!0});case 23:return this.emit(q.ERRORED,R.fromCode(5e3,"Not connected to correct network. Expected: ".concat(this.chainConfig.displayName,", Current: ").concat((null==o?void 0:o.displayName)||r,", Please switch to correct network from wallet"))),this.status=V.READY,this.rehydrated=!0,e.abrupt("return");case 27:return e.next=29,this.wcProvider.setupProvider(this.connector);case 29:this.subscribeEvents(this.connector),this.status=V.CONNECTED,this.emit(q.CONNECTED,{adapter:H.WALLET_CONNECT_V1,reconnected:this.rehydrated});case 32:case"end":return e.stop()}},e,this,[[10,18]])})),function(e){return x.apply(this,arguments)})},{key:"subscribeEvents",value:function(e){var t,r=this;e.on("session_update",(t=(0,c.Z)(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&r.emit(q.ERRORED,t);case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}))}},{key:"getWalletConnectInstance",value:function(){var e=this.adapterOptions.adapterSettings||{};return e.bridge=e.bridge||"https://bridge.walletconnect.org",new w.Z(e)}}]),k}(et)},93326:function(e,t,r){var n=r(48764).Buffer,a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isZeroAddress=t.zeroAddress=t.importPublic=t.privateToAddress=t.privateToPublic=t.publicToAddress=t.pubToAddress=t.isValidPublic=t.isValidPrivate=t.generateAddress2=t.generateAddress=t.isValidChecksumAddress=t.toChecksumAddress=t.isValidAddress=t.Account=void 0;var o=i(r(69282)),s=r(2970),c=r(95053),u=r(14543),f=r(39831),p=r(95642),h=r(98898),d=r(11091),l=r(58456),v=function(){function e(e,t,r,n){void 0===e&&(e=new s.BN(0)),void 0===t&&(t=new s.BN(0)),void 0===r&&(r=f.KECCAK256_RLP),void 0===n&&(n=f.KECCAK256_NULL),this.nonce=e,this.balance=t,this.stateRoot=r,this.codeHash=n,this._validate()}return e.fromAccountData=function(t){var r=t.nonce,n=t.balance,a=t.stateRoot,i=t.codeHash;return new e(r?new s.BN((0,p.toBuffer)(r)):void 0,n?new s.BN((0,p.toBuffer)(n)):void 0,a?(0,p.toBuffer)(a):void 0,i?(0,p.toBuffer)(i):void 0)},e.fromRlpSerializedAccount=function(e){var t=s.rlp.decode(e);if(!Array.isArray(t))throw Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)},e.fromValuesArray=function(t){var r=a(t,4),n=r[0],i=r[1],o=r[2],c=r[3];return new e(new s.BN(n),new s.BN(i),o,c)},e.prototype._validate=function(){if(this.nonce.lt(new s.BN(0)))throw Error("nonce must be greater than zero");if(this.balance.lt(new s.BN(0)))throw Error("balance must be greater than zero");if(32!==this.stateRoot.length)throw Error("stateRoot must have a length of 32");if(32!==this.codeHash.length)throw Error("codeHash must have a length of 32")},e.prototype.raw=function(){return[(0,l.bnToUnpaddedBuffer)(this.nonce),(0,l.bnToUnpaddedBuffer)(this.balance),this.stateRoot,this.codeHash]},e.prototype.serialize=function(){return s.rlp.encode(this.raw())},e.prototype.isContract=function(){return!this.codeHash.equals(f.KECCAK256_NULL)},e.prototype.isEmpty=function(){return this.balance.isZero()&&this.nonce.isZero()&&this.codeHash.equals(f.KECCAK256_NULL)},e}();t.Account=v;var g=function(e){try{(0,d.assertIsString)(e)}catch(t){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};t.isValidAddress=g;var y=function(e,t){(0,d.assertIsHexString)(e);var r=(0,u.stripHexPrefix)(e).toLowerCase(),n="";t&&(n=(0,l.toType)(t,l.TypeOutput.BN).toString()+"0x");for(var a=(0,h.keccakFromString)(n+r).toString("hex"),i="0x",o=0;o<r.length;o++)parseInt(a[o],16)>=8?i+=r[o].toUpperCase():i+=r[o];return i};t.toChecksumAddress=y;var m=function(e,r){return(0,t.isValidAddress)(e)&&(0,t.toChecksumAddress)(e,r)===e};t.isValidChecksumAddress=m;var w=function(e,t){(0,d.assertIsBuffer)(e),(0,d.assertIsBuffer)(t);var r=new s.BN(t);return r.isZero()?(0,h.rlphash)([e,null]).slice(-20):(0,h.rlphash)([e,n.from(r.toArray())]).slice(-20)};t.generateAddress=w;var x=function(e,t,r){return(0,d.assertIsBuffer)(e),(0,d.assertIsBuffer)(t),(0,d.assertIsBuffer)(r),(0,o.default)(20===e.length),(0,o.default)(32===t.length),(0,h.keccak256)(n.concat([n.from("ff","hex"),e,t,(0,h.keccak256)(r)])).slice(-20)};t.generateAddress2=x;var b=function(e){return(0,c.privateKeyVerify)(e)};t.isValidPrivate=b;var k=function(e,t){return(void 0===t&&(t=!1),(0,d.assertIsBuffer)(e),64===e.length)?(0,c.publicKeyVerify)(n.concat([n.from([4]),e])):!!t&&(0,c.publicKeyVerify)(e)};t.isValidPublic=k;var P=function(e,t){return void 0===t&&(t=!1),(0,d.assertIsBuffer)(e),t&&64!==e.length&&(e=n.from((0,c.publicKeyConvert)(e,!1).slice(1))),(0,o.default)(64===e.length),(0,h.keccak)(e).slice(-20)};t.pubToAddress=P,t.publicToAddress=t.pubToAddress;var E=function(e){return(0,d.assertIsBuffer)(e),n.from((0,c.publicKeyCreate)(e,!1)).slice(1)};t.privateToPublic=E;var C=function(e){return(0,t.publicToAddress)((0,t.privateToPublic)(e))};t.privateToAddress=C;var O=function(e){return(0,d.assertIsBuffer)(e),64!==e.length&&(e=n.from((0,c.publicKeyConvert)(e,!1).slice(1))),e};t.importPublic=O;var N=function(){var e=(0,p.zeros)(20);return(0,p.bufferToHex)(e)};t.zeroAddress=N;var T=function(e){try{(0,d.assertIsString)(e)}catch(r){return!1}return(0,t.zeroAddress)()===e};t.isZeroAddress=T},90897:function(e,t,r){var n=r(48764).Buffer,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Address=void 0;var i=a(r(69282)),o=r(2970),s=r(95642),c=r(93326),u=function(){function e(e){(0,i.default)(20===e.length,"Invalid address length"),this.buf=e}return e.zero=function(){return new e((0,s.zeros)(20))},e.fromString=function(t){return(0,i.default)((0,c.isValidAddress)(t),"Invalid address"),new e((0,s.toBuffer)(t))},e.fromPublicKey=function(t){(0,i.default)(n.isBuffer(t),"Public key should be Buffer");var r=(0,c.pubToAddress)(t);return new e(r)},e.fromPrivateKey=function(t){(0,i.default)(n.isBuffer(t),"Private key should be Buffer");var r=(0,c.privateToAddress)(t);return new e(r)},e.generate=function(t,r){return(0,i.default)(o.BN.isBN(r)),new e((0,c.generateAddress)(t.buf,r.toArrayLike(n)))},e.generate2=function(t,r,a){return(0,i.default)(n.isBuffer(r)),(0,i.default)(n.isBuffer(a)),new e((0,c.generateAddress2)(t.buf,r,a))},e.prototype.equals=function(e){return this.buf.equals(e.buf)},e.prototype.isZero=function(){return this.equals(e.zero())},e.prototype.isPrecompileOrSystemAddress=function(){var e=new o.BN(this.buf),t=new o.BN(0),r=new o.BN("ffff","hex");return e.gte(t)&&e.lte(r)},e.prototype.toString=function(){return"0x"+this.buf.toString("hex")},e.prototype.toBuffer=function(){return n.from(this.buf)},e}();t.Address=u},95642:function(e,t,r){var n=r(48764).Buffer,a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.bufArrToArr=t.arrToBufArr=t.validateNoLeadingZeroes=t.baToJSON=t.toUtf8=t.addHexPrefix=t.toUnsigned=t.fromSigned=t.bufferToHex=t.bufferToInt=t.toBuffer=t.unpadHexString=t.unpadArray=t.unpadBuffer=t.setLengthRight=t.setLengthLeft=t.zeros=t.intToBuffer=t.intToHex=void 0;var o=r(2970),s=r(14543),c=r(11091),u=function(e){if(!Number.isSafeInteger(e)||e<0)throw Error("Received an invalid integer type: ".concat(e));return"0x".concat(e.toString(16))};t.intToHex=u;var f=function(e){var r=(0,t.intToHex)(e);return n.from((0,s.padToEven)(r.slice(2)),"hex")};t.intToBuffer=f;var p=function(e){return n.allocUnsafe(e).fill(0)};t.zeros=p;var h=function(e,r,n){var a=(0,t.zeros)(r);return n?e.length<r?(e.copy(a),a):e.slice(0,r):e.length<r?(e.copy(a,r-e.length),a):e.slice(-r)},d=function(e,t){return(0,c.assertIsBuffer)(e),h(e,t,!1)};t.setLengthLeft=d;var l=function(e,t){return(0,c.assertIsBuffer)(e),h(e,t,!0)};t.setLengthRight=l;var v=function(e){for(var t=e[0];e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e},g=function(e){return(0,c.assertIsBuffer)(e),v(e)};t.unpadBuffer=g;var y=function(e){return(0,c.assertIsArray)(e),v(e)};t.unpadArray=y;var m=function(e){return(0,c.assertIsHexString)(e),v(e=(0,s.stripHexPrefix)(e))};t.unpadHexString=m;var w=function(e){if(null==e)return n.allocUnsafe(0);if(n.isBuffer(e)||Array.isArray(e)||e instanceof Uint8Array)return n.from(e);if("string"==typeof e){if(!(0,s.isHexString)(e))throw Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ".concat(e));return n.from((0,s.padToEven)((0,s.stripHexPrefix)(e)),"hex")}if("number"==typeof e)return(0,t.intToBuffer)(e);if(o.BN.isBN(e)){if(e.isNeg())throw Error("Cannot convert negative BN to buffer. Given: ".concat(e));return e.toArrayLike(n)}if(e.toArray)return n.from(e.toArray());if(e.toBuffer)return n.from(e.toBuffer());throw Error("invalid type")};t.toBuffer=w;var x=function(e){return new o.BN((0,t.toBuffer)(e)).toNumber()};t.bufferToInt=x;var b=function(e){return"0x"+(e=(0,t.toBuffer)(e)).toString("hex")};t.bufferToHex=b;var k=function(e){return new o.BN(e).fromTwos(256)};t.fromSigned=k;var P=function(e){return n.from(e.toTwos(256).toArray())};t.toUnsigned=P;var E=function(e){return"string"!=typeof e?e:(0,s.isHexPrefixed)(e)?e:"0x"+e};t.addHexPrefix=E;var C=function(e){if((e=(0,s.stripHexPrefix)(e)).length%2!=0)throw Error("Invalid non-even hex string input for toUtf8() provided");return n.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};t.toUtf8=C;var O=function(e){if(n.isBuffer(e))return"0x".concat(e.toString("hex"));if(e instanceof Array){for(var r=[],a=0;a<e.length;a++)r.push((0,t.baToJSON)(e[a]));return r}};t.baToJSON=O;var N=function(e){var t,r;try{for(var n=a(Object.entries(e)),o=n.next();!o.done;o=n.next()){var s=i(o.value,2),c=s[0],u=s[1];if(void 0!==u&&u.length>0&&0===u[0])throw Error("".concat(c," cannot have leading zeroes, received: ").concat(u.toString("hex")))}}catch(f){t={error:f}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}};t.validateNoLeadingZeroes=N,t.arrToBufArr=function e(t){return Array.isArray(t)?t.map(function(t){return e(t)}):n.from(t)},t.bufArrToArr=function e(t){return Array.isArray(t)?t.map(function(t){return e(t)}):Uint8Array.from(null!=t?t:[])}},39831:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.KECCAK256_RLP=t.KECCAK256_RLP_S=t.KECCAK256_RLP_ARRAY=t.KECCAK256_RLP_ARRAY_S=t.KECCAK256_NULL=t.KECCAK256_NULL_S=t.TWO_POW256=t.MAX_INTEGER=t.MAX_UINT64=void 0;var n=r(48764),a=r(2970);t.MAX_UINT64=new a.BN("ffffffffffffffff",16),t.MAX_INTEGER=new a.BN("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),t.TWO_POW256=new a.BN("10000000000000000000000000000000000000000000000000000000000000000",16),t.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",t.KECCAK256_NULL=n.Buffer.from(t.KECCAK256_NULL_S,"hex"),t.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",t.KECCAK256_RLP_ARRAY=n.Buffer.from(t.KECCAK256_RLP_ARRAY_S,"hex"),t.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",t.KECCAK256_RLP=n.Buffer.from(t.KECCAK256_RLP_S,"hex")},2970:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.rlp=t.BN=void 0;var s=o(r(13550));t.BN=s.default;var c=i(r(51675));t.rlp=c},98898:function(e,t,r){var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.rlphash=t.ripemd160FromArray=t.ripemd160FromString=t.ripemd160=t.sha256FromArray=t.sha256FromString=t.sha256=t.keccakFromArray=t.keccakFromHexString=t.keccakFromString=t.keccak256=t.keccak=void 0;var a=r(82192),i=r(23482),o=r(2970),s=r(95642),c=r(11091),u=function(e,t){switch(void 0===t&&(t=256),(0,c.assertIsBuffer)(e),t){case 224:return(0,a.keccak224)(e);case 256:return(0,a.keccak256)(e);case 384:return(0,a.keccak384)(e);case 512:return(0,a.keccak512)(e);default:throw Error("Invald algorithm: keccak".concat(t))}};t.keccak=u;var f=function(e){return(0,t.keccak)(e)};t.keccak256=f;var p=function(e,r){void 0===r&&(r=256),(0,c.assertIsString)(e);var a=n.from(e,"utf8");return(0,t.keccak)(a,r)};t.keccakFromString=p;var h=function(e,r){return void 0===r&&(r=256),(0,c.assertIsHexString)(e),(0,t.keccak)((0,s.toBuffer)(e),r)};t.keccakFromHexString=h;var d=function(e,r){return void 0===r&&(r=256),(0,c.assertIsArray)(e),(0,t.keccak)((0,s.toBuffer)(e),r)};t.keccakFromArray=d;var l=function(e){return e=(0,s.toBuffer)(e),i("sha256").update(e).digest()},v=function(e){return(0,c.assertIsBuffer)(e),l(e)};t.sha256=v;var g=function(e){return(0,c.assertIsString)(e),l(e)};t.sha256FromString=g;var y=function(e){return(0,c.assertIsArray)(e),l(e)};t.sha256FromArray=y;var m=function(e,t){e=(0,s.toBuffer)(e);var r=i("rmd160").update(e).digest();return!0===t?(0,s.setLengthLeft)(r,32):r},w=function(e,t){return(0,c.assertIsBuffer)(e),m(e,t)};t.ripemd160=w;var x=function(e,t){return(0,c.assertIsString)(e),m(e,t)};t.ripemd160FromString=x;var b=function(e,t){return(0,c.assertIsArray)(e),m(e,t)};t.ripemd160FromArray=b;var k=function(e){return(0,t.keccak)(o.rlp.encode(e))};t.rlphash=k},11091:function(e,t,r){var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.assertIsString=t.assertIsArray=t.assertIsBuffer=t.assertIsHexString=void 0;var a=r(14543),i=function(e){if(!(0,a.isHexString)(e))throw Error("This method only supports 0x-prefixed hex strings but input was: ".concat(e))};t.assertIsHexString=i;var o=function(e){if(!n.isBuffer(e))throw Error("This method only supports Buffer but input was: ".concat(e))};t.assertIsBuffer=o;var s=function(e){if(!Array.isArray(e))throw Error("This method only supports number arrays but input was: ".concat(e))};t.assertIsArray=s;var c=function(e){if("string"!=typeof e)throw Error("This method only supports strings but input was: ".concat(e))};t.assertIsString=c},62671:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.isHexString=t.getKeys=t.fromAscii=t.fromUtf8=t.toAscii=t.arrayContainsArray=t.getBinarySize=t.padToEven=t.stripHexPrefix=t.isHexPrefixed=void 0,a(r(39831),t),a(r(93326),t),a(r(90897),t),a(r(98898),t),a(r(44877),t),a(r(95642),t),a(r(5780),t),a(r(2970),t),a(r(58456),t);var i=r(14543);Object.defineProperty(t,"isHexPrefixed",{enumerable:!0,get:function(){return i.isHexPrefixed}}),Object.defineProperty(t,"stripHexPrefix",{enumerable:!0,get:function(){return i.stripHexPrefix}}),Object.defineProperty(t,"padToEven",{enumerable:!0,get:function(){return i.padToEven}}),Object.defineProperty(t,"getBinarySize",{enumerable:!0,get:function(){return i.getBinarySize}}),Object.defineProperty(t,"arrayContainsArray",{enumerable:!0,get:function(){return i.arrayContainsArray}}),Object.defineProperty(t,"toAscii",{enumerable:!0,get:function(){return i.toAscii}}),Object.defineProperty(t,"fromUtf8",{enumerable:!0,get:function(){return i.fromUtf8}}),Object.defineProperty(t,"fromAscii",{enumerable:!0,get:function(){return i.fromAscii}}),Object.defineProperty(t,"getKeys",{enumerable:!0,get:function(){return i.getKeys}}),Object.defineProperty(t,"isHexString",{enumerable:!0,get:function(){return i.isHexString}})},14543:function(e,t,r){var n=r(48764).Buffer;function a(e){if("string"!=typeof e)throw Error("[isHexPrefixed] input must be type 'string', received type ".concat(typeof e));return"0"===e[0]&&"x"===e[1]}Object.defineProperty(t,"__esModule",{value:!0}),t.isHexString=t.getKeys=t.fromAscii=t.fromUtf8=t.toAscii=t.arrayContainsArray=t.getBinarySize=t.padToEven=t.stripHexPrefix=t.isHexPrefixed=void 0,t.isHexPrefixed=a;var i=function(e){if("string"!=typeof e)throw Error("[stripHexPrefix] input must be type 'string', received ".concat(typeof e));return a(e)?e.slice(2):e};function o(e){var t=e;if("string"!=typeof t)throw Error("[padToEven] value must be type 'string', received ".concat(typeof t));return t.length%2&&(t="0".concat(t)),t}t.stripHexPrefix=i,t.padToEven=o,t.getBinarySize=function(e){if("string"!=typeof e)throw Error("[getBinarySize] method requires input type 'string', recieved ".concat(typeof e));return n.byteLength(e,"utf8")},t.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw Error("[arrayContainsArray] method requires input 'superset' to be an array, got type '".concat(typeof e,"'"));if(!0!==Array.isArray(t))throw Error("[arrayContainsArray] method requires input 'subset' to be an array, got type '".concat(typeof t,"'"));return t[r?"some":"every"](function(t){return e.indexOf(t)>=0})},t.toAscii=function(e){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},t.fromUtf8=function(e){var t=n.from(e,"utf8");return"0x".concat(o(t.toString("hex")).replace(/^0+|0+$/g,""))},t.fromAscii=function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r).toString(16);t+=n.length<2?"0".concat(n):n}return"0x".concat(t)},t.getKeys=function(e,t,r){if(!Array.isArray(e))throw Error("[getKeys] method expects input 'params' to be an array, got ".concat(typeof e));if("string"!=typeof t)throw Error("[getKeys] method expects input 'key' to be type 'string', got ".concat(typeof e));for(var n=[],a=0;a<e.length;a++){var i=e[a][t];if(r&&!i)i="";else if("string"!=typeof i)throw Error("invalid abi - expected type 'string', received ".concat(typeof i));n.push(i)}return n},t.isHexString=function(e,t){return"string"==typeof e&&!!e.match(/^0x[0-9A-Fa-f]*$/)&&(!t||e.length===2+2*t)}},5780:function(e,t,r){var n=r(48764).Buffer,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defineProperties=void 0;var i=a(r(69282)),o=r(14543),s=r(2970),c=r(95642),u=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(t){if(void 0===t&&(t=!1),t){var r={};return e._fields.forEach(function(t){r[t]="0x".concat(e[t].toString("hex"))}),r}return(0,c.baToJSON)(e.raw)},e.serialize=function(){return s.rlp.encode(e.raw)},t.forEach(function(t,r){function a(){return e.raw[r]}function o(a){"00"!==(a=(0,c.toBuffer)(a)).toString("hex")||t.allowZero||(a=n.allocUnsafe(0)),t.allowLess&&t.length?(a=(0,c.unpadBuffer)(a),(0,i.default)(t.length>=a.length,"The field ".concat(t.name," must not have more ").concat(t.length," bytes"))):!(t.allowZero&&0===a.length)&&t.length&&(0,i.default)(t.length===a.length,"The field ".concat(t.name," must have byte length of ").concat(t.length)),e.raw[r]=a}e._fields.push(t.name),Object.defineProperty(e,t.name,{enumerable:!0,configurable:!0,get:a,set:o}),t.default&&(e[t.name]=t.default),t.alias&&Object.defineProperty(e,t.alias,{enumerable:!1,configurable:!0,set:o,get:a})}),r){if("string"==typeof r&&(r=n.from((0,o.stripHexPrefix)(r),"hex")),n.isBuffer(r)&&(r=s.rlp.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw Error("wrong number of fields in data");r.forEach(function(t,r){e[e._fields[r]]=(0,c.toBuffer)(t)})}else if("object"==typeof r){var a=Object.keys(r);t.forEach(function(t){-1!==a.indexOf(t.name)&&(e[t.name]=r[t.name]),-1!==a.indexOf(t.alias)&&(e[t.alias]=r[t.alias])})}else throw Error("invalid data")}};t.defineProperties=u},44877:function(e,t,r){var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.hashPersonalMessage=t.isValidSignature=t.fromRpcSig=t.toCompactSig=t.toRpcSig=t.ecrecover=t.ecsign=void 0;var a=r(95053),i=r(2970),o=r(95642),s=r(98898),c=r(11091),u=r(58456);function f(e,t){var r=(0,u.toType)(e,u.TypeOutput.BN);if(r.eqn(0)||r.eqn(1))return(0,u.toType)(e,u.TypeOutput.BN);if(!t)return r.subn(27);var n=(0,u.toType)(t,u.TypeOutput.BN);return r.sub(n.muln(2).addn(35))}function p(e){var t=new i.BN(e);return t.eqn(0)||t.eqn(1)}t.ecsign=function(e,t,r){var i=(0,a.ecdsaSign)(e,t),o=i.signature,s=i.recid,c=n.from(o.slice(0,32)),f=n.from(o.slice(32,64));if(!r||"number"==typeof r){if(r&&!Number.isSafeInteger(r))throw Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");return{r:c,s:f,v:r?s+(2*r+35):s+27}}return{r:c,s:f,v:(0,u.toType)(r,u.TypeOutput.BN).muln(2).addn(35).addn(s).toArrayLike(n)}};var h=function(e,t,r,i,s){var c=n.concat([(0,o.setLengthLeft)(r,32),(0,o.setLengthLeft)(i,32)],64),u=f(t,s);if(!p(u))throw Error("Invalid signature v value");var h=(0,a.ecdsaRecover)(c,u.toNumber(),e);return n.from((0,a.publicKeyConvert)(h,!1).slice(1))};t.ecrecover=h;var d=function(e,t,r,a){if(!p(f(e,a)))throw Error("Invalid signature v value");return(0,o.bufferToHex)(n.concat([(0,o.setLengthLeft)(t,32),(0,o.setLengthLeft)(r,32),(0,o.toBuffer)(e)]))};t.toRpcSig=d;var l=function(e,t,r,a){if(!p(f(e,a)))throw Error("Invalid signature v value");var i=(0,u.toType)(e,u.TypeOutput.Number),s=r;return(i>28&&i%2==1||1===i||28===i)&&(s=n.from(r),s[0]|=128),(0,o.bufferToHex)(n.concat([(0,o.setLengthLeft)(t,32),(0,o.setLengthLeft)(s,32)]))};t.toCompactSig=l;var v=function(e){var t,r,n,a=(0,o.toBuffer)(e);if(a.length>=65)t=a.slice(0,32),r=a.slice(32,64),n=(0,o.bufferToInt)(a.slice(64));else if(64===a.length)t=a.slice(0,32),r=a.slice(32,64),n=(0,o.bufferToInt)(a.slice(32,33))>>7,r[0]&=127;else throw Error("Invalid signature length");return n<27&&(n+=27),{v:n,r:t,s:r}};t.fromRpcSig=v;var g=function(e,t,r,n,a){void 0===n&&(n=!0);var o=new i.BN("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),s=new i.BN("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(32!==t.length||32!==r.length||!p(f(e,a)))return!1;var c=new i.BN(t),u=new i.BN(r);return!(c.isZero()||c.gt(s)||u.isZero()||u.gt(s))&&(!n||1!==u.cmp(o))};t.isValidSignature=g;var y=function(e){(0,c.assertIsBuffer)(e);var t=n.from("\x19Ethereum Signed Message:\n".concat(e.length),"utf-8");return(0,s.keccak)(n.concat([t,e]))};t.hashPersonalMessage=y},58456:function(e,t,r){var n,a,i=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.toType=t.TypeOutput=t.bnToRlp=t.bnToUnpaddedBuffer=t.bnToHex=void 0;var o=r(2970),s=r(14543),c=r(95642);function u(e){return(0,c.unpadBuffer)(e.toArrayLike(i))}t.bnToHex=function(e){return"0x".concat(e.toString(16))},t.bnToUnpaddedBuffer=u,t.bnToRlp=function(e){return u(e)},(n=a=t.TypeOutput||(t.TypeOutput={}))[n.Number=0]="Number",n[n.BN=1]="BN",n[n.Buffer=2]="Buffer",n[n.PrefixedHexString=3]="PrefixedHexString",t.toType=function(e,t){if(null===e)return null;if(void 0!==e){if("string"!=typeof e||(0,s.isHexString)(e)){if("number"==typeof e&&!Number.isSafeInteger(e))throw Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)")}else throw Error("A string must be provided with a 0x-prefix, given: ".concat(e));var r=(0,c.toBuffer)(e);if(t===a.Buffer)return r;if(t===a.BN)return new o.BN(r);if(t!==a.Number)return"0x".concat(r.toString("hex"));var n=new o.BN(r),i=new o.BN(Number.MAX_SAFE_INTEGER.toString());if(n.gt(i))throw Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return n.toNumber()}}}}]);