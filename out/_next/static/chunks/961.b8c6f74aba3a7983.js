"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[961],{10961:function(e,r,t){t.r(r),t.d(r,{EthereumPrivateKeyProvider:function(){return ex},TransactionFormatter:function(){return eg},WalletConnectProvider:function(){return K},getProviderHandlers:function(){return ec}});var n,a,i=t(15861),s=t(15671),o=t(43144),c=t(97326),u=t(73237),f=t(32531),p=t(82963),d=t(61120),h=t(4942),l=t(64687),v=t.n(l),g=t(22782),m=t(95844),y=t(16843),x=t(68531),b=t(79826),w=t(66052),P=t(51091),k=t(53934),E=t(71002),_=t(20917),T=t(69282),A=t.n(T),O=t(40660),S=t(70794),C=t(2832),N=t.n(C),I=t(48764).Buffer;function B(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function Z(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?B(Object(t),!0).forEach(function(r){(0,h.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function M(e){return 42===e.length}function j(e){var r=e.getAccounts,t=e.getPrivateKey,n=e.processTransaction,a=e.processSignTransaction,s=e.processEthSignMessage,o=e.processTypedMessage,c=e.processTypedMessageV3,u=e.processTypedMessageV4,f=e.processPersonalMessage,p=e.processEncryptionPublicKey,d=e.processDecryptMessage;return(0,m.UZ)([(0,m.v0)({eth_syncing:!1}),function(e){var r=e.getAccounts,t=e.getPrivateKey,n=e.processDecryptMessage,a=e.processEncryptionPublicKey,s=e.processEthSignMessage,o=e.processPersonalMessage,c=e.processTransaction,u=e.processSignTransaction,f=e.processTypedMessage,p=e.processTypedMessageV3,d=e.processTypedMessageV4;if(!r)throw Error("opts.getAccounts is required");function h(e,r){return l.apply(this,arguments)}function l(){return(l=(0,i.Z)(v().mark(function e(t,n){var a,i;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("string"==typeof t&&t.length>0)){e.next=8;break}return e.next=3,r(n);case 3:if(a=e.sent.map(function(e){return e.toLowerCase()}),i=t.toLowerCase(),!a.includes(i)){e.next=8;break}return e.abrupt("return",i);case 8:throw b.ethErrors.rpc.invalidParams({message:"Invalid parameters: must provide an Ethereum address."});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(){return(g=(0,i.Z)(v().mark(function e(t,n){return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:n.result=e.sent;case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function y(){return(y=(0,i.Z)(v().mark(function e(t,n){var a;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:a=e.sent,n.result=a[0]||null;case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function x(){return(x=(0,i.Z)(v().mark(function e(r,t){var n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}throw b.ethErrors.rpc.methodNotSupported();case 2:return n=r.params[0]||{from:""},e.next=5,h(n.from,r);case 5:return n.from=e.sent,e.next=8,c(n,r);case 8:t.result=e.sent;case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(){return(w=(0,i.Z)(v().mark(function e(r,t){var n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}throw b.ethErrors.rpc.methodNotSupported();case 2:return n=r.params[0]||{from:""},e.next=5,h(n.from,r);case 5:return n.from=e.sent,e.next=8,u(n,r);case 8:t.result=e.sent;case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(){return(P=(0,i.Z)(v().mark(function e(r,t){var n,a,i;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}throw b.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,h(r.params[0],r);case 4:return n=e.sent,a=r.params[1],i=Z(Z({},r.params[2]||{}),{},{from:n,data:a}),e.next=10,s(i,r);case 10:t.result=e.sent;case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(){return(k=(0,i.Z)(v().mark(function e(r,t){var n,a,i;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}throw b.ethErrors.rpc.methodNotSupported();case 2:return n=r.params[0],e.next=5,h(r.params[1],r);case 5:return a=e.sent,i=Z(Z({},r.params[2]||{}),{},{from:a,data:n}),e.next=11,f(i,r,"V1");case 11:t.result=e.sent;case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(){return(E=(0,i.Z)(v().mark(function e(r,t){var n,a;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}throw b.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,h(r.params[0],r);case 4:return n=e.sent,a={data:r.params[1],from:n,version:"V3"},e.next=10,p(a,r,"V3");case 10:t.result=e.sent;case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(){return(_=(0,i.Z)(v().mark(function e(r,t){var n,a;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}throw b.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,h(r.params[0],r);case 4:return n=e.sent,a={data:r.params[1],from:n,version:"V4"},e.next=10,d(a,r,"V4");case 10:t.result=e.sent;case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(){return(T=(0,i.Z)(v().mark(function e(r,t){var n,a,i,s,c,u,f;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}throw b.ethErrors.rpc.methodNotSupported();case 2:return n=r.params[0],a=r.params[1],i=r.params[2]||{},M(n)&&!M(a)?(u="The eth_personalSign method requires params ordered ",u+="[message, address]. This was previously handled incorrectly, ",u+="and has been corrected automatically. ",u+="Please switch this param order for smooth behavior in the future.",t.warning=u,s=n,c=a):(c=n,s=a),e.next=8,h(s,r);case 8:return s=e.sent,f=Z(Z({},i),{},{from:s,data:c}),e.next=12,o(f,r);case 12:t.result=e.sent;case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(){return(A=(0,i.Z)(v().mark(function e(r,t){var n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}throw b.ethErrors.rpc.methodNotSupported();case 2:return e.next=4,h(r.params[0],r);case 4:return n=e.sent,e.next=7,a(n,r);case 7:t.result=e.sent;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(){return(O=(0,i.Z)(v().mark(function e(r,t){var a,i,s;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw b.ethErrors.rpc.methodNotSupported();case 2:return a=r.params[0],e.next=5,h(r.params[1],r);case 5:i=e.sent,s=Z(Z({},r.params[2]||{}),{},{from:i,data:a}),t.result=n(s,r);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(){return(S=(0,i.Z)(v().mark(function e(r,n){return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw b.ethErrors.rpc.methodNotSupported();case 2:n.result=t(r);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}return(0,m.v0)({eth_accounts:(0,m.Pk)(function(e,r){return g.apply(this,arguments)}),eth_private_key:(0,m.Pk)(function(e,r){return S.apply(this,arguments)}),eth_coinbase:(0,m.Pk)(function(e,r){return y.apply(this,arguments)}),eth_sendTransaction:(0,m.Pk)(function(e,r){return x.apply(this,arguments)}),eth_signTransaction:(0,m.Pk)(function(e,r){return w.apply(this,arguments)}),eth_sign:(0,m.Pk)(function(e,r){return P.apply(this,arguments)}),eth_signTypedData:(0,m.Pk)(function(e,r){return k.apply(this,arguments)}),eth_signTypedData_v3:(0,m.Pk)(function(e,r){return E.apply(this,arguments)}),eth_signTypedData_v4:(0,m.Pk)(function(e,r){return _.apply(this,arguments)}),personal_sign:(0,m.Pk)(function(e,r){return T.apply(this,arguments)}),eth_getEncryptionPublicKey:(0,m.Pk)(function(e,r){return A.apply(this,arguments)}),eth_decrypt:(0,m.Pk)(function(e,r){return O.apply(this,arguments)})})}({getAccounts:r,getPrivateKey:t,processTransaction:n,processEthSignMessage:s,processSignTransaction:a,processTypedMessage:o,processTypedMessageV3:c,processTypedMessageV4:u,processPersonalMessage:f,processEncryptionPublicKey:p,processDecryptMessage:d})])}function H(e){var r=e.chainId,t=e.rpcTarget,n=(0,g.v$)({rpcTarget:t});return{networkMiddleware:(0,m.UZ)([function(e,t,n,a){return"eth_chainId"===e.method?(t.result=r,a()):n()},function(r,t,n,a){return"eth_provider_config"===r.method?(t.result=e,a()):n()},n]),fetchMiddleware:n}}function G(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function F(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?G(Object(t),!0).forEach(function(r){(0,h.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var K=function(e){(0,f.Z)(E,e);var r,t,n,a,l,x,w,P,k=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,d.Z)(E);if(r){var n=(0,d.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,p.Z)(this,e)});function E(e){var r,t=e.config,n=e.state,a=e.connector;return(0,s.Z)(this,E),r=k.call(this,{config:{chainConfig:F(F({},t.chainConfig),{},{chainNamespace:y.EN.EIP155}),skipLookupNetwork:!!t.skipLookupNetwork},state:F(F({},n||{}),{},{chainId:"loading",accounts:[]})}),(0,h.Z)((0,c.Z)(r),"connector",null),r.connector=a||null,r}return(0,o.Z)(E,[{key:"enable",value:(t=(0,i.Z)(v().mark(function e(){return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connector){e.next=2;break}throw b.ethErrors.provider.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});case 2:return e.next=4,this.setupProvider(this.connector);case 4:return e.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"setupProvider",value:(n=(0,i.Z)(v().mark(function e(r){return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.onConnectorStateUpdate(r),e.next=3,this.setupEngine(r);case 3:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"switchChain",value:(a=(0,i.Z)(v().mark(function e(r){var t,n,a,i,s,o,c,u;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.chainId,a=void 0===(n=r.addChain)||n,s=void 0===(i=r.lookup)||i,this.connector){e.next=3;break}throw b.ethErrors.provider.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});case 3:if(o=this.getChainConfig(t),this.update({chainId:"loading"}),c=o.rpcTarget,u=o.displayName,!a){e.next=15;break}return e.prev=7,e.next=10,this.connector.sendCustomRequest({method:"wallet_addEthereumChain",params:[{chainId:t,chainName:u,rpcUrls:[c]}]});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),y.cM.error(e.t0);case 15:return e.prev=15,e.next=18,this.connector.sendCustomRequest({method:"wallet_switchEthereumChain",params:[{chainId:t}]});case 18:e.next=25;break;case 20:if(e.prev=20,e.t1=e.catch(15),y.cM.error(e.t1),!("JSON RPC response format is invalid"!==e.t1.message)){e.next=25;break}throw e.t1;case 25:if(this.configure({chainConfig:o}),!s){e.next=29;break}return e.next=29,this.lookupNetwork(this.connector);case 29:case"end":return e.stop()}},e,this,[[7,12],[15,20]])})),function(e){return a.apply(this,arguments)})},{key:"addChain",value:(l=(0,i.Z)(v().mark(function e(r){var t,n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connector){e.next=2;break}throw y.Ty.notReady("Wallet adapter is not ready yet");case 2:return t=r.rpcTarget,n=r.displayName,e.prev=3,e.next=6,this.connector.sendCustomRequest({method:"wallet_addEthereumChain",params:[{chainId:r.chainId,chainName:n,rpcUrls:[t]}]});case 6:(0,u.Z)((0,d.Z)(E.prototype),"addChain",this).call(this,r),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(3),y.cM.error(e.t0),e.t0;case 13:case"end":return e.stop()}},e,this,[[3,9]])})),function(e){return l.apply(this,arguments)})},{key:"lookupNetwork",value:(x=(0,i.Z)(v().mark(function e(r){var t,n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.connected){e.next=2;break}throw y.RM.notConnectedError("Wallet connect connector is not connected");case 2:if(this.provider){e.next=4;break}throw b.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 4:if(!((t=this.config.chainConfig.chainId)!==(n=(0,y.H2)(r.chainId.toString())?r.chainId:"0x".concat(r.chainId.toString(16))))){e.next=8;break}throw y.Ty.rpcConnectionError("Invalid network, net_version is: ".concat(n,", expected: ").concat(t));case 8:return this.provider.emit("connect",{chainId:t}),this.provider.emit("chainChanged",this.state.chainId),e.abrupt("return",n);case 11:case"end":return e.stop()}},e,this)})),function(e){return x.apply(this,arguments)})},{key:"setupEngine",value:(w=(0,i.Z)(v().mark(function e(r){var t,n,a,s,o;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=function(e){var r,t,n,a,s,o,c,u,f,p,d=e.connector;return{getPrivateKey:(r=(0,i.Z)(v().mark(function e(){return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw b.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),getAccounts:(t=(0,i.Z)(v().mark(function e(r){var t;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=d.accounts)&&t.length)){e.next=3;break}return e.abrupt("return",t);case 3:throw Error("Failed to get accounts");case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),processTransaction:(n=(0,i.Z)(v().mark(function e(r,t){var n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.sendTransaction(r);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)})),function(e,r){return n.apply(this,arguments)}),processSignTransaction:(a=(0,i.Z)(v().mark(function e(r,t){var n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.signTransaction(r);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)})),function(e,r){return a.apply(this,arguments)}),processEthSignMessage:(s=(0,i.Z)(v().mark(function e(r,t){var n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.signMessage([r.from,r.data]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)})),function(e,r){return s.apply(this,arguments)}),processPersonalMessage:(o=(0,i.Z)(v().mark(function e(r,t){var n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.signPersonalMessage([r.data,r.from]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)})),function(e,r){return o.apply(this,arguments)}),processTypedMessage:(c=(0,i.Z)(v().mark(function e(r,t){var n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.signTypedData([r.from,r.data]);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)})),function(e,r){return c.apply(this,arguments)}),processTypedMessageV3:(u=(0,i.Z)(v().mark(function e(r){var t;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.signTypedData([r.from,r.data]);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)})),function(e){return u.apply(this,arguments)}),processTypedMessageV4:(f=(0,i.Z)(v().mark(function e(r){var t;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.signTypedData([r.from,r.data]);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)})),function(e){return f.apply(this,arguments)}),processEncryptionPublicKey:(p=(0,i.Z)(v().mark(function e(r){return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw b.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}},e)})),function(e){return p.apply(this,arguments)}),processDecryptMessage:function(e){throw b.ethErrors.rpc.methodNotSupported()}}}({connector:r}),this.update({accounts:r.accounts||[]}),n=j(t),a=new m.eI,s=H(this.config.chainConfig).networkMiddleware,a.push(n),a.push(s),o=(0,g.Xj)(a),this.updateProviderEngineProxy(o),this.config.skipLookupNetwork){e.next=12;break}return e.next=12,this.lookupNetwork(r);case 12:case"end":return e.stop()}},e,this)})),function(e){return w.apply(this,arguments)})},{key:"onConnectorStateUpdate",value:(P=(0,i.Z)(v().mark(function e(r){var t=this;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.on("session_update",function(){var e=(0,i.Z)(v().mark(function e(n,a){var i,s,o,c,u,f;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.provider){e.next=2;break}throw y.RM.notConnectedError("Wallet connect connector is not connected");case 2:if(!n){e.next=5;break}return t.provider.emit("error",n),e.abrupt("return");case 5:if(s=(i=a.params[0]).accounts,o=i.chainId,c=i.rpcUrl,null!=s&&s.length&&t.state.accounts[0]!==s[0]&&(t.update({accounts:s}),t.provider.emit("accountsChanged",s)),u="0x".concat(o.toString(16)),!(o&&t.state.chainId!==u)){e.next=13;break}return f=(0,y.h2)(y.EN.EIP155,o)||{},t.configure({chainConfig:F(F({},f),{},{chainId:u,rpcTarget:c,chainNamespace:y.EN.EIP155})}),e.next=13,t.setupEngine(r);case 13:case"end":return e.stop()}},e)}));return function(r,t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e)})),function(e){return P.apply(this,arguments)})}]),E}(x.Zk);(0,h.Z)(K,"getProviderInstance",(n=(0,i.Z)(v().mark(function e(r){var t;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new K({config:{chainConfig:r.chainConfig,skipLookupNetwork:r.skipLookupNetwork}}),e.next=3,t.setupProvider(r.connector);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}));var D=new S.Z("1e18"),L=new S.Z("1e9"),R=new S.Z("1"),U={hex:function(e){return"string"==typeof e?new S.Z((0,k.stripHexPrefix)(e),16):new S.Z(e,16)},dec:function(e){return new S.Z(e,10)}},V={WEI:function(e){return e.div(D)},GWEI:function(e){return e.div(L)},ETH:function(e){return e.div(R)}},z={WEI:function(e){return e.times(D).dp(0,S.Z.ROUND_HALF_UP)},GWEI:function(e){return e.times(L).dp(9,S.Z.ROUND_HALF_UP)},ETH:function(e){return e.times(R).dp(9,S.Z.ROUND_HALF_UP)}},q={hex:function(e){return e.toString(16)},dec:function(e){return new S.Z(e).toString(10)}},W=function(e){var r=e.value,t=e.fromNumericBase,n=e.fromDenomination,a=e.toNumericBase,i=e.toDenomination,s=e.numberOfDecimals,o=U[t](r);return n&&(o=V[n](o)),i&&(o=z[i](o)),s&&(o=o.dp(s,S.Z.ROUND_HALF_DOWN)),a&&(o=q[a](o)),o},J=function(e,r){var t=r.fromNumericBase;return W({fromNumericBase:void 0===t?"hex":t,toNumericBase:r.toNumericBase,fromDenomination:r.fromDenomination,toDenomination:r.toDenomination,numberOfDecimals:r.numberOfDecimals,value:e||"0"})};function Y(e){return J(e,{fromNumericBase:"dec",toNumericBase:"hex",fromDenomination:"GWEI",toDenomination:"WEI"})}function X(e){return J(e,{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"WEI",toDenomination:"GWEI"})}function $(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function Q(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?$(Object(t),!0).forEach(function(r){(0,h.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ee(e){return X(Y(e))}function er(){return(er=(0,i.Z)(v().mark(function e(r){var t,n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.U2)(r);case 2:return n=Q(Q({},t=e.sent),{},{estimatedBaseFee:ee(t.estimatedBaseFee),low:Q(Q({},t.low),{},{suggestedMaxPriorityFeePerGas:ee(t.low.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:ee(t.low.suggestedMaxFeePerGas)}),medium:Q(Q({},t.medium),{},{suggestedMaxPriorityFeePerGas:ee(t.medium.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:ee(t.medium.suggestedMaxFeePerGas)}),high:Q(Q({},t.high),{},{suggestedMaxPriorityFeePerGas:ee(t.high.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:ee(t.high.suggestedMaxFeePerGas)})}),e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function et(){return(et=(0,i.Z)(v().mark(function e(r){var t;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.U2)(r,{referrer:r,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors"});case 2:return t=e.sent,e.abrupt("return",{low:t.SafeGasPrice,medium:t.ProposeGasPrice,high:t.FastGasPrice});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var en=function(e,r){var t;try{A().ok(e&&"object"===(0,E.Z)(e),"Params must be an object."),A().ok("data"in e,'Params must include a "data" field.'),A().ok("from"in e,'Params must include a "from" field.'),A().ok("string"==typeof e.from&&(0,k.isValidAddress)(e.from),'"from" field must be a valid, lowercase, hexadecimal Ethereum address string.');var n=null,a=null;switch(e.version){case P.SignTypedDataVersion.V1:"string"==typeof e.data?A().doesNotThrow(function(){n=JSON.parse(e.data)},'"data" must be a valid JSON string.'):n=e.data,A().ok(Array.isArray(n),"params.data must be an array."),A().doesNotThrow(function(){(0,P.typedSignatureHash)(n)},"Signing data must be valid EIP-712 typed data.");break;case P.SignTypedDataVersion.V3:case P.SignTypedDataVersion.V4:"string"==typeof e.data?A().doesNotThrow(function(){n=JSON.parse(e.data)},'"data" must be a valid JSON string.'):n=e.data,A().ok(n.primaryType in n.types,'Primary type of "'.concat(n.primaryType,'" has no type definition.'));var i=O.validate(n,P.TYPED_MESSAGE_SCHEMA.properties);A().strictEqual(i.errors.length,0,"Signing data must conform to EIP-712 schema. See https://git.io/fNtcx."),(a=null===(t=n.domain)||void 0===t?void 0:t.chainId)&&(A().ok(!Number.isNaN(r),'Cannot sign messages for chainId "'.concat(a,'", because Web3Auth is switching networks.')),"string"==typeof a&&(a=Number.parseInt(a,(0,y.H2)(a)?16:10)),A().strictEqual(a,r,'Provided chainId "'.concat(a,'" must match the active chainId "').concat(r,'"')));break;default:A().fail('Unknown typed data version "'.concat(e.version,'"'))}}catch(s){throw b.ethErrors.rpc.invalidInput({message:null==s?void 0:s.message})}};function ea(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function ei(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ea(Object(t),!0).forEach(function(r){(0,h.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ea(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function es(e,r,t){return eo.apply(this,arguments)}function eo(){return(eo=(0,i.Z)(v().mark(function e(r,t,n){var a,i,s;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.formatTransaction(r);case 2:return a=e.sent,e.next=5,n.getCommonConfiguration();case 5:return i=e.sent,s=w.TransactionFactory.fromTxData(a,{common:i}).sign(I.from(t,"hex")).serialize(),e.abrupt("return",s);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ec(e){var r,t,n,a,s,o,c,u,f,p,d=e.txFormatter,h=e.privKey,l=e.getProviderEngineProxy;return{getAccounts:(r=(0,i.Z)(v().mark(function e(r){return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["0x".concat((0,k.privateToAddress)(I.from(h,"hex")).toString("hex"))]);case 1:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),getPrivateKey:(t=(0,i.Z)(v().mark(function e(r){return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h);case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),processTransaction:(n=(0,i.Z)(v().mark(function e(r,t){var n,a,i;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l()){e.next=3;break}throw b.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return e.next=5,es(r,h,d);case 5:return a=e.sent,e.next=8,n.request({method:"eth_sendRawTransaction",params:["0x".concat(a.toString("hex"))]});case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}},e)})),function(e,r){return n.apply(this,arguments)}),processSignTransaction:(a=(0,i.Z)(v().mark(function e(r,t){var n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l()){e.next=3;break}throw b.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return e.next=5,es(r,h,d);case 5:return n=e.sent,e.abrupt("return","0x".concat(n.toString("hex")));case 7:case"end":return e.stop()}},e)})),function(e,r){return a.apply(this,arguments)}),processEthSignMessage:(s=(0,i.Z)(v().mark(function e(r,t){var n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,g.l)(h,r.data),e.abrupt("return",n);case 2:case"end":return e.stop()}},e)})),function(e,r){return s.apply(this,arguments)}),processPersonalMessage:(o=(0,i.Z)(v().mark(function e(r,t){var n,a;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=I.from(h,"hex"),a=(0,P.personalSign)({privateKey:n,data:r.data}),e.abrupt("return",a);case 3:case"end":return e.stop()}},e)})),function(e,r){return o.apply(this,arguments)}),processTypedMessage:(c=(0,i.Z)(v().mark(function e(r,t){var n,a,i,s,o,c,u;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(y.cM.debug("processTypedMessage",r),n=I.from(h,"hex"),a=l()){e.next=5;break}throw b.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return e.next=7,a.request({method:"eth_chainId"});case 7:return s=Number.parseInt(i=e.sent,(0,y.H2)(i)?16:10),en(o=ei(ei({},r),{},{version:P.SignTypedDataVersion.V1}),s),c="string"==typeof o.data?JSON.parse(o.data):o.data,u=(0,P.signTypedData)({privateKey:n,data:c,version:P.SignTypedDataVersion.V1}),e.abrupt("return",u);case 14:case"end":return e.stop()}},e)})),function(e,r){return c.apply(this,arguments)}),processTypedMessageV3:(u=(0,i.Z)(v().mark(function e(r,t){var n,a,i,s,o;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(y.cM.debug("processTypedMessageV3",r),n=I.from(h,"hex"),a=l()){e.next=5;break}throw b.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return e.next=7,a.request({method:"eth_chainId"});case 7:return en(r,Number.parseInt(i=e.sent,(0,y.H2)(i)?16:10)),s="string"==typeof r.data?JSON.parse(r.data):r.data,o=(0,P.signTypedData)({privateKey:n,data:s,version:P.SignTypedDataVersion.V3}),e.abrupt("return",o);case 13:case"end":return e.stop()}},e)})),function(e,r){return u.apply(this,arguments)}),processTypedMessageV4:(f=(0,i.Z)(v().mark(function e(r,t){var n,a,i,s,o;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(y.cM.debug("processTypedMessageV4",r),n=I.from(h,"hex"),a=l()){e.next=5;break}throw b.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return e.next=7,a.request({method:"eth_chainId"});case 7:return en(r,Number.parseInt(i=e.sent,(0,y.H2)(i)?16:10)),s="string"==typeof r.data?JSON.parse(r.data):r.data,o=(0,P.signTypedData)({privateKey:n,data:s,version:P.SignTypedDataVersion.V4}),e.abrupt("return",o);case 13:case"end":return e.stop()}},e)})),function(e,r){return f.apply(this,arguments)}),processEncryptionPublicKey:(p=(0,i.Z)(v().mark(function e(r,t){return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.cM.info("processEncryptionPublicKey",r),e.abrupt("return",(0,P.getEncryptionPublicKey)(h));case 2:case"end":return e.stop()}},e)})),function(e,r){return p.apply(this,arguments)}),processDecryptMessage:function(e,r){y.cM.info("processDecryptMessage",e);var t=(0,k.stripHexPrefix)(e.data),n=I.from(t,"hex");return(0,P.decrypt)({encryptedData:JSON.parse(n.toString("utf8")),privateKey:h})}}}function eu(e){return(0,k.addHexPrefix)(e.toString(16))}function ef(e){return k.BN.isBN(e)?e:new k.BN((0,k.stripHexPrefix)(e),16)}var ep={LEGACY:"0x0",ACCESS_LIST:"0x1",FEE_MARKET:"0x2"},ed={SENT_ETHER:"sentEther",CONTRACT_INTERACTION:"contractInteraction",DEPLOY_CONTRACT:"contractDeployment",STANDARD_TRANSACTION:"transaction"},eh={FEE_MARKET:"fee-market",LEGACY:"legacy",ETH_GASPRICE:"eth_gasPrice",NONE:"none"};function el(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function ev(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?el(Object(t),!0).forEach(function(r){(0,h.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):el(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var eg=function(){var e,r,t,n,a,c,u,f,p,d,l;function g(e){var r=e.getProviderEngineProxy;(0,s.Z)(this,g),(0,h.Z)(this,"chainConfig",null),(0,h.Z)(this,"getProviderEngineProxy",void 0),(0,h.Z)(this,"isEIP1559Compatible",!1),this.getProviderEngineProxy=r}return(0,o.Z)(g,[{key:"providerProxy",get:function(){return this.getProviderEngineProxy()}},{key:"init",value:(e=(0,i.Z)(v().mark(function e(){return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_provider_config",params:[]});case 2:return this.chainConfig=e.sent,e.next=5,this.getEIP1559Compatibility();case 5:this.isEIP1559Compatible=e.sent;case 6:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"getCommonConfiguration",value:(r=(0,i.Z)(v().mark(function e(){var r,t,n,a,i;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw Error("Chain config not initialized");case 2:return t=(r=this.chainConfig).displayName,n=r.chainId,a=this.isEIP1559Compatible?C.Hardfork.London:C.Hardfork.Berlin,i={name:t,chainId:"loading"===n?0:Number.parseInt(n,16),networkId:"loading"===n?0:Number.parseInt(n,16),defaultHardfork:a},e.abrupt("return",N().custom(i));case 6:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"formatTransaction",value:(t=(0,i.Z)(v().mark(function e(r){var t,n,a,i,s,o,c;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw Error("Chain config not initialized");case 2:if(void 0!==(t=ev({},r)).nonce){e.next=7;break}return e.next=6,this.providerProxy.request({method:"eth_getTransactionCount",params:[r.from,"latest"]});case 6:t.nonce=e.sent;case 7:if(!(!this.isEIP1559Compatible&&t.gasPrice)){e.next=19;break}if(t.maxFeePerGas&&delete t.maxFeePerGas,t.maxPriorityFeePerGas&&delete t.maxPriorityFeePerGas,t.gas){e.next=17;break}return e.next=13,this.getDefaultGasLimit(t);case 13:(n=e.sent)&&(t.gasLimit=n),e.next=18;break;case 17:t.gasLimit=t.gas;case 18:return e.abrupt("return",t);case 19:if(t.gas){e.next=26;break}return e.next=22,this.getDefaultGasLimit(t);case 22:(a=e.sent)&&(t.gasLimit=a),e.next=27;break;case 26:t.gasLimit=t.gas;case 27:return e.next=29,this.getDefaultGasFees(t);case 29:if(s=(i=e.sent).gasPrice,o=i.maxFeePerGas,c=i.maxPriorityFeePerGas,this.isEIP1559Compatible){if(!t.gasPrice||t.maxFeePerGas||t.maxPriorityFeePerGas)o&&!t.maxFeePerGas&&(t.maxFeePerGas=o),c&&!t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=c),s&&!t.maxFeePerGas&&(t.maxFeePerGas=s),t.maxFeePerGas&&!t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=t.maxFeePerGas);else{var u,f;t.maxFeePerGas=t.gasPrice,u="string"==typeof c?(0,k.stripHexPrefix)(c):c,f="string"==typeof t.gasPrice?(0,k.stripHexPrefix)(t.gasPrice):t.gasPrice,t.maxPriorityFeePerGas=(null==u||null==f?null:new S.O(u,10).lt(f,10))?c:t.gasPrice}delete t.gasPrice}else delete t.maxPriorityFeePerGas,delete t.maxFeePerGas;return!s||t.gasPrice||t.maxPriorityFeePerGas||t.maxFeePerGas||(t.gasPrice=s),t.type=this.isEIP1559Compatible?ep.FEE_MARKET:ep.LEGACY,t.chainId=this.chainConfig.chainId,e.abrupt("return",t);case 38:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"fetchEthGasPriceEstimate",value:(n=(0,i.Z)(v().mark(function e(){var r;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_gasPrice",params:[]});case 2:return r=e.sent,e.abrupt("return",{gasPrice:X(r).toString()});case 4:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"getEIP1559Compatibility",value:(a=(0,i.Z)(v().mark(function e(){var r,t;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]});case 2:return t=(r=e.sent)&&void 0!==r.baseFeePerGas,e.abrupt("return",!!t);case 5:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"fetchGasFeeEstimateData",value:(c=(0,i.Z)(v().mark(function e(){var r,t,n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chainConfig){e.next=2;break}throw Error("Chain config not initialized");case 2:if(r="0x1"===this.chainConfig.chainId,t=Number.parseInt(this.chainConfig.chainId,16),e.prev=4,!this.isEIP1559Compatible){e.next=12;break}return e.next=8,function(e){return er.apply(this,arguments)}("https://gas-api.metaswap.codefi.network/networks/<chain_id>/suggestedGasFees".replace("<chain_id>","".concat(t)));case 8:n={gasFeeEstimates:e.sent,gasEstimateType:eh.FEE_MARKET},e.next=20;break;case 12:if(!r){e.next=19;break}return e.next=15,function(e){return et.apply(this,arguments)}("https://gas-api.metaswap.codefi.network/networks/<chain_id>/gasPrices".replace("<chain_id>","".concat(t)));case 15:n={gasFeeEstimates:e.sent,gasEstimateType:eh.LEGACY},e.next=20;break;case 19:throw Error("Main gas fee/price estimation failed. Use fallback");case 20:e.next=34;break;case 22:return e.prev=22,e.t0=e.catch(4),e.prev=24,e.next=27,this.fetchEthGasPriceEstimate();case 27:n={gasFeeEstimates:e.sent,gasEstimateType:eh.ETH_GASPRICE},e.next=34;break;case 31:throw e.prev=31,e.t1=e.catch(24),Error("Gas fee/price estimation failed. Message: ".concat(e.t1.message));case 34:return e.abrupt("return",n);case 35:case"end":return e.stop()}},e,this,[[4,22],[24,31]])})),function(){return c.apply(this,arguments)})},{key:"getDefaultGasFees",value:(u=(0,i.Z)(v().mark(function e(r){var t,n,a,i,s,o,c;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!this.isEIP1559Compatible&&r.gasPrice||this.isEIP1559Compatible&&r.maxFeePerGas&&r.maxPriorityFeePerGas)){e.next=2;break}return e.abrupt("return",{});case 2:return e.prev=2,e.next=5,this.fetchGasFeeEstimateData();case 5:if(n=(t=e.sent).gasFeeEstimates,a=t.gasEstimateType,!(this.isEIP1559Compatible&&a===eh.FEE_MARKET)){e.next=16;break}if(s=(i=void 0===(i=n.medium)?{}:i).suggestedMaxPriorityFeePerGas,o=i.suggestedMaxFeePerGas,!(s&&o)){e.next=14;break}return e.abrupt("return",{maxFeePerGas:(0,k.addHexPrefix)(Y(o)),maxPriorityFeePerGas:(0,k.addHexPrefix)(Y(s))});case 14:e.next=22;break;case 16:if(a!==eh.LEGACY){e.next=20;break}return e.abrupt("return",{gasPrice:(0,k.addHexPrefix)(Y(n.medium))});case 20:if(a!==eh.ETH_GASPRICE){e.next=22;break}return e.abrupt("return",{gasPrice:(0,k.addHexPrefix)(Y(n.gasPrice))});case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),y.cM.error(e.t0);case 27:return e.next=29,this.fetchEthGasPriceEstimate();case 29:return c=e.sent.gasPrice,e.abrupt("return",{gasPrice:(0,k.addHexPrefix)(Y(c))});case 32:case"end":return e.stop()}},e,this,[[2,24]])})),function(e){return u.apply(this,arguments)})},{key:"estimateTxGas",value:(f=(0,i.Z)(v().mark(function e(r){var t,n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return delete(t=ev({},r)).gasPrice,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,e.next=6,this.providerProxy.request({method:"eth_estimateGas",params:[t]});case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"analyzeGasUsage",value:(p=(0,i.Z)(v().mark(function e(r){var t,n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]});case 2:return n=eu(function(e,r,t){var n=new k.BN(19),a=new k.BN(20);return e.mul(n).div(a)}(ef((t=e.sent).gasLimit),0,0)),e.prev=6,e.next=9,this.estimateTxGas(r);case 9:n=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),y.cM.warn(e.t0);case 15:return e.abrupt("return",{blockGasLimit:t.gasLimit,estimatedGasHex:n});case 16:case"end":return e.stop()}},e,this,[[6,12]])})),function(e){return p.apply(this,arguments)})},{key:"addGasBuffer",value:function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.5,n=ef(e),a=ef(r).muln(.9),i=n.muln(t);return n.gt(a)?eu(n):i.lt(a)?eu(i):eu(a)}},{key:"determineTransactionCategory",value:(d=(0,i.Z)(v().mark(function e(r){var t,n,a,i;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.data,n=r.to,a="",!(t&&!n)){e.next=6;break}i=ed.DEPLOY_CONTRACT,e.next=17;break;case 6:return e.prev=6,e.next=9,this.providerProxy.request({method:"eth_getCode",params:[n,"latest"]});case 9:a=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),y.cM.warn(e.t0);case 15:i=a&&"0x"!==a&&"0x0"!==a?ed.CONTRACT_INTERACTION:ed.SENT_ETHER;case 17:return e.abrupt("return",{transactionCategory:i,code:a});case 18:case"end":return e.stop()}},e,this,[[6,12]])})),function(e){return d.apply(this,arguments)})},{key:"getDefaultGasLimit",value:(l=(0,i.Z)(v().mark(function e(r){var t,n,a,i,s;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.determineTransactionCategory(ev({},r));case 2:if(t=e.sent.transactionCategory,!r.gas){e.next=6;break}return e.abrupt("return",r.gas);case 6:if(!(r.to&&t===ed.SENT_ETHER)){e.next=11;break}if(!r.data){e.next=9;break}throw Error("TxGasUtil - Trying to call a function on a non-contract address");case 9:return e.abrupt("return",(0,k.addHexPrefix)(21e3.toString(16)));case 11:return e.next=13,this.analyzeGasUsage(r);case 13:return a=(n=e.sent).blockGasLimit,i=n.estimatedGasHex,s=this.addGasBuffer((0,k.addHexPrefix)(i),a),e.abrupt("return",s);case 18:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})}]),g}();function em(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function ey(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?em(Object(t),!0).forEach(function(r){(0,h.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):em(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var ex=function(e){(0,f.Z)(l,e);var r,t,n,a,c,u,h=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,d.Z)(l);if(r){var n=(0,d.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,p.Z)(this,e)});function l(e){var r=e.config,t=e.state;return(0,s.Z)(this,l),h.call(this,{config:{chainConfig:ey(ey({},r.chainConfig),{},{chainNamespace:y.EN.EIP155})},state:t})}return(0,o.Z)(l,[{key:"enable",value:(t=(0,i.Z)(v().mark(function e(){return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.privateKey){e.next=2;break}throw b.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});case 2:return e.next=4,this.setupProvider(this.state.privateKey);case 4:return e.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"setupProvider",value:(n=(0,i.Z)(v().mark(function e(r){var t,n,a,i,s,o;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=j(ec({txFormatter:t=new eg({getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),privKey:r,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)})),a=this.getChainSwitchMiddleware(),i=new m.eI,s=H(this.config.chainConfig).networkMiddleware,i.push(n),i.push(a),i.push(this.getAccountMiddleware()),i.push(s),o=(0,g.Xj)(i),this.updateProviderEngineProxy(o),e.next=14,t.init();case 14:return e.next=16,this.lookupNetwork();case 16:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"updateAccount",value:(a=(0,i.Z)(v().mark(function e(r){return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw b.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return e.next=4,this._providerEngineProxy.request({method:"eth_private_key"});case 4:if(!(e.sent!==r.privateKey)){e.next=14;break}return e.next=8,this.setupProvider(r.privateKey);case 8:return e.t0=this._providerEngineProxy,e.next=11,this._providerEngineProxy.request({method:"eth_accounts"});case 11:e.t1=e.sent,e.t2={accounts:e.t1},e.t0.emit.call(e.t0,"accountsChanged",e.t2);case 14:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"switchChain",value:(c=(0,i.Z)(v().mark(function e(r){var t,n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw b.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return t=this.getChainConfig(r.chainId),this.update({chainId:"loading"}),this.configure({chainConfig:t}),e.next=7,this._providerEngineProxy.request({method:"eth_private_key"});case 7:return n=e.sent,e.next=10,this.setupProvider(n);case 10:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"lookupNetwork",value:(u=(0,i.Z)(v().mark(function e(){var r,t;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw b.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:if(r=this.config.chainConfig.chainId){e.next=5;break}throw b.ethErrors.rpc.invalidParams("chainId is required while lookupNetwork");case 5:return e.next=7,this._providerEngineProxy.request({method:"net_version",params:[]});case 7:if(t=e.sent,!(parseInt(r,16)!==parseInt(t,10))){e.next=10;break}throw b.ethErrors.provider.chainDisconnected("Invalid network, net_version is: ".concat(t));case 10:return this.state.chainId!==r&&(this._providerEngineProxy.emit("chainChanged",r),this._providerEngineProxy.emit("connect",{chainId:r})),this.update({chainId:r}),e.abrupt("return",t);case 13:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)})},{key:"getChainSwitchMiddleware",value:function(){var e,r,t=this;return function(e){var r=e.addChain,t=e.switchChain;function n(){return(n=(0,i.Z)(v().mark(function e(t,n){var a,i;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!==(a=t.params)&&void 0!==a&&a.length?t.params[0]:void 0){e.next=3;break}throw b.ethErrors.rpc.invalidParams("Missing chain params");case 3:if(i.chainId){e.next=5;break}throw b.ethErrors.rpc.invalidParams("Missing chainId in chainParams");case 5:if(!(!i.rpcUrls||0===i.rpcUrls.length)){e.next=7;break}throw b.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");case 7:if(i.nativeCurrency){e.next=9;break}throw b.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");case 9:return e.next=11,r(i);case 11:n.result=e.sent;case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function a(){return(a=(0,i.Z)(v().mark(function e(r,n){var a,i;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!==(a=r.params)&&void 0!==a&&a.length?r.params[0]:void 0){e.next=3;break}throw b.ethErrors.rpc.invalidParams("Missing chainId");case 3:return e.next=5,t(i);case 5:n.result=e.sent;case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}return(0,m.v0)({wallet_addEthereumChain:(0,m.Pk)(function(e,r){return n.apply(this,arguments)}),wallet_switchEthereumChain:(0,m.Pk)(function(e,r){return a.apply(this,arguments)})})}({addChain:(e=(0,i.Z)(v().mark(function e(r){var n,a,i,s,o;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=r.chainId,a=r.chainName,i=r.rpcUrls,s=r.blockExplorerUrls,o=r.nativeCurrency,t.addChain({chainNamespace:"eip155",chainId:n,ticker:(null==o?void 0:o.symbol)||"ETH",tickerName:(null==o?void 0:o.name)||"Ether",displayName:a,rpcTarget:i[0],blockExplorer:(null==s?void 0:s[0])||""});case 2:case"end":return e.stop()}},e)})),function(r){return e.apply(this,arguments)}),switchChain:(r=(0,i.Z)(v().mark(function e(r){var n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.chainId,e.next=3,t.switchChain({chainId:n});case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})})}},{key:"getAccountMiddleware",value:function(){var e,r=this;return function(e){var r=e.updatePrivatekey;function t(){return(t=(0,i.Z)(v().mark(function e(t,n){var a,i;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(i=null!==(a=t.params)&&void 0!==a&&a.length?t.params[0]:void 0)&&i.privateKey){e.next=3;break}throw b.ethErrors.rpc.invalidParams("Missing privateKey");case 3:return e.next=5,r(i);case 5:n.result=e.sent;case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}return(0,m.v0)({wallet_updateAccount:(0,m.Pk)(function(e,r){return t.apply(this,arguments)})})}({updatePrivatekey:(e=(0,i.Z)(v().mark(function e(t){var n;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.privateKey,e.next=3,r.updateAccount({privateKey:n});case 3:case"end":return e.stop()}},e)})),function(r){return e.apply(this,arguments)})})}}]),l}(x.Zk);(0,h.Z)(ex,"getProviderInstance",(a=(0,i.Z)(v().mark(function e(r){var t;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new ex({config:{chainConfig:r.chainConfig}}),e.next=3,t.setupProvider(r.privKey);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}))},46114:function(e,r,t){var n=t(48764).Buffer,a=this&&this.__read||function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,a,i=t.call(e),s=[];try{for(;(void 0===r||r-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return s},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isZeroAddress=r.zeroAddress=r.importPublic=r.privateToAddress=r.privateToPublic=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isValidAddress=r.Account=void 0;var s=i(t(69282)),o=t(50523),c=t(95053),u=t(60571),f=t(16397),p=t(47107),d=t(91207),h=t(3323),l=t(89260),v=function(){function e(e,r,t,n){void 0===e&&(e=new o.BN(0)),void 0===r&&(r=new o.BN(0)),void 0===t&&(t=f.KECCAK256_RLP),void 0===n&&(n=f.KECCAK256_NULL),this.nonce=e,this.balance=r,this.stateRoot=t,this.codeHash=n,this._validate()}return e.fromAccountData=function(r){var t=r.nonce,n=r.balance,a=r.stateRoot,i=r.codeHash;return new e(t?new o.BN((0,p.toBuffer)(t)):void 0,n?new o.BN((0,p.toBuffer)(n)):void 0,a?(0,p.toBuffer)(a):void 0,i?(0,p.toBuffer)(i):void 0)},e.fromRlpSerializedAccount=function(e){var r=o.rlp.decode(e);if(!Array.isArray(r))throw Error("Invalid serialized account input. Must be array");return this.fromValuesArray(r)},e.fromValuesArray=function(r){var t=a(r,4),n=t[0],i=t[1],s=t[2],c=t[3];return new e(new o.BN(n),new o.BN(i),s,c)},e.prototype._validate=function(){if(this.nonce.lt(new o.BN(0)))throw Error("nonce must be greater than zero");if(this.balance.lt(new o.BN(0)))throw Error("balance must be greater than zero");if(32!==this.stateRoot.length)throw Error("stateRoot must have a length of 32");if(32!==this.codeHash.length)throw Error("codeHash must have a length of 32")},e.prototype.raw=function(){return[(0,l.bnToUnpaddedBuffer)(this.nonce),(0,l.bnToUnpaddedBuffer)(this.balance),this.stateRoot,this.codeHash]},e.prototype.serialize=function(){return o.rlp.encode(this.raw())},e.prototype.isContract=function(){return!this.codeHash.equals(f.KECCAK256_NULL)},e.prototype.isEmpty=function(){return this.balance.isZero()&&this.nonce.isZero()&&this.codeHash.equals(f.KECCAK256_NULL)},e}();r.Account=v;var g=function(e){try{(0,h.assertIsString)(e)}catch(r){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};r.isValidAddress=g;var m=function(e,r){(0,h.assertIsHexString)(e);var t=(0,u.stripHexPrefix)(e).toLowerCase(),n="";r&&(n=(0,l.toType)(r,l.TypeOutput.BN).toString()+"0x");for(var a=(0,d.keccakFromString)(n+t).toString("hex"),i="0x",s=0;s<t.length;s++)parseInt(a[s],16)>=8?i+=t[s].toUpperCase():i+=t[s];return i};r.toChecksumAddress=m;var y=function(e,t){return(0,r.isValidAddress)(e)&&(0,r.toChecksumAddress)(e,t)===e};r.isValidChecksumAddress=y;var x=function(e,r){(0,h.assertIsBuffer)(e),(0,h.assertIsBuffer)(r);var t=new o.BN(r);return t.isZero()?(0,d.rlphash)([e,null]).slice(-20):(0,d.rlphash)([e,n.from(t.toArray())]).slice(-20)};r.generateAddress=x;var b=function(e,r,t){return(0,h.assertIsBuffer)(e),(0,h.assertIsBuffer)(r),(0,h.assertIsBuffer)(t),(0,s.default)(20===e.length),(0,s.default)(32===r.length),(0,d.keccak256)(n.concat([n.from("ff","hex"),e,r,(0,d.keccak256)(t)])).slice(-20)};r.generateAddress2=b;var w=function(e){return(0,c.privateKeyVerify)(e)};r.isValidPrivate=w;var P=function(e,r){return(void 0===r&&(r=!1),(0,h.assertIsBuffer)(e),64===e.length)?(0,c.publicKeyVerify)(n.concat([n.from([4]),e])):!!r&&(0,c.publicKeyVerify)(e)};r.isValidPublic=P;var k=function(e,r){return void 0===r&&(r=!1),(0,h.assertIsBuffer)(e),r&&64!==e.length&&(e=n.from((0,c.publicKeyConvert)(e,!1).slice(1))),(0,s.default)(64===e.length),(0,d.keccak)(e).slice(-20)};r.pubToAddress=k,r.publicToAddress=r.pubToAddress;var E=function(e){return(0,h.assertIsBuffer)(e),n.from((0,c.publicKeyCreate)(e,!1)).slice(1)};r.privateToPublic=E;var _=function(e){return(0,r.publicToAddress)((0,r.privateToPublic)(e))};r.privateToAddress=_;var T=function(e){return(0,h.assertIsBuffer)(e),64!==e.length&&(e=n.from((0,c.publicKeyConvert)(e,!1).slice(1))),e};r.importPublic=T;var A=function(){var e=(0,p.zeros)(20);return(0,p.bufferToHex)(e)};r.zeroAddress=A;var O=function(e){try{(0,h.assertIsString)(e)}catch(t){return!1}return(0,r.zeroAddress)()===e};r.isZeroAddress=O},75770:function(e,r,t){var n=t(48764).Buffer,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Address=void 0;var i=a(t(69282)),s=t(50523),o=t(47107),c=t(46114),u=function(){function e(e){(0,i.default)(20===e.length,"Invalid address length"),this.buf=e}return e.zero=function(){return new e((0,o.zeros)(20))},e.fromString=function(r){return(0,i.default)((0,c.isValidAddress)(r),"Invalid address"),new e((0,o.toBuffer)(r))},e.fromPublicKey=function(r){(0,i.default)(n.isBuffer(r),"Public key should be Buffer");var t=(0,c.pubToAddress)(r);return new e(t)},e.fromPrivateKey=function(r){(0,i.default)(n.isBuffer(r),"Private key should be Buffer");var t=(0,c.privateToAddress)(r);return new e(t)},e.generate=function(r,t){return(0,i.default)(s.BN.isBN(t)),new e((0,c.generateAddress)(r.buf,t.toArrayLike(n)))},e.generate2=function(r,t,a){return(0,i.default)(n.isBuffer(t)),(0,i.default)(n.isBuffer(a)),new e((0,c.generateAddress2)(r.buf,t,a))},e.prototype.equals=function(e){return this.buf.equals(e.buf)},e.prototype.isZero=function(){return this.equals(e.zero())},e.prototype.isPrecompileOrSystemAddress=function(){var e=new s.BN(this.buf),r=new s.BN(0),t=new s.BN("ffff","hex");return e.gte(r)&&e.lte(t)},e.prototype.toString=function(){return"0x"+this.buf.toString("hex")},e.prototype.toBuffer=function(){return n.from(this.buf)},e}();r.Address=u},47107:function(e,r,t){var n=t(48764).Buffer,a=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,a,i=t.call(e),s=[];try{for(;(void 0===r||r-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return s};Object.defineProperty(r,"__esModule",{value:!0}),r.bufArrToArr=r.arrToBufArr=r.validateNoLeadingZeroes=r.baToJSON=r.toUtf8=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.bufferToHex=r.bufferToInt=r.toBuffer=r.unpadHexString=r.unpadArray=r.unpadBuffer=r.setLengthRight=r.setLengthLeft=r.zeros=r.intToBuffer=r.intToHex=void 0;var s=t(50523),o=t(60571),c=t(3323),u=function(e){if(!Number.isSafeInteger(e)||e<0)throw Error("Received an invalid integer type: ".concat(e));return"0x".concat(e.toString(16))};r.intToHex=u;var f=function(e){var t=(0,r.intToHex)(e);return n.from((0,o.padToEven)(t.slice(2)),"hex")};r.intToBuffer=f;var p=function(e){return n.allocUnsafe(e).fill(0)};r.zeros=p;var d=function(e,t,n){var a=(0,r.zeros)(t);return n?e.length<t?(e.copy(a),a):e.slice(0,t):e.length<t?(e.copy(a,t-e.length),a):e.slice(-t)},h=function(e,r){return(0,c.assertIsBuffer)(e),d(e,r,!1)};r.setLengthLeft=h;var l=function(e,r){return(0,c.assertIsBuffer)(e),d(e,r,!0)};r.setLengthRight=l;var v=function(e){for(var r=e[0];e.length>0&&"0"===r.toString();)r=(e=e.slice(1))[0];return e},g=function(e){return(0,c.assertIsBuffer)(e),v(e)};r.unpadBuffer=g;var m=function(e){return(0,c.assertIsArray)(e),v(e)};r.unpadArray=m;var y=function(e){return(0,c.assertIsHexString)(e),v(e=(0,o.stripHexPrefix)(e))};r.unpadHexString=y;var x=function(e){if(null==e)return n.allocUnsafe(0);if(n.isBuffer(e)||Array.isArray(e)||e instanceof Uint8Array)return n.from(e);if("string"==typeof e){if(!(0,o.isHexString)(e))throw Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ".concat(e));return n.from((0,o.padToEven)((0,o.stripHexPrefix)(e)),"hex")}if("number"==typeof e)return(0,r.intToBuffer)(e);if(s.BN.isBN(e)){if(e.isNeg())throw Error("Cannot convert negative BN to buffer. Given: ".concat(e));return e.toArrayLike(n)}if(e.toArray)return n.from(e.toArray());if(e.toBuffer)return n.from(e.toBuffer());throw Error("invalid type")};r.toBuffer=x;var b=function(e){return new s.BN((0,r.toBuffer)(e)).toNumber()};r.bufferToInt=b;var w=function(e){return"0x"+(e=(0,r.toBuffer)(e)).toString("hex")};r.bufferToHex=w;var P=function(e){return new s.BN(e).fromTwos(256)};r.fromSigned=P;var k=function(e){return n.from(e.toTwos(256).toArray())};r.toUnsigned=k;var E=function(e){return"string"!=typeof e?e:(0,o.isHexPrefixed)(e)?e:"0x"+e};r.addHexPrefix=E;var _=function(e){if((e=(0,o.stripHexPrefix)(e)).length%2!=0)throw Error("Invalid non-even hex string input for toUtf8() provided");return n.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};r.toUtf8=_;var T=function(e){if(n.isBuffer(e))return"0x".concat(e.toString("hex"));if(e instanceof Array){for(var t=[],a=0;a<e.length;a++)t.push((0,r.baToJSON)(e[a]));return t}};r.baToJSON=T;var A=function(e){var r,t;try{for(var n=a(Object.entries(e)),s=n.next();!s.done;s=n.next()){var o=i(s.value,2),c=o[0],u=o[1];if(void 0!==u&&u.length>0&&0===u[0])throw Error("".concat(c," cannot have leading zeroes, received: ").concat(u.toString("hex")))}}catch(f){r={error:f}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(r)throw r.error}}};r.validateNoLeadingZeroes=A,r.arrToBufArr=function e(r){return Array.isArray(r)?r.map(function(r){return e(r)}):n.from(r)},r.bufArrToArr=function e(r){return Array.isArray(r)?r.map(function(r){return e(r)}):Uint8Array.from(null!=r?r:[])}},16397:function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0}),r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.MAX_INTEGER=r.MAX_UINT64=void 0;var n=t(48764),a=t(50523);r.MAX_UINT64=new a.BN("ffffffffffffffff",16),r.MAX_INTEGER=new a.BN("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),r.TWO_POW256=new a.BN("10000000000000000000000000000000000000000000000000000000000000000",16),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=n.Buffer.from(r.KECCAK256_NULL_S,"hex"),r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=n.Buffer.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=n.Buffer.from(r.KECCAK256_RLP_S,"hex")},50523:function(e,r,t){var n=this&&this.__createBinding||(Object.create?function(e,r,t,n){void 0===n&&(n=t);var a=Object.getOwnPropertyDescriptor(r,t);(!a||("get"in a?!r.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,a)}:function(e,r,t,n){void 0===n&&(n=t),e[n]=r[t]}),a=this&&this.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&n(r,e,t);return a(r,e),r},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.rlp=r.BN=void 0;var o=s(t(13550));r.BN=o.default;var c=i(t(51675));r.rlp=c},91207:function(e,r,t){var n=t(48764).Buffer;Object.defineProperty(r,"__esModule",{value:!0}),r.rlphash=r.ripemd160FromArray=r.ripemd160FromString=r.ripemd160=r.sha256FromArray=r.sha256FromString=r.sha256=r.keccakFromArray=r.keccakFromHexString=r.keccakFromString=r.keccak256=r.keccak=void 0;var a=t(82192),i=t(23482),s=t(50523),o=t(47107),c=t(3323),u=function(e,r){switch(void 0===r&&(r=256),(0,c.assertIsBuffer)(e),r){case 224:return(0,a.keccak224)(e);case 256:return(0,a.keccak256)(e);case 384:return(0,a.keccak384)(e);case 512:return(0,a.keccak512)(e);default:throw Error("Invald algorithm: keccak".concat(r))}};r.keccak=u;var f=function(e){return(0,r.keccak)(e)};r.keccak256=f;var p=function(e,t){void 0===t&&(t=256),(0,c.assertIsString)(e);var a=n.from(e,"utf8");return(0,r.keccak)(a,t)};r.keccakFromString=p;var d=function(e,t){return void 0===t&&(t=256),(0,c.assertIsHexString)(e),(0,r.keccak)((0,o.toBuffer)(e),t)};r.keccakFromHexString=d;var h=function(e,t){return void 0===t&&(t=256),(0,c.assertIsArray)(e),(0,r.keccak)((0,o.toBuffer)(e),t)};r.keccakFromArray=h;var l=function(e){return e=(0,o.toBuffer)(e),i("sha256").update(e).digest()},v=function(e){return(0,c.assertIsBuffer)(e),l(e)};r.sha256=v;var g=function(e){return(0,c.assertIsString)(e),l(e)};r.sha256FromString=g;var m=function(e){return(0,c.assertIsArray)(e),l(e)};r.sha256FromArray=m;var y=function(e,r){e=(0,o.toBuffer)(e);var t=i("rmd160").update(e).digest();return!0===r?(0,o.setLengthLeft)(t,32):t},x=function(e,r){return(0,c.assertIsBuffer)(e),y(e,r)};r.ripemd160=x;var b=function(e,r){return(0,c.assertIsString)(e),y(e,r)};r.ripemd160FromString=b;var w=function(e,r){return(0,c.assertIsArray)(e),y(e,r)};r.ripemd160FromArray=w;var P=function(e){return(0,r.keccak)(s.rlp.encode(e))};r.rlphash=P},3323:function(e,r,t){var n=t(48764).Buffer;Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBuffer=r.assertIsHexString=void 0;var a=t(60571),i=function(e){if(!(0,a.isHexString)(e))throw Error("This method only supports 0x-prefixed hex strings but input was: ".concat(e))};r.assertIsHexString=i;var s=function(e){if(!n.isBuffer(e))throw Error("This method only supports Buffer but input was: ".concat(e))};r.assertIsBuffer=s;var o=function(e){if(!Array.isArray(e))throw Error("This method only supports number arrays but input was: ".concat(e))};r.assertIsArray=o;var c=function(e){if("string"!=typeof e)throw Error("This method only supports strings but input was: ".concat(e))};r.assertIsString=c},53934:function(e,r,t){var n=this&&this.__createBinding||(Object.create?function(e,r,t,n){void 0===n&&(n=t);var a=Object.getOwnPropertyDescriptor(r,t);(!a||("get"in a?!r.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,a)}:function(e,r,t,n){void 0===n&&(n=t),e[n]=r[t]}),a=this&&this.__exportStar||function(e,r){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(r,t)||n(r,e,t)};Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0,a(t(16397),r),a(t(46114),r),a(t(75770),r),a(t(91207),r),a(t(3077),r),a(t(47107),r),a(t(9211),r),a(t(50523),r),a(t(89260),r);var i=t(60571);Object.defineProperty(r,"isHexPrefixed",{enumerable:!0,get:function(){return i.isHexPrefixed}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return i.stripHexPrefix}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return i.padToEven}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return i.getBinarySize}}),Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return i.arrayContainsArray}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return i.toAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return i.fromUtf8}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return i.fromAscii}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return i.getKeys}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return i.isHexString}})},60571:function(e,r,t){var n=t(48764).Buffer;function a(e){if("string"!=typeof e)throw Error("[isHexPrefixed] input must be type 'string', received type ".concat(typeof e));return"0"===e[0]&&"x"===e[1]}Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0,r.isHexPrefixed=a;var i=function(e){if("string"!=typeof e)throw Error("[stripHexPrefix] input must be type 'string', received ".concat(typeof e));return a(e)?e.slice(2):e};function s(e){var r=e;if("string"!=typeof r)throw Error("[padToEven] value must be type 'string', received ".concat(typeof r));return r.length%2&&(r="0".concat(r)),r}r.stripHexPrefix=i,r.padToEven=s,r.getBinarySize=function(e){if("string"!=typeof e)throw Error("[getBinarySize] method requires input type 'string', recieved ".concat(typeof e));return n.byteLength(e,"utf8")},r.arrayContainsArray=function(e,r,t){if(!0!==Array.isArray(e))throw Error("[arrayContainsArray] method requires input 'superset' to be an array, got type '".concat(typeof e,"'"));if(!0!==Array.isArray(r))throw Error("[arrayContainsArray] method requires input 'subset' to be an array, got type '".concat(typeof r,"'"));return r[t?"some":"every"](function(r){return e.indexOf(r)>=0})},r.toAscii=function(e){var r="",t=0,n=e.length;for("0x"===e.substring(0,2)&&(t=2);t<n;t+=2)r+=String.fromCharCode(parseInt(e.substr(t,2),16));return r},r.fromUtf8=function(e){var r=n.from(e,"utf8");return"0x".concat(s(r.toString("hex")).replace(/^0+|0+$/g,""))},r.fromAscii=function(e){for(var r="",t=0;t<e.length;t++){var n=e.charCodeAt(t).toString(16);r+=n.length<2?"0".concat(n):n}return"0x".concat(r)},r.getKeys=function(e,r,t){if(!Array.isArray(e))throw Error("[getKeys] method expects input 'params' to be an array, got ".concat(typeof e));if("string"!=typeof r)throw Error("[getKeys] method expects input 'key' to be type 'string', got ".concat(typeof e));for(var n=[],a=0;a<e.length;a++){var i=e[a][r];if(t&&!i)i="";else if("string"!=typeof i)throw Error("invalid abi - expected type 'string', received ".concat(typeof i));n.push(i)}return n},r.isHexString=function(e,r){return"string"==typeof e&&!!e.match(/^0x[0-9A-Fa-f]*$/)&&(!r||e.length===2+2*r)}},9211:function(e,r,t){var n=t(48764).Buffer,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.defineProperties=void 0;var i=a(t(69282)),s=t(60571),o=t(50523),c=t(47107),u=function(e,r,t){if(e.raw=[],e._fields=[],e.toJSON=function(r){if(void 0===r&&(r=!1),r){var t={};return e._fields.forEach(function(r){t[r]="0x".concat(e[r].toString("hex"))}),t}return(0,c.baToJSON)(e.raw)},e.serialize=function(){return o.rlp.encode(e.raw)},r.forEach(function(r,t){function a(){return e.raw[t]}function s(a){"00"!==(a=(0,c.toBuffer)(a)).toString("hex")||r.allowZero||(a=n.allocUnsafe(0)),r.allowLess&&r.length?(a=(0,c.unpadBuffer)(a),(0,i.default)(r.length>=a.length,"The field ".concat(r.name," must not have more ").concat(r.length," bytes"))):!(r.allowZero&&0===a.length)&&r.length&&(0,i.default)(r.length===a.length,"The field ".concat(r.name," must have byte length of ").concat(r.length)),e.raw[t]=a}e._fields.push(r.name),Object.defineProperty(e,r.name,{enumerable:!0,configurable:!0,get:a,set:s}),r.default&&(e[r.name]=r.default),r.alias&&Object.defineProperty(e,r.alias,{enumerable:!1,configurable:!0,set:s,get:a})}),t){if("string"==typeof t&&(t=n.from((0,s.stripHexPrefix)(t),"hex")),n.isBuffer(t)&&(t=o.rlp.decode(t)),Array.isArray(t)){if(t.length>e._fields.length)throw Error("wrong number of fields in data");t.forEach(function(r,t){e[e._fields[t]]=(0,c.toBuffer)(r)})}else if("object"==typeof t){var a=Object.keys(t);r.forEach(function(r){-1!==a.indexOf(r.name)&&(e[r.name]=t[r.name]),-1!==a.indexOf(r.alias)&&(e[r.alias]=t[r.alias])})}else throw Error("invalid data")}};r.defineProperties=u},3077:function(e,r,t){var n=t(48764).Buffer;Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.ecsign=void 0;var a=t(95053),i=t(50523),s=t(47107),o=t(91207),c=t(3323),u=t(89260);function f(e,r){var t=(0,u.toType)(e,u.TypeOutput.BN);if(t.eqn(0)||t.eqn(1))return(0,u.toType)(e,u.TypeOutput.BN);if(!r)return t.subn(27);var n=(0,u.toType)(r,u.TypeOutput.BN);return t.sub(n.muln(2).addn(35))}function p(e){var r=new i.BN(e);return r.eqn(0)||r.eqn(1)}r.ecsign=function(e,r,t){var i=(0,a.ecdsaSign)(e,r),s=i.signature,o=i.recid,c=n.from(s.slice(0,32)),f=n.from(s.slice(32,64));if(!t||"number"==typeof t){if(t&&!Number.isSafeInteger(t))throw Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");return{r:c,s:f,v:t?o+(2*t+35):o+27}}return{r:c,s:f,v:(0,u.toType)(t,u.TypeOutput.BN).muln(2).addn(35).addn(o).toArrayLike(n)}};var d=function(e,r,t,i,o){var c=n.concat([(0,s.setLengthLeft)(t,32),(0,s.setLengthLeft)(i,32)],64),u=f(r,o);if(!p(u))throw Error("Invalid signature v value");var d=(0,a.ecdsaRecover)(c,u.toNumber(),e);return n.from((0,a.publicKeyConvert)(d,!1).slice(1))};r.ecrecover=d;var h=function(e,r,t,a){if(!p(f(e,a)))throw Error("Invalid signature v value");return(0,s.bufferToHex)(n.concat([(0,s.setLengthLeft)(r,32),(0,s.setLengthLeft)(t,32),(0,s.toBuffer)(e)]))};r.toRpcSig=h;var l=function(e,r,t,a){if(!p(f(e,a)))throw Error("Invalid signature v value");var i=(0,u.toType)(e,u.TypeOutput.Number),o=t;return(i>28&&i%2==1||1===i||28===i)&&(o=n.from(t),o[0]|=128),(0,s.bufferToHex)(n.concat([(0,s.setLengthLeft)(r,32),(0,s.setLengthLeft)(o,32)]))};r.toCompactSig=l;var v=function(e){var r,t,n,a=(0,s.toBuffer)(e);if(a.length>=65)r=a.slice(0,32),t=a.slice(32,64),n=(0,s.bufferToInt)(a.slice(64));else if(64===a.length)r=a.slice(0,32),t=a.slice(32,64),n=(0,s.bufferToInt)(a.slice(32,33))>>7,t[0]&=127;else throw Error("Invalid signature length");return n<27&&(n+=27),{v:n,r:r,s:t}};r.fromRpcSig=v;var g=function(e,r,t,n,a){void 0===n&&(n=!0);var s=new i.BN("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),o=new i.BN("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(32!==r.length||32!==t.length||!p(f(e,a)))return!1;var c=new i.BN(r),u=new i.BN(t);return!(c.isZero()||c.gt(o)||u.isZero()||u.gt(o))&&(!n||1!==u.cmp(s))};r.isValidSignature=g;var m=function(e){(0,c.assertIsBuffer)(e);var r=n.from("\x19Ethereum Signed Message:\n".concat(e.length),"utf-8");return(0,o.keccak)(n.concat([r,e]))};r.hashPersonalMessage=m},89260:function(e,r,t){var n,a,i=t(48764).Buffer;Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=r.bnToRlp=r.bnToUnpaddedBuffer=r.bnToHex=void 0;var s=t(50523),o=t(60571),c=t(47107);function u(e){return(0,c.unpadBuffer)(e.toArrayLike(i))}r.bnToHex=function(e){return"0x".concat(e.toString(16))},r.bnToUnpaddedBuffer=u,r.bnToRlp=function(e){return u(e)},(n=a=r.TypeOutput||(r.TypeOutput={}))[n.Number=0]="Number",n[n.BN=1]="BN",n[n.Buffer=2]="Buffer",n[n.PrefixedHexString=3]="PrefixedHexString",r.toType=function(e,r){if(null===e)return null;if(void 0!==e){if("string"!=typeof e||(0,o.isHexString)(e)){if("number"==typeof e&&!Number.isSafeInteger(e))throw Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)")}else throw Error("A string must be provided with a 0x-prefix, given: ".concat(e));var t=(0,c.toBuffer)(e);if(r===a.Buffer)return t;if(r===a.BN)return new s.BN(t);if(r!==a.Number)return"0x".concat(t.toString("hex"));var n=new s.BN(t),i=new s.BN(Number.MAX_SAFE_INTEGER.toString());if(n.gt(i))throw Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return n.toNumber()}}}}]);